(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("os0x"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("os0x"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.F)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.z)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.E)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.F)(i):i,n+=" "}return n},v=null,m=!0,b=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,v=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===v&&!0===f.get("logging_enabled")&&b(!0)),v){var n=y.apply(null,t);v(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)(t));d.error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)(t));throw d.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)(t));d.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",S="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===I||e===S)return-1;if(e===I||t===S)return 1;var n=G(t),r=G(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.F)(e))},A=function(t){if("object"!=typeof t||null===t)return Object(o.F)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.F)(e[i]),r+=":",r+=A(t[e[i]]);return r+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function k(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var R,D,M,L,F,U,V,q,H,B=function(t){var e,n,r,i,s;Object(o.d)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},z=new RegExp("^-?(0*)\\d{1,10}$"),G=function(t){if(z.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},W=function(t){try{t()}catch(e){setTimeout(function(){throw C("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Q=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},$=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),K=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.D)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.D)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.D)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Y=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,J="websocket",X="long_polling",Z=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.d)("string"==typeof t,"typeof type must == string"),Object(o.d)("object"==typeof e,"typeof params must == object"),t===J)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==X)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return k(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}(),tt=function(t,e){var n=et(t),r=n.namespace;return"firebase.com"===n.domain&&O(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Z(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new $(n.pathString)}},et=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},nt=/[\[\].#$\/\u0000-\u001F\u007F]/,rt=/[\[\].#$\u0000-\u001F\u007F]/,it=10485760,ot=function(t){return"string"==typeof t&&0!==t.length&&!nt.test(t)},st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},ut=function(t,e,n,r,i){i&&void 0===n||ct(Object(o.l)(t,e,i),n,r)},ct=function(t,e,n){var r=n instanceof $?new K(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>it/3&&Object(o.D)(e)>it)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(k(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!ot(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),ct(t,n,r),r.pop()}),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},lt=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];k(n,function(t,e){var n=new $(t);if(ct(s,e,r.child(n)),".priority"===n.getBack()&&!at(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ot(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort($.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ht=function(t,e,n,r){if(!r||void 0!==n){if(T(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!at(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ft=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},dt=function(t,e,n,r){if(!(r&&void 0===n||ot(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},pt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pt(t,e,n,r)},yt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},vt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ot(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),st(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},mt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},bt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.G)("OnDisconnect.cancel",0,1,arguments.length),Object(o.H)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.G)("OnDisconnect.remove",0,1,arguments.length),yt("OnDisconnect.remove",this.path_),Object(o.H)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.G)("OnDisconnect.set",1,2,arguments.length),yt("OnDisconnect.set",this.path_),ut("OnDisconnect.set",1,t,this.path_,!1),Object(o.H)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.G)("OnDisconnect.setWithPriority",2,3,arguments.length),yt("OnDisconnect.setWithPriority",this.path_),ut("OnDisconnect.setWithPriority",1,t,this.path_,!1),ht("OnDisconnect.setWithPriority",2,e,!1),Object(o.H)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.G)("OnDisconnect.update",1,2,arguments.length),yt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("OnDisconnect.update",1,t,this.path_,!1),Object(o.H)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),_t=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.G)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),wt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Et=(R=0,D=[],function(t){var e,n=t===R;R=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=wt.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===D[e];e--)D[e]=0;D[e]++}else for(e=0;e<12;e++)D[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=wt.charAt(D[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),Ot=function(t){if("2147483647"===t)return"-";var e=G(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return S;var o=wt.charAt(wt.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},Ct=function(t){if("-2147483648"===t)return I;var e=G(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=wt.charAt(wt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},Tt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),It=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Tt(I,t),r=new Tt(I,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Tt.MIN},t}(),St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return M},set:function(t){M=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Tt.MIN},e.prototype.maxPost=function(){return new Tt(S,M)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Tt(t,M)},e.prototype.toString=function(){return".key"},e}(It),xt=new St,jt=function(t){return"number"==typeof t?"number:"+B(t):"string:"+t},Nt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===L||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===L||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},At=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Nt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return F},set:function(t){F=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+jt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?B(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Pt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Tt.MIN},e.prototype.maxPost=function(){return new Tt(S,new At("[PRIORITY-POST]",V))},e.prototype.makePost=function(t,e){var n=U(t);return new Tt(e,new At("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(It)),kt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Rt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Mt.EMPTY_NODE,this.right=null!=o?o:Mt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Mt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Mt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Dt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Rt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Mt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new kt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new kt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new kt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new kt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Dt,t}(),Lt=Math.log(2),Ft=function(){function t(t){this.count=parseInt(Math.log(t+1)/Lt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Ut=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Rt(s,o.node,Rt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Rt(s,o.node,Rt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Rt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Rt.BLACK):(a(h,Rt.BLACK),a(h,Rt.RED))}return o}(new Ft(t.length));return new Mt(r||e,o)},Vt={},qt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(Vt&&Pt,"ChildrenNode.ts has not been loaded"),q=q||new t({".priority":Vt},{".priority":Pt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.C)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Mt?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==xt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Tt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Ut(s,e.getCompare()):Vt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.A)(this.indexes_,function(t,i){var s=Object(o.C)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===Vt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Tt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Ut(a,s.getCompare())}return Vt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Tt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.A)(this.indexes_,function(t){if(t===Vt)return t;var r=n.get(e.name);return r?t.remove(new Tt(e.name,r)):t}),this.indexSet_)},t}();function Ht(t,e){return x(t.name,e.name)}function Bt(t,e){return x(t,e)}var zt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Nt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return H||(H=new t(new Mt(Bt),null,qt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||H},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?H:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Tt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?H:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.d)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Pt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+jt(this.getPriority().val())+":"),this.forEachChild(Pt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Tt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Tt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Tt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Tt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Tt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Gt?-1:0},t.prototype.withIndex=function(e){if(e===xt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===xt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Pt),r=e.getIterator(Pt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===xt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Gt=new(function(t){function e(){return t.call(this,new Mt(Bt),zt.EMPTY_NODE,qt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return zt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(zt));function Wt(t,e){if(void 0===e&&(e=null),null===t)return zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new At(t,Wt(e));if(t instanceof Array){var n=zt.EMPTY_NODE;return k(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=Wt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(Wt(e))}var r=[],i=!1;if(k(t,function(t,e){if("."!==t.substring(0,1)){var n=Wt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Tt(t,n)))}}),0===r.length)return zt.EMPTY_NODE;var s=Ut(r,Ht,function(t){return t.name},Bt);if(i){var a=Ut(r,Pt.getCompare());return new zt(s,Wt(e),new qt({".priority":a},{".priority":Pt}))}return new zt(s,Wt(e),qt.Default)}Object.defineProperties(Tt,{MIN:{value:new Tt(I,zt.EMPTY_NODE)},MAX:{value:new Tt(S,Gt)}}),St.__EMPTY_NODE=zt.EMPTY_NODE,At.__childrenNodeConstructor=zt,L=Gt,V=Gt,U=Wt;var Qt,$t=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Tt.MIN},e.prototype.maxPost=function(){return Tt.MAX},e.prototype.makePost=function(t,e){var n=Wt(t);return new Tt(e,n)},e.prototype.toString=function(){return".value"},e}(It)),Kt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Wt(t),r=zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Tt(e,r)},e.prototype.maxPost=function(){var t=zt.EMPTY_NODE.updateChild(this.indexPath_,Gt);return new Tt(S,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(It),Yt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.G)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.G)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.G)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.G)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.G)("DataSnapshot.child",0,1,arguments.length),e=String(e),pt("DataSnapshot.child",1,e,!1);var n=new $(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Pt)},t.prototype.hasChild=function(t){Object(o.G)("DataSnapshot.hasChild",1,1,arguments.length),pt("DataSnapshot.hasChild",1,t,!1);var e=new $(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.G)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.G)("DataSnapshot.forEach",1,1,arguments.length),Object(o.H)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Pt))})},t.prototype.hasChildren=function(){return Object(o.G)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.G)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.G)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Jt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.F)(this.snapshot.exportVal())},t}(),Xt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Zt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Jt("value",this,new Yt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Xt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),te=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Xt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Jt(t.type,this,new Yt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),ee=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(Qt,"Reference.ts has not been loaded"),Qt},set:function(t){Qt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===xt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==S)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Pt){if(null!=e&&!at(e)||null!=n&&!at(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof Kt||t.getIndex()===$t,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.G)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.G)("Query.on",2,4,arguments.length),ft("Query.on",1,e,!1),Object(o.H)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Zt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new te(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.G)("Query.off",0,3,arguments.length),ft("Query.off",1,t,!0),Object(o.H)("Query.off",2,e,!0),Object(o.I)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Zt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new te(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.G)("Query.once",1,4,arguments.length),ft("Query.once",1,e,!1),Object(o.H)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.G)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.G)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.G)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');pt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new $(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Kt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.G)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(xt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.G)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Pt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.G)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy($t);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAt",0,2,arguments.length),ut("Query.startAt",1,e,this.path,!0),dt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAfter",0,2,arguments.length),ut("Query.startAfter",1,e,this.path,!1),dt("Query.startAfter",2,n,!0);var r=this.queryParams_.startAfter(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endAt",0,2,arguments.length),ut("Query.endAt",1,e,this.path,!0),dt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endBefore",0,2,arguments.length),ut("Query.endBefore",1,e,this.path,!1),dt("Query.endBefore",2,n,!0);var r=this.queryParams_.endBefore(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.G)("Query.equalTo",1,2,arguments.length),ut("Query.equalTo",1,t,this.path,!1),dt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.G)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.G)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=A(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.G)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.H)(t,3,r.cancel,!0),r.context=n,Object(o.I)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ne=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),re=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ie=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?oe(t[".sv"],e,n):"object"==typeof t[".sv"]?se(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},oe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},se=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},ae=function(t,e,n,r){return ce(e,new re(n,t),r)},ue=function(t,e,n){return ce(t,new ne(e),n)};function ce(t,e,n){var r,i=t.getPriority().val(),o=ie(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ie(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new At(a,Wt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new At(o))),u.forEachChild(Pt,function(t,i){var o=ce(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var le,he=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Pt,function(t,e){n.remember(new $(t),e)}),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new $(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),fe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),de=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.d)(!r||e,"Tagged queries must be from server.")}return t.user=function(){return new t(!0,!1,null,!1)},t.server=function(){return new t(!1,!0,null,!1)},t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),pe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=fe.ACK_USER_WRITE,this.source=de.user()}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new $(e));return new t($.Empty,n,this.revert)}return Object(o.d)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),ge=function(){function t(t,e){void 0===e&&(le||(le=new Mt(j)),e=le),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return k(e,function(t,e){n=n.set(new $(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:$.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new $(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):new t(null)},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||new t(null)).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?new t(null):new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||new t(null)).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_($.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,$.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,$.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_($.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),ye=function(){function t(t,e){this.source=t,this.path=e,this.type=fe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$.Empty):new t(this.source,this.path.popFront())},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=fe.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),me=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=fe.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new $(e));return n.isEmpty()?null:n.value?new ve(this.source,$.Empty,n.value):new t(this.source,$.Empty,n)}return Object(o.d)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),_e=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new be(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new be(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}();function we(t){return{type:"value",snapshotNode:t}}function Ee(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Oe(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ce(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Te,Ie=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(Oe(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ee(e,n)):s.trackChildChange(Ce(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Pt,function(t,r){e.hasChild(t)||n.trackChildChange(Oe(t,r))}),e.isLeafNode()||e.forEachChild(Pt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Ce(e,r,i))}else n.trackChildChange(Ee(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?zt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Se=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Ce(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Oe(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Ee(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Ce(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),xe=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),je=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new be(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Ne=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Ae=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.d)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.d)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Se;if(n.type===fe.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===fe.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===fe.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==fe.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Ne(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(we(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.d)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof zt?c:zt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(o.d)(1===e.getLength(),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var g=e.popFront(),y=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);y=null!=v?s.getNode().getImmediateChild(f).updateChild(g,v):s.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(s.getNode(),f,y,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,xe,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new je(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new je(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):zt.EMPTY_NODE}if(f.equals(d))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:new ge(null).setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new $(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new $(e),f,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=new ge(null);return a.getNode().forEachChild(xt,function(t,e){u=u.set(new $(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new ge(null);return n.foreach(function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,xe,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new je(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.d)(h instanceof zt,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,zt.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite($.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Pe=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){"child_changed"===t.type&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push({type:"child_moved",snapshotNode:t.snapshotNode,childName:t.childName})}),this.generateEventsForType_(i,"child_removed",t,n,e),this.generateEventsForType_(i,"child_added",t,n,e),this.generateEventsForType_(i,"child_moved",o,n,e),this.generateEventsForType_(i,"child_changed",t,n,e),this.generateEventsForType_(i,"value",t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.compareChanges_.bind(this)),s.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.e)("Should only compare child_ events.");var n=new Tt(t.childName,t.snapshotNode),r=new Tt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),ke=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Ie(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ae(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(zt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(zt.EMPTY_NODE,s.getNode(),null),c=new be(a,o.isFullyInitialized(),r.filtersNodes()),l=new be(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new _e(l,c),this.eventGenerator_=new Pe(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.d)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===fe.MERGE&&null!==t.source.queryId&&(Object(o.d)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.d)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.d)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Pt,function(t,e){n.push(Ee(t,e))}),e.isFullyInitialized()&&n.push(we(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Re=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(Te,"Reference.ts has not been loaded"),Te},set:function(t){Object(o.d)(!Te,"__referenceConstructor has already been defined"),Te=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.d)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof zt?(s=e.calcCompleteEventChildren(n),a=!1):(s=zt.EMPTY_NODE,a=!1);var u=new _e(new be(s,a,!1),new be(n,r,!1));return new ke(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(i.e)(f.value,2),g=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(g),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){o={error:y}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),De=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new ge(null))},t}();function Me(t,e,n){if(e.isEmpty())return new De(new ge(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=$.relativePath(i,e);return o=o.updateChild(s,n),new De(t.writeTree_.set(i,o))}var a=new ge(n),u=t.writeTree_.setTree(e,a);return new De(u)}function Le(t,e,n){var r=t;return k(n,function(t,n){r=Me(r,e.child(t),n)}),r}function Fe(t,e){if(e.isEmpty())return De.empty();var n=t.writeTree_.setTree(e,new ge(null));return new De(n)}function Ue(t,e){return null!=Ve(t,e)}function Ve(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild($.relativePath(n.path,e)):null}function qe(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Pt,function(t,n){e.push(new Tt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Tt(t,n.value))}),e}function He(t,e){if(e.isEmpty())return t;var n=Ve(t,e);return new De(null!=n?new ge(n):t.writeTree_.subtree(e))}function Be(t){return t.writeTree_.isEmpty()}function ze(t,e){return Ge($.Empty,t.writeTree_,e)}function Ge(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ge(t.child(e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var We=function(){function t(){this.visibleWrites_=De.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Qe(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.d)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=Me(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.d)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=Le(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=Fe(this.visibleWrites_,r.path):k(r.children,function(t){e.visibleWrites_=Fe(e.visibleWrites_,r.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return Ve(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=He(this.visibleWrites_,e);return!i&&Be(o)?n:i||null!=n||Ue(o,$.Empty)?ze(t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),n||zt.EMPTY_NODE):null}var s=Ve(this.visibleWrites_,e);if(null!=s)return s;var a=He(this.visibleWrites_,e);return Be(a)?n:null!=n||Ue(a,$.Empty)?ze(a,n||zt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=zt.EMPTY_NODE,r=Ve(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Pt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=He(this.visibleWrites_,t);return e.forEachChild(Pt,function(t,e){var r=ze(He(i,new $(t)),e);n=n.updateImmediateChild(t,r)}),qe(i).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return qe(He(this.visibleWrites_,t)).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.d)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(Ue(this.visibleWrites_,i))return null;var s=He(this.visibleWrites_,i);return Be(s)?r.getChild(e):ze(s,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=Ve(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?ze(He(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return Ve(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=He(this.visibleWrites_,t),u=Ve(a,$.Empty);if(null!=u)s=u;else{if(null==e)return[];s=ze(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,$.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=De.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?r=Me(r,u=$.relativePath(n,a),s.snap):a.contains(n)&&(u=$.relativePath(a,n),r=Me(r,$.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(n.contains(a))r=Le(r,u=$.relativePath(n,a),s.children);else if(a.contains(n))if((u=$.relativePath(a,n)).isEmpty())r=Le(r,$.Empty,s.children);else{var c=Object(o.C)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=Me(r,$.Empty,l)}}}}}return r},t}(),Qe=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),$e=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new ge(null),this.pendingWriteTree_=new We,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ve(de.user(),t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ge.fromObject(e);return this.applyOperationToSyncPoints_(new me(de.user(),t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new ge(null);return null!=n.snap?r=r.set($.Empty,!0):k(n.children,function(t){r=r.set(new $(t),!0)}),this.applyOperationToSyncPoints_(new pe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ve(de.server(),t,e))},t.prototype.applyServerMerge=function(t,e){var n=ge.fromObject(e);return this.applyOperationToSyncPoints_(new me(de.server(),t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ye(de.server(),t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=$.relativePath(s,e),c=new ve(de.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=$.relativePath(s,e),c=ge.fromObject(n),l=new me(de.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=$.relativePath(o,e),u=new ye(de.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=$.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache($.Empty)):(u=new Re,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=zt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache($.Empty);n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.d)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var g=d[p],y=g.getQuery(),v=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),v.hashFn,v.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=$.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,function(t,r){var i=$.relativePath(t,e);n=n||r.getCompleteServerCache(i)});var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache($.Empty):(r=new Re,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new be(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path);return r.getView(t,s,i?o.getNode():zt.EMPTY_NODE,i).getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),k(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.d)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),k(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||zt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.d)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites($.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get($.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache($.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get($.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache($.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Ke=function(){function t(){this.rootNode_=zt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Ye=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),Je=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Ye),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Xe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&k(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Ze=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Xe(t);var n=1e4+2e4*Math.random();Q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;k(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),Q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),tn=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new en(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),en=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();v&&_("event: "+e.toString()),W(n)}}},t.prototype.getPath=function(){return this.path_},t}(),nn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),rn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(nn),on=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.t)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(nn),sn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&W(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),an="start",un="close",cn=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Je.getCollection(e),this.urlFn=function(t){return e.connectionURL(X,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new sn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.v)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new ln(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===an)n.id=s,n.password=a;else{if(o!==un)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&Y.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.v)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.v)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.F)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),ln=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.v)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.v)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),hn="";function fn(t){hn=t}var dn=null;"undefined"!=typeof MozWebSocket?dn=MozWebSocket:"undefined"!=typeof WebSocket&&(dn=WebSocket);var pn=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Je.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.v)()&&"undefined"!=typeof location&&location.hostname&&Y.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(J,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.v)()){var r={headers:{"User-Agent":"Firebase/5/"+hn+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new dn(this.connURL,[],r)}else this.mySock=new dn(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==dn&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.z)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),gn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[cn,pn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=pn&&pn.isAvailable(),s=o&&!pn.previouslyFailed();if(e.webSocketOnly&&(o||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[pn];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),yn=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new gn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Q(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Q(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Q(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),vn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),mn=1e3,bn=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=mn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.v)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),rn.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&on.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.F)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.C)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.n)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.y)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.F)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.F)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=mn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=mn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=mn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new yn(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){C(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&C(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.r)(this.interruptReasons_)&&(this.reconnectDelay_=mn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return A(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new $(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.v)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+hn.replace(/\./g,"-")]=1,Object(o.t)()?t["framework.cordova"]=1:Object(o.w)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=on.getInstance().currentlyOnline();return Object(o.r)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(vn),_n=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.C)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.B)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.z)(u.responseText)}catch(e){C("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(vn),wn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),En=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new wn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof $?e:new $(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.C)(r.node_.children,i)||new wn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.d)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;k(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new $(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.h)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),On="repo_interrupt",Cn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({}),Tn=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new he,this.transactionQueueTree_=new En,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Je.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new _n(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.F)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new bn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=Je.getOrCreateReporter(this.repoInfo_,function(){return new Ze(t.stats_,t.server_)}),this.infoData_=new Ke,this.infoSyncTree_=new $e({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new $e({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new $(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new $(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.A)(e,function(t){return Wt(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Wt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.A)(e,function(t){return Wt(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Wt(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;k(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new $("/.info/"+t),r=Wt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new Yt(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then(function(n){var r=Wt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Yt(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){return e.log_("get for query "+Object(o.F)(t)+" failed: "+n),Promise.reject(new Error(n))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Wt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=ue(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||C("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(k(e,function(e,n){i=!1,s[e]=ae(t.child(e),Wt(n),r.serverSyncTree_,o)}),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||C("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)}),k(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new he;this.onDisconnect_.forEachTree($.Empty,function(r,i){var o=ae(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree($.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new he,this.eventQueue_.raiseEventsForChangedPath($.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Wt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Wt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.r)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&k(e,function(e,n){var i=Wt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(On)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(On)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Xe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);k(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&W(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Rn(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new jn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Yt(a.currentInputSnapshot,new jn(this,a.path),Pt);a.onComplete(null,!1,l)}}else{ct("transaction failed: Data returned ",c,a.path),a.status=Cn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(o.h)(c,".priority")?(d=Object(o.C)(c,".priority"),Object(o.d)(at(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||zt.EMPTY_NODE).getPriority().val();var g=this.generateServerValues(),y=Wt(c,d),v=ue(y,u,g);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||zt.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===Cn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.d)(c.status===Cn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=Cn.SENT,c.retryCount++;var l=$.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=Cn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new jn(n,e[s].path),c=new Yt(a,u,Pt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)W(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===Cn.SENT_NEEDS_ABORT?Cn.NEEDS_ABORT:Cn.RUN;else for(C("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=Cn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===Cn.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=$.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.d)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Cn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Cn.RUN)if(a.retryCount>=25)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){ct("transaction failed: Data returned ",f,a.path);var d=Wt(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,g=this.generateServerValues(),y=ue(d,h,g);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=Cn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var v=new jn(this,t[s].path),m=new Yt(t[s].currentInputSnapshot,v,Pt);n.push(t[s].onComplete.bind(null,null,!1,m))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)W(n[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Cn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===Cn.SENT_NEEDS_ABORT||(e[s].status===Cn.SENT?(Object(o.d)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=Cn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.d)(e[s].status===Cn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)W(n[s])}},t}(),In=function(){function t(e){this.indexedFilter_=new Ie(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Tt(e,n))||(n=zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=zt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(zt.EMPTY_NODE);var i=this;return e.forEachChild(Pt,function(t,e){i.matches(new Tt(t,e))||(r=r.updateImmediateChild(t,zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Sn=function(){function t(t){this.rangedFilter_=new In(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Tt(e,n))||(n=zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=zt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(zt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,zt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new Tt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Ce(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Oe(e,f));var g=u.updateImmediateChild(e,zt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(Ee(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(Oe(l.name,l.node)),i.trackChildChange(Ee(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,zt.EMPTY_NODE)):t},t}(),xn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:S},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.startAfter=function(t,e){var n,r;this.index_===xt?("string"==typeof t&&(t=Ot(t)),n=this.startAt(t,e)):(r=null==e?S:Ot(e),n=this.startAt(t,r));return n.startAfterSet_=!0,n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.endBefore=function(t,e){var n,r;return this.index_===xt?("string"==typeof t&&(t=Ct(t)),r=this.endAt(t,e)):(n=null==e?I:Ct(e),r=this.endAt(t,n)),r.endBeforeSet_=!0,r},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Pt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Pt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Ie(this.getIndex()):this.hasLimit()?new Sn(this):new In(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Pt?e=n.PRIORITY_INDEX:this.index_===$t?e=n.VALUE_INDEX:this.index_===xt?e=n.KEY_INDEX:(Object(o.d)(this.index_ instanceof Kt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.F)(e),this.startSet_&&(r[n.START_AT]=Object(o.F)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.F)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.F)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.F)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t}(),jn=function(t){function e(e,n){if(!(e instanceof Tn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new xn,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.G)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.G)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof $||(null===this.path.getFront()?gt("Reference.child",1,t,!1):pt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.G)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.G)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.G)("Reference.set",1,2,arguments.length),yt("Reference.set",this.path),ut("Reference.set",1,t,this.path,!1),Object(o.H)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.G)("Reference.update",1,2,arguments.length),yt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("Reference.update",1,t,this.path,!1),Object(o.H)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.G)("Reference.setWithPriority",2,3,arguments.length),yt("Reference.setWithPriority",this.path),ut("Reference.setWithPriority",1,t,this.path,!1),ht("Reference.setWithPriority",2,e,!1),Object(o.H)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.G)("Reference.remove",0,1,arguments.length),yt("Reference.remove",this.path),Object(o.H)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.G)("Reference.transaction",1,3,arguments.length),yt("Reference.transaction",this.path),Object(o.H)("Reference.transaction",1,t,!1),Object(o.H)("Reference.transaction",2,e,!0),mt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new _t(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.G)("Reference.setPriority",1,2,arguments.length),yt("Reference.setPriority",this.path),ht("Reference.setPriority",1,t,!1),Object(o.H)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.G)("Reference.push",0,2,arguments.length),yt("Reference.push",this.path),ut("Reference.push",1,t,this.path,!0),Object(o.H)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Et(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return yt("Reference.onDisconnect",this.path),new bt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(ee);ee.__referenceConstructor=jn,Re.__referenceConstructor=jn;var Nn,An=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';C(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Pn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),kn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Nn||(Nn=new t),Nn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Z(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Pn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||O("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=tt(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=tt(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new Pn:new An(t,e);return vt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||O("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.C)(this.repos_,t.app.name);e&&Object(o.C)(e,t.key)===t||O("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.C)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.C)(r,t.toURLString());return i&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Tn(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Rn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),kn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof Tn||O("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new jn(this.repo_,$.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?O("Cannot call useEmulator() after instance has already been initialized."):kn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.G)("database.ref",0,1,arguments.length),t instanceof jn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.G)(e,1,1,arguments.length);var n=tt(t,this.repo_.repoInfo_.nodeAdmin);vt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||O(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&O("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.G)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.G)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Dn=Object.freeze({__proto__:null,forceLongPolling:function(){pn.forceDisallow(),cn.forceAllow()},forceWebSockets:function(){cn.forceDisallow()},isWebSocketsAvailable:function(){return pn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;fn(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:kn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),Mn=bn;bn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},bn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Ln=Object.freeze({__proto__:null,DataConnection:Mn,RealTimeConnection:yn,hijackHash:function(t){var e=bn.prototype.put;return bn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){bn.prototype.put=e}},ConnectionTarget:Z,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){kn.getInstance().forceRestClient(t)}}),Fn=Rn.ServerValue;!function(e){fn(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return kn.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:jn,Query:ee,Database:Rn,DataSnapshot:Yt,enableLogging:b,INTERNAL:Dn,ServerValue:Fn,TEST_ACCESS:Ln}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.3"),Object(o.v)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.2.7","app")},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("z6cu");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return $e}),n.d(e,"b",function(){return va}),n.d(e,"c",function(){return fa}),n.d(e,"d",function(){return la}),n.d(e,"e",function(){return ha}),n.d(e,"f",function(){return lu}),n.d(e,"g",function(){return tu}),n.d(e,"h",function(){return vs}),n.d(e,"i",function(){return xa}),n.d(e,"j",function(){return qo}),n.d(e,"k",function(){return _a}),n.d(e,"l",function(){return Go}),n.d(e,"m",function(){return ir}),n.d(e,"n",function(){return Qs}),n.d(e,"o",function(){return ki}),n.d(e,"p",function(){return hn}),n.d(e,"q",function(){return O}),n.d(e,"r",function(){return Qe}),n.d(e,"s",function(){return $i}),n.d(e,"t",function(){return ls}),n.d(e,"u",function(){return fs}),n.d(e,"v",function(){return ba}),n.d(e,"w",function(){return xs}),n.d(e,"x",function(){return nu}),n.d(e,"y",function(){return Ss}),n.d(e,"z",function(){return Ka}),n.d(e,"A",function(){return Aa}),n.d(e,"B",function(){return fn}),n.d(e,"C",function(){return ya}),n.d(e,"D",function(){return ga}),n.d(e,"E",function(){return $o}),n.d(e,"F",function(){return Qo}),n.d(e,"G",function(){return ur}),n.d(e,"H",function(){return Yo}),n.d(e,"I",function(){return Zn}),n.d(e,"J",function(){return dn}),n.d(e,"K",function(){return ou}),n.d(e,"L",function(){return Os}),n.d(e,"M",function(){return Fa}),n.d(e,"N",function(){return Ke}),n.d(e,"O",function(){return Xo}),n.d(e,"P",function(){return Jo}),n.d(e,"Q",function(){return Ns}),n.d(e,"R",function(){return j}),n.d(e,"S",function(){return Ya}),n.d(e,"T",function(){return Qa}),n.d(e,"U",function(){return Wa}),n.d(e,"V",function(){return uu}),n.d(e,"W",function(){return qa}),n.d(e,"X",function(){return ma}),n.d(e,"Y",function(){return Di}),n.d(e,"Z",function(){return Do}),n.d(e,"ab",function(){return Jn}),n.d(e,"bb",function(){return Rn}),n.d(e,"cb",function(){return On}),n.d(e,"db",function(){return Tn}),n.d(e,"eb",function(){return jn}),n.d(e,"fb",function(){return Sn}),n.d(e,"gb",function(){return In}),n.d(e,"hb",function(){return xn}),n.d(e,"ib",function(){return Ao}),n.d(e,"jb",function(){return au}),n.d(e,"kb",function(){return Po}),n.d(e,"lb",function(){return ko}),n.d(e,"mb",function(){return Cn}),n.d(e,"nb",function(){return R}),n.d(e,"ob",function(){return Zi}),n.d(e,"pb",function(){return yo}),n.d(e,"qb",function(){return po}),n.d(e,"rb",function(){return go}),n.d(e,"sb",function(){return No}),n.d(e,"tb",function(){return Et}),n.d(e,"ub",function(){return c}),n.d(e,"vb",function(){return En}),n.d(e,"wb",function(){return yt}),n.d(e,"xb",function(){return zr}),n.d(e,"yb",function(){return ro}),n.d(e,"zb",function(){return sa}),n.d(e,"Ab",function(){return G}),n.d(e,"Bb",function(){return X}),n.d(e,"Cb",function(){return p}),n.d(e,"Db",function(){return g}),n.d(e,"Eb",function(){return K}),n.d(e,"Fb",function(){return Z}),n.d(e,"Gb",function(){return so}),n.d(e,"Hb",function(){return ho}),n.d(e,"Ib",function(){return lo}),n.d(e,"Jb",function(){return co}),n.d(e,"Kb",function(){return fo}),n.d(e,"Lb",function(){return Io}),n.d(e,"Mb",function(){return un}),n.d(e,"Nb",function(){return ze}),n.d(e,"Ob",function(){return ca}),n.d(e,"Pb",function(){return vo}),n.d(e,"Qb",function(){return aa}),n.d(e,"Rb",function(){return _o}),n.d(e,"Sb",function(){return Gs}),n.d(e,"Tb",function(){return Ws}),n.d(e,"Ub",function(){return ao}),n.d(e,"Vb",function(){return wo}),n.d(e,"Wb",function(){return oa}),n.d(e,"Xb",function(){return Ut}),n.d(e,"Yb",function(){return tr}),n.d(e,"Zb",function(){return Y}),n.d(e,"ac",function(){return oo}),n.d(e,"bc",function(){return Eo}),n.d(e,"cc",function(){return Oo}),n.d(e,"dc",function(){return Co}),n.d(e,"ec",function(){return To});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(c).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function l(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const h=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return c(this())},t}function d(t){return"function"==typeof(e=t)&&e.hasOwnProperty(h)&&e.__forward_ref__===f?t():t;var e}function p(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function g(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function y(t){return v(t,b)||v(t,w)}function v(t,e){return t.hasOwnProperty(e)?t[e]:null}function m(t){return t&&(t.hasOwnProperty(_)||t.hasOwnProperty(E))?t[_]:null}const b=u({"\u0275prov":u}),_=u({"\u0275inj":u}),w=u({ngInjectableDef:u}),E=u({ngInjectorDef:u});var O=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let C;function T(t){const e=C;return C=t,e}function I(t,e,n){const r=y(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&O.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${c(t)}]`)}function S(t){return{toString:t}.toString()}var x=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),j=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const N="undefined"!=typeof globalThis&&globalThis,A="undefined"!=typeof window&&window,P="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,k="undefined"!=typeof global&&global,R=N||k||A||P,D={},M=[],L=u({"\u0275cmp":u}),F=u({"\u0275dir":u}),U=u({"\u0275pipe":u}),V=u({"\u0275mod":u}),q=u({"\u0275loc":u}),H=u({"\u0275fac":u}),B=u({__NG_ELEMENT_ID__:u});let z=0;function G(t){return S(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===x.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||M,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||j.Emulated,id:"c",styles:t.styles||M,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=z++,n.inputs=J(t.inputs,e),n.outputs=J(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(W):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Q):null,n})}function W(t){return tt(t)||function(t){return t[F]||null}(t)}function Q(t){return function(t){return t[U]||null}(t)}const $={};function K(t){const e={type:t.type,bootstrap:t.bootstrap||M,declarations:t.declarations||M,imports:t.imports||M,exports:t.exports||M,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&S(()=>{$[t.id]=t.type}),e}function Y(t,e){return S(()=>{const n=et(t,!0);n.declarations=e.declarations||M,n.imports=e.imports||M,n.exports=e.exports||M})}function J(t,e){if(null==t)return D;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const X=G;function Z(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function tt(t){return t[L]||null}function et(t,e){const n=t[V]||null;if(!n&&!0===e)throw new Error(`Type ${c(t)} does not have '\u0275mod' property.`);return n}const nt=20,rt=10;function it(t){return Array.isArray(t)&&"object"==typeof t[1]}function ot(t){return Array.isArray(t)&&!0===t[1]}function st(t){return 0!=(8&t.flags)}function at(t){return 2==(2&t.flags)}function ut(t){return 1==(1&t.flags)}function ct(t){return null!==t.template}function lt(t,e){return t.hasOwnProperty(H)?t[H]:null}class ht extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function ft(t){return"string"==typeof t?t:null==t?"":String(t)}function dt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ft(t)}function pt(t,e){const n=e?` in ${e}`:"";throw new ht("201",`No provider for ${dt(t)} found${n}`)}class gt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function yt(){return vt}function vt(t){return t.type.prototype.ngOnChanges&&(t.setInput=bt),mt}function mt(){const t=_t(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===D)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function bt(t,e,n,r){const i=_t(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:D,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new gt(u&&u.currentValue,e,s===D),t[r]=e}function _t(t){return t.__ngSimpleChanges__||null}let wt;function Et(t){wt=t}function Ot(t){return!!t.listen}yt.ngInherit=!0;const Ct={createRenderer:(t,e)=>void 0!==wt?wt:"undefined"!=typeof document?document:void 0};function Tt(t){for(;Array.isArray(t);)t=t[0];return t}function It(t,e){return Tt(e[t.index])}function St(t,e){return t.data[e]}function xt(t,e){const n=e[t];return it(n)?n:n[0]}function jt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Nt(t){return 4==(4&t[2])}function At(t){return 128==(128&t[2])}function Pt(t,e){return null==e?null:t[e]}function kt(t){t[18]=0}function Rt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Dt={lFrame:ne(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Mt(){return Dt.bindingsEnabled}function Lt(){return Dt.lFrame.lView}function Ft(){return Dt.lFrame.tView}function Ut(t){Dt.lFrame.contextLView=t}function Vt(){let t=qt();for(;null!==t&&64===t.type;)t=t.parent;return t}function qt(){return Dt.lFrame.currentTNode}function Ht(t,e){const n=Dt.lFrame;n.currentTNode=t,n.isParent=e}function Bt(){return Dt.lFrame.isParent}function zt(){return Dt.isInCheckNoChangesMode}function Gt(t){Dt.isInCheckNoChangesMode=t}function Wt(){return Dt.lFrame.bindingIndex}function Qt(){return Dt.lFrame.bindingIndex++}function $t(t,e){const n=Dt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Kt(e)}function Kt(t){Dt.lFrame.currentDirectiveIndex=t}function Yt(){return Dt.lFrame.currentQueryIndex}function Jt(t){Dt.lFrame.currentQueryIndex=t}function Xt(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Zt(t,e,n){if(n&O.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&O.Host||(r=Xt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Dt.lFrame=ee();return r.currentTNode=e,r.lView=t,!0}function te(t){const e=ee(),n=t[1];Dt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ee(){const t=Dt.lFrame,e=null===t?null:t.child;return null===e?ne(t):e}function ne(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function re(){const t=Dt.lFrame;return Dt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ie=re;function oe(){const t=re();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function se(){return Dt.lFrame.selectedIndex}function ae(t){Dt.lFrame.selectedIndex=t}function ue(){const t=Dt.lFrame;return St(t.tView,t.selectedIndex)}function ce(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function le(t,e,n){de(t,e,3,n)}function he(t,e,n,r){(3&t[2])===n&&de(t,e,n,r)}function fe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function de(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(pe(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function pe(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const ge=-1;class ye{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function ve(t,e,n){const r=Ot(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];be(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function me(t){return 3===t||4===t||6===t}function be(t){return 64===t.charCodeAt(0)}function _e(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||we(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function we(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ee(t){return t!==ge}function Oe(t){return 32767&t}function Ce(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Te=!0;function Ie(t){const e=Te;return Te=t,e}let Se=0;function xe(t,e){const n=Ne(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,je(r.data,t),je(e,null),je(r.blueprint,null));const i=Ae(t,e),o=t.injectorIndex;if(Ee(i)){const t=Oe(i),n=Ce(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function je(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ne(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ae(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ge;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ge}function Pe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(B)&&(r=n[B]),null==r&&(r=n[B]=Se++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function ke(t,e,n){if(n&O.Optional)return t;pt(e,"NodeInjector")}function Re(t,e,n,r){if(n&O.Optional&&void 0===r&&(r=null),0==(n&(O.Self|O.Host))){const i=t[9],o=T(void 0);try{return i?i.get(e,r,n&O.Optional):I(e,r,n&O.Optional)}finally{T(o)}}return ke(r,e,n)}function De(t,e,n,r=O.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(B)?t[B]:void 0;return"number"==typeof e?e>=0?255&e:Le:e}(n);if("function"==typeof o){if(!Zt(e,t,r))return r&O.Host?ke(i,n,r):Re(e,n,r,i);try{const t=o();if(null!=t||r&O.Optional)return t;pt(n)}finally{ie()}}else if("number"==typeof o){let i=null,s=Ne(t,e),a=ge,u=r&O.Host?e[16][6]:null;for((-1===s||r&O.SkipSelf)&&(a=-1===s?Ae(t,e):e[s+8],a!==ge&&He(r,!1)?(i=e[1],s=Oe(a),e=Ce(a,e)):s=-1);-1!==s;){const t=e[1];if(qe(o,s,t.data)){const t=Fe(s,e,n,i,r,u);if(t!==Me)return t}a=e[s+8],a!==ge&&He(r,e[1].data[s+8]===u)&&qe(o,s,e)?(i=t,s=Oe(a),e=Ce(a,e)):s=-1}}}return Re(e,n,r,i)}const Me={};function Le(){return new Be(Vt(),Lt())}function Fe(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ue(a,s,n,null==r?at(a)&&Te:r!=s&&0!=(3&a.type),i&O.Host&&o===a);return null!==u?Ve(e,s,u,a):Me}function Ue(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&ct(t)&&t.type===n)return u}return null}function Ve(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof ye){const s=i;s.resolving&&function(t,e){throw new ht("200",`Circular dependency in DI detected for ${t}`)}(dt(o[n]));const a=Ie(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?T(s.injectImpl):null;Zt(t,r,O.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=vt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&T(u),Ie(a),s.resolving=!1,ie()}}return i}function qe(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function He(t,e){return!(t&O.Self||t&O.Host&&e)}class Be{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return De(this._tNode,this._lView,t,void 0,e)}}function ze(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(me(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Vt(),t)}const Ge="__parameters__";function We(t,e,n){return S(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Ge)?t[Ge]:Object.defineProperty(t,Ge,{value:[]})[Ge];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Qe{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=p({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const $e=new Qe("AnalyzeForEntryComponents"),Ke=Function;function Ye(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Ye(r,e)):e!==t&&e.push(r)}return e}function Je(t,e){t.forEach(t=>Array.isArray(t)?Je(t,e):e(t))}function Xe(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ze(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const tn={},en=/\n/gm,nn="__source",rn=u({provide:String,useValue:u});let on;function sn(t){const e=on;return on=t,e}function an(t,e=O.Default){if(void 0===on)throw new Error("inject() must be called from an injection context");return null===on?I(t,void 0,e):on.get(t,e&O.Optional?null:void 0,e)}function un(t,e=O.Default){return(C||an)(d(t),e)}function cn(t){const e=[];for(let n=0;n<t.length;n++){const r=d(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=O.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(un(t,n))}else e.push(un(r))}return e}function ln(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const hn=ln(We("Inject",t=>({token:t})),-1),fn=ln(We("Optional"),8),dn=ln(We("SkipSelf"),4);let pn;function gn(t){var e;return(null===(e=function(){if(void 0===pn&&(pn=null,R.trustedTypes))try{pn=R.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return pn}())||void 0===e?void 0:e.createHTML(t))||t}class yn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class vn extends yn{getTypeName(){return"HTML"}}class mn extends yn{getTypeName(){return"Style"}}class bn extends yn{getTypeName(){return"Script"}}class _n extends yn{getTypeName(){return"URL"}}class wn extends yn{getTypeName(){return"ResourceURL"}}function En(t){return t instanceof yn?t.changingThisBreaksApplicationSecurity:t}function On(t,e){const n=Cn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Cn(t){return t instanceof yn&&t.getTypeName()||null}function Tn(t){return new vn(t)}function In(t){return new mn(t)}function Sn(t){return new bn(t)}function xn(t){return new _n(t)}function jn(t){return new wn(t)}class Nn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(gn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class An{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=gn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=gn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Pn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Rn(t){return(t=String(t)).match(Pn)||t.match(kn)?t:"unsafe:"+t}function Dn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Mn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Ln=Dn("area,br,col,hr,img,wbr"),Fn=Dn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Un=Dn("rp,rt"),Vn=Mn(Un,Fn),qn=Mn(Ln,Mn(Fn,Dn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Mn(Un,Dn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vn),Hn=Dn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Bn=Dn("srcset"),zn=Mn(Hn,Bn,Dn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Dn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Gn=Dn("script,style,template");class Wn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!qn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Gn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!zn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Hn[o]&&(s=Rn(s)),Bn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Rn(t.trim())).join(", ")),this.buf.push(" ",e,'="',Kn(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();qn.hasOwnProperty(e)&&!Ln.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Kn(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Qn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$n=/([^\#-~ |!])/g;function Kn(t){return t.replace(/&/g,"&amp;").replace(Qn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace($n,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Yn;function Jn(t,e){let n=null;try{Yn=Yn||function(t){const e=new An(t);return function(){try{return!!(new window.DOMParser).parseFromString(gn(""),"text/html")}catch(t){return!1}}()?new Nn(e):e}(t);let r=e?String(e):"";n=Yn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Yn.getInertBodyElement(r)}while(r!==o);return gn((new Wn).sanitizeChildren(Xn(n)||n))}finally{if(n){const t=Xn(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Xn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Zn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function tr(t){const e=function(){const t=Lt();return t&&t[12]}();return e?e.sanitize(Zn.URL,t)||"":On(t,"URL")?En(t):Rn(ft(t))}function er(t){return t.ngDebugContext}function nr(t){return t.ngOriginalError}function rr(t,...e){t.error(...e)}class ir{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||rr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?er(t)?er(t):this._findContext(nr(t)):null}_findOriginalError(t){let e=nr(t);for(;e&&nr(e);)e=nr(e);return e}}function or(t,e){t.__ngContext__=e}const sr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(R))();function ar(t){return t instanceof Function?t():t}var ur=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function cr(t,e){return(void 0)(t,e)}function lr(t){const e=t[3];return ot(e)?e[3]:e}function hr(t){return dr(t[13])}function fr(t){return dr(t[4])}function dr(t){for(;null!==t&&!ot(t);)t=t[4];return t}function pr(t,e,n,r,i){if(null!=r){let o,s=!1;ot(r)?o=r:it(r)&&(s=!0,r=r[0]);const a=Tt(r);0===t&&null!==n?null==i?wr(e,n,a):_r(e,n,a,i||null,!0):1===t&&null!==n?_r(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Or(t,e);r&&function(t,e,n,r){Ot(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Tt(n)&&pr(e,t,r,o,i);for(let s=rt;s<n.length;s++){const i=n[s];xr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function gr(t,e,n){return Ot(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function yr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Rt(i,-1)),n.splice(r,1)}function vr(t,e){if(t.length<=rt)return;const n=rt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&yr(o,r),e>0&&(t[n-1][4]=r[4]);const s=Ze(t,rt+e);xr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function mr(t,e){if(!(256&e[2])){const n=e[11];Ot(n)&&n.destroyNode&&xr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return br(t[1],t);for(;e;){let n=null;if(it(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)it(e)&&br(e[1],e),e=e[3];null===e&&(e=t),it(e)&&br(e[1],e),n=e&&e[4]}e=n}}(e)}}function br(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ye)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Tt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Ot(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ot(e[3])){n!==e[3]&&yr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function _r(t,e,n,r,i){Ot(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function wr(t,e,n){Ot(t)?t.appendChild(e,n):e.appendChild(n)}function Er(t,e,n,r,i){null!==r?_r(t,e,n,r,i):wr(t,e,n)}function Or(t,e){return Ot(t)?t.parentNode(e):e.parentNode}function Cr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===j.None||e===j.Emulated)return null}return It(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?It(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Er(o,i,n[a],s,!1);else Er(o,i,n,s,!1)}function Tr(t,e){if(null!==e){const n=e.type;if(3&n)return It(e,t);if(4&n)return Ir(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Tr(t,n);{const n=t[e.index];return ot(n)?Ir(-1,n):Tt(n)}}if(32&n)return cr(e,t)()||Tt(t[e.index]);{const n=t[16],r=n[6],i=lr(n),o=r.projection[e.projection];return null!=o?Tr(i,o):Tr(t,e.next)}}return null}function Ir(t,e){const n=rt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Tr(t,r)}return e[7]}function Sr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&or(Tt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Sr(t,e,n.child,r,i,o,!1),pr(e,t,i,a,o);else if(32&u){const s=cr(n,r);let u;for(;u=s();)pr(e,t,i,u,o);pr(e,t,i,a,o)}else 16&u?jr(t,e,r,n,i,o):pr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function xr(t,e,n,r,i,o){Sr(n,r,t.firstChild,e,i,o,!1)}function jr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)pr(e,t,i,a[u],o);else Sr(t,e,a,s[3],i,o,!0)}function Nr(t,e,n){Ot(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ar(t,e,n){Ot(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Pr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const kr="ng-template";function Rr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Pr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Dr(t){return 4===t.type&&t.value!==kr}function Mr(t,e,n){return e===(4!==t.type||n?t.value:kr)}function Lr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(me(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Mr(t,u,n)||""===u&&1===e.length){if(Fr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Rr(t.attrs,c,n)){if(Fr(r))return!1;s=!0}continue}const l=Ur(8&r?"class":u,i,Dr(t),n);if(-1===l){if(Fr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Pr(e,c,0)||2&r&&c!==t){if(Fr(r))return!1;s=!0}}}}else{if(!s&&!Fr(r)&&!Fr(u))return!1;if(s&&Fr(u))continue;s=!1,r=u|1&r}}return Fr(r)||s}function Fr(t){return 0==(1&t)}function Ur(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Vr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Lr(t,e[r],n))return!0;return!1}function qr(t,e){return t?":not("+e.trim()+")":e}function Hr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Fr(s)||(e+=qr(o,i),i=""),r=s,o=o||!Fr(r);n++}return""!==i&&(e+=qr(o,i)),e}const Br={};function zr(t){Gr(Ft(),Lt(),se()+t,zt())}function Gr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&le(e,r,n)}else{const r=t.preOrderHooks;null!==r&&he(e,r,0,n)}ae(n)}function Wr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Jt(i),n.contentQueries(2,e[o],o)}}}function Qr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,kt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function $r(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=qt(),s=Bt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Dt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Dt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Ht(o,!0),o}function Kr(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Yr(t,e,n){te(e);try{const r=t.viewQuery;null!==r&&Ti(1,r,n);const i=t.template;null!==i&&Zr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Wr(t,e),t.staticViewQueries&&Ti(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)_i(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,oe()}}function Jr(t,e,n,r){const i=e[2];if(256==(256&i))return;te(e);const o=zt();try{kt(e),Dt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Zr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&le(e,n,null)}else{const n=t.preOrderHooks;null!==n&&he(e,n,0,null),fe(e,0)}if(function(t){for(let e=hr(t);null!==e;e=fr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Rt(r,1),n[2]|=1024}}}(e),function(t){for(let e=hr(t);null!==e;e=fr(e))for(let t=rt;t<e.length;t++){const n=e[t],r=n[1];At(n)&&Jr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Wr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&le(e,n)}else{const n=t.contentHooks;null!==n&&he(e,n,1),fe(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ae(~r);else{const i=r,o=n[++t],s=n[++t];$t(o,i),s(2,e[i])}}}finally{ae(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)mi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ti(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&le(e,n)}else{const n=t.viewHooks;null!==n&&he(e,n,2),fe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Rt(e[3],-1))}finally{oe()}}function Xr(t,e,n,r){const i=e[10],o=!zt(),s=Nt(e);try{o&&!s&&i.begin&&i.begin(),s&&Yr(t,e,r),Jr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Zr(t,e,n,r,i){const o=se();try{ae(-1),2&r&&e.length>nt&&Gr(t,e,nt,zt()),n(r,i)}finally{ae(o)}}function ti(t,e,n){Mt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||xe(n,e),or(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ct(r);o&&pi(e,n,r);const u=Ve(e,t,a,n);or(u,e),null!==s&&gi(0,a-i,u,r,0,s),o&&(xt(n.index,e)[8]=u)}}(t,e,n,It(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Dt.lFrame.currentDirectiveIndex;try{ae(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Kt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||ci(r,i)}}finally{ae(-1),Kt(s)}}(t,e,n))}function ei(t,e,n=It){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function ni(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ri(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ri(t,e,n,r,i,o,s,a,u,c){const l=nt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Br);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function ii(t,e,n,r){const i=Si(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&xi(t).push(r,i.length-1))}function oi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function si(t,e,n,r,i,o,s,a){const u=It(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(Ni(t,n,c,r,i),at(e)&&function(t,e){const n=xt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,Ot(o)?o.setProperty(u,r,i):be(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function ai(t,e,n,r){let i=!1;if(Mt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Vr(n,s.selectors,!1)&&(i||(i=[]),Pe(xe(n,e),t,s.type),ct(s)?(li(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,fi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Kr(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=_e(n.mergedAttrs,c.hostAttrs),di(t,n,e,u,c),hi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Dr(e)?null:yi(n,i);o.push(c),s=oi(n,u,s),a=oi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new ht("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=_e(n.mergedAttrs,n.attrs),i}function ui(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function ci(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function li(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function hi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ct(e)&&(n[""]=t)}}function fi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function di(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=lt(i.type)),s=new ye(o,ct(i),null);t.blueprint[r]=s,n[r]=s,ui(t,e,0,r,Kr(t,n,i.hostVars,Br),i)}function pi(t,e,n){const r=It(e,t),i=ni(n),o=t[10],s=wi(t,Qr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function gi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function yi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function vi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function mi(t,e){const n=xt(e,t);if(At(n)){const t=n[1];80&n[2]?Jr(t,n,t.template,n[8]):n[5]>0&&bi(n)}}function bi(t){for(let n=hr(t);null!==n;n=fr(n))for(let t=rt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Jr(t,e,t.template,e[8])}else e[5]>0&&bi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=xt(e[n],t);At(r)&&r[5]>0&&bi(r)}}function _i(t,e){const n=xt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Yr(r,n,n[8])}function wi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ei(t){for(;t;){t[2]|=64;const e=lr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Oi(t,e,n){const r=e[10];r.begin&&r.begin();try{Jr(t,e,t.template,n)}catch(i){throw ji(e,i),i}finally{r.end&&r.end()}}function Ci(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=jt(n),i=r[1];Xr(i,r,i.template,n)}}(t[8])}function Ti(t,e,n){Jt(0),e(t,n)}const Ii=(()=>Promise.resolve(null))();function Si(t){return t[7]||(t[7]=[])}function xi(t){return t.cleanup||(t.cleanup=[])}function ji(t,e){const n=t[9],r=n?n.get(ir,null):null;r&&r.handleError(e)}function Ni(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ai(t,e,n){const r=function(t,e){return Tt(e[t])}(e,t);!function(t,e,n){Ot(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function Pi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=l(i,t):2==o&&(r=l(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const ki=new Qe("INJECTOR",-1);class Ri{get(t,e=tn){if(e===tn){const e=new Error(`NullInjectorError: No provider for ${c(t)}!`);throw e.name="NullInjectorError",e}return e}}const Di=new Qe("Set Injector scope."),Mi={},Li={},Fi=[];let Ui;function Vi(){return void 0===Ui&&(Ui=new Ri),Ui}function qi(t,e=null,n=null,r){return new Hi(t,n,e||Vi(),r)}class Hi{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Je(e,n=>this.processProvider(n,t,e)),Je([t],t=>this.processInjectorType(t,[],i)),this.records.set(ki,zi(void 0,this));const o=this.records.get(Di);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:c(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=tn,n=O.Default){this.assertNotDestroyed();const r=sn(this);try{if(!(n&O.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Qe)&&y(t);e=n&&this.injectableDefInScope(n)?zi(Bi(t),Mi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&O.Self?Vi():this.parent).get(t,e=n&O.Optional&&e===tn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(c(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[nn]&&i.unshift(e[nn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=c(e);if(Array.isArray(e))i=e.map(c).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):c(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(en,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{sn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(c(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=d(t)))return!1;let r=m(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=m(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Je(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Je(r,t=>this.processProvider(t,n,r||Fi))}}this.injectorDefTypes.add(o),this.records.set(o,zi(r.factory,Mi));const a=r.providers;if(null!=a&&!s){const e=t;Je(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Wi(t=d(t))?t:d(t&&t.provide);const i=function(t,e,n){return Gi(t)?zi(void 0,t.useValue):zi(function(t,e,n){let r;if(Wi(t)){const e=d(t);return lt(e)||Bi(e)}if(Gi(t))r=()=>d(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...cn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>un(d(t.useExisting));else{const e=d(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return lt(e)||Bi(e);r=()=>new e(...cn(t.deps))}var i;return r}(t),Mi)}(t);if(Wi(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=zi(void 0,Mi,!0),e.factory=()=>cn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Mi&&(e.value=Li,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Bi(t){const e=y(t),n=null!==e?e.factory:lt(t);if(null!==n)return n;const r=m(t);if(null!==r)return r.factory;if(t instanceof Qe)throw new Error(`Token ${c(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${c(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[b]||t[w]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function zi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Gi(t){return null!==t&&"object"==typeof t&&rn in t}function Wi(t){return"function"==typeof t}const Qi=function(t,e,n){return function(t,e=null,n=null,r){const i=qi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let $i=(()=>{class t{static create(t,e){return Array.isArray(t)?Qi(t,e,""):Qi(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=tn,t.NULL=new Ri,t.\u0275prov=p({token:t,providedIn:"any",factory:()=>un(ki)}),t.__NG_ELEMENT_ID__=-1,t})();function Ki(t,e){ce(jt(t)[1],Vt())}let Yi=null;function Ji(){if(!Yi){const t=R.Symbol;if(t&&t.iterator)Yi=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Yi=n)}}}return Yi}class Xi{constructor(t){this.wrapped=t}static wrap(t){return new Xi(t)}static unwrap(t){return Xi.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Xi}}function Zi(t){return!!to(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ji()in t)}function to(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function eo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function no(t,e,n,r){const i=eo(t,e,n);return eo(t,e+1,r)||i}function ro(t,e,n,r){const i=Lt();return eo(i,Qt(),e)&&(Ft(),function(t,e,n,r,i,o){const s=It(t,e);!function(t,e,n,r,i,o,s){if(null==o)Ot(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?ft(o):s(o,r||"",i);Ot(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ue(),i,t,e,n,r)),ro}function io(t,e,n,r){return eo(t,Qt(),n)?e+ft(n)+r:Br}function oo(t,e,n,r,i,o,s,a){const u=Lt(),c=Ft(),l=t+nt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=$r(e,t,4,s||null,Pt(c,a));ai(e,n,l,Pt(c,u)),ce(e,l);const h=l.tViews=ri(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Ht(h,!1);const f=u[11].createComment("");Cr(c,u,f,h),or(f,u),wi(u,u[l]=vi(f,u,f,h)),ut(h)&&ti(c,u,h),null!=s&&ei(u,h,a)}function so(t,e=O.Default){const n=Lt();return null===n?un(t,e):De(Vt(),n,d(t),e)}function ao(t,e,n){const r=Lt();return eo(r,Qt(),e)&&si(Ft(),ue(),r,t,e,r[11],n,!1),ao}function uo(t,e,n,r,i){const o=i?"class":"style";Ni(t,n,e.inputs[o],o,r)}function co(t,e,n,r){const i=Lt(),o=Ft(),s=nt+t,a=i[11],u=i[s]=gr(a,e,Dt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=$r(e,t,2,i,Pt(a,o));return ai(e,n,u,Pt(a,s)),null!==u.attrs&&Pi(u,u.attrs,!1),null!==u.mergedAttrs&&Pi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Ht(c,!0);const l=c.mergedAttrs;null!==l&&ve(a,u,l);const h=c.classes;null!==h&&Ar(a,u,h);const f=c.styles;null!==f&&Nr(a,u,f),64!=(64&c.flags)&&Cr(o,i,u,c),0===Dt.lFrame.elementDepthCount&&or(u,i),Dt.lFrame.elementDepthCount++,ut(c)&&(ti(o,i,c),function(t,e,n){if(st(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&ei(i,c)}function lo(){let t=Vt();Bt()?Dt.lFrame.isParent=!1:(t=t.parent,Ht(t,!1));const e=t;Dt.lFrame.elementDepthCount--;const n=Ft();n.firstCreatePass&&(ce(n,t),st(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&uo(n,e,Lt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&uo(n,e,Lt(),e.stylesWithoutHost,!1)}function ho(t,e,n,r){co(t,e,n,r),lo()}function fo(){return Lt()}function po(t){return!!t&&"function"==typeof t.then}function go(t){return!!t&&"function"==typeof t.subscribe}const yo=go;function vo(t,e,n=!1,r){const i=Lt(),o=Ft(),s=Vt();return function(t,e,n,r,i,o,s=!1,a){const u=ut(r),c=t.firstCreatePass&&xi(t),l=Si(e);let h=!0;if(3&r.type){const f=It(r,e),d=a?a(f):D,p=d.target||f,g=l.length,y=a?t=>a(Tt(t[r.index])).target:r.index;if(Ot(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=bo(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=bo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=bo(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),vo}function mo(t,e,n){try{return!1!==e(n)}catch(r){return ji(t,r),!1}}function bo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?xt(t.index,e):e;0==(32&e[2])&&Ei(s);let a=mo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=mo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function _o(t=1){return function(t){return(Dt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Dt.lFrame.contextLView))[8]}(t)}function wo(t,e,n,r,i){const o=Lt(),s=io(o,e,n,r);return s!==Br&&si(Ft(),ue(),o,t,s,o[11],i,!1),wo}function Eo(t,e=""){const n=Lt(),r=Ft(),i=t+nt,o=r.firstCreatePass?$r(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Ot(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Cr(r,n,s,o),Ht(o,!1)}function Oo(t){return Co("",t,""),Oo}function Co(t,e,n){const r=Lt(),i=io(r,t,e,n);return i!==Br&&Ai(r,se(),i),Co}function To(t,e,n,r,i){const o=Lt(),s=function(t,e,n,r,i,o){const s=no(t,Wt(),n,i);return function(t){const e=Dt.lFrame;e.bindingIndex=e.bindingIndex+2}(),s?e+ft(n)+r+ft(i)+o:Br}(o,t,e,n,r,i);return s!==Br&&Ai(o,se(),s),To}function Io(t,e,n){const r=Lt();return eo(r,Qt(),e)&&si(Ft(),ue(),r,t,e,r[11],n,!0),Io}const So=void 0;var xo=["en",[["a","p"],["AM","PM"],So],[["AM","PM"],So,So],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],So,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],So,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",So,"{1} 'at' {0}",So],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let jo={};function No(t,e,n){"string"!=typeof e&&(n=e,e=t[Do.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),jo[e]=t,n&&(jo[e][Do.ExtraData]=n)}function Ao(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ro(e);if(n)return n;const r=e.split("-")[0];if(n=Ro(r),n)return n;if("en"===r)return xo;throw new Error(`Missing locale data for the locale "${t}".`)}function Po(t){return Ao(t)[Do.CurrencyCode]||null}function ko(t){return Ao(t)[Do.PluralCase]}function Ro(t){return t in jo||(jo[t]=R.ng&&R.ng.common&&R.ng.common.locales&&R.ng.common.locales[t]),jo[t]}var Do=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Mo="en-US";let Lo=Mo;function Fo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Lo=t.toLowerCase().replace(/_/g,"-"))}class Uo{}class Vo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${c(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let qo=(()=>{class t{}return t.NULL=new Vo,t})();function Ho(...t){}function Bo(t,e){return new Go(It(t,e))}const zo=function(){return Bo(Vt(),Lt())};let Go=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=zo,t})();function Wo(t){return t instanceof Go?t.nativeElement:t}class Qo{}let $o=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ko(),t})();const Ko=function(){const t=Lt(),e=xt(Vt().index,t);return function(t){return t[11]}(it(e)?e:t)};let Yo=(()=>{class t{}return t.\u0275prov=p({token:t,providedIn:"root",factory:()=>null}),t})();class Jo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Xo=new Jo("11.1.2");class Zo{constructor(){}supports(t){return Zi(t)}create(t){return new es(t)}}const ts=(t,e)=>e;class es{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ts}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<os(n,r,i)?e:n,s=os(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Zi(t))throw new Error(`Error trying to diff '${c(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ji()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new ns(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new is),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new is),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ns{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class is{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new rs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function os(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ss{constructor(){}supports(t){return t instanceof Map||to(t)}create(){return new as}}class as{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||to(t)))throw new Error(`Error trying to diff '${c(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new us(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class us{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cs(){return new ls([new Zo])}let ls=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||cs()),deps:[[t,new dn,new fn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=p({token:t,providedIn:"root",factory:cs}),t})();function hs(){return new fs([new ss])}let fs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||hs()),deps:[[t,new dn,new fn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=p({token:t,providedIn:"root",factory:hs}),t})();function ds(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Tt(o)),ot(o))for(let t=rt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ds(e[1],e,n,r)}const s=n.type;if(8&s)ds(t,e,n.child,r);else if(32&s){const t=cr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=lr(t);ds(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class ps{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ds(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ot(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(vr(t,n),Ze(e,n))}this._attachedToViewContainer=!1}mr(this._lView[1],this._lView)}onDestroy(t){ii(this._lView[1],this._lView,null,t)}markForCheck(){Ei(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Oi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Gt(!0);try{Oi(t,e,n)}finally{Gt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,xr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class gs extends ps{constructor(t){super(t),this._view=t}detectChanges(){Ci(this._view)}checkNoChanges(){!function(t){Gt(!0);try{Ci(t)}finally{Gt(!1)}}(this._view)}get context(){return null}}const ys=ms;let vs=(()=>{class t{}return t.__NG_ELEMENT_ID__=ys,t.__ChangeDetectorRef__=!0,t})();function ms(t=!1){return function(t,e,n){if(!n&&at(t)){const n=xt(t.index,e);return new ps(n,n)}return 47&t.type?new ps(e[16],e):null}(Vt(),Lt(),t)}const bs=[new ss],_s=new ls([new Zo]),ws=new fs(bs),Es=function(){return Is(Vt(),Lt())};let Os=(()=>{class t{}return t.__NG_ELEMENT_ID__=Es,t})();const Cs=Os,Ts=class extends Cs{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Qr(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Yr(e,n,t),new ps(n)}};function Is(t,e){return 4&t.type?new Ts(e,t,Bo(t,e)):null}class Ss{}class xs{}const js=function(){return Ds(Vt(),Lt())};let Ns=(()=>{class t{}return t.__NG_ELEMENT_ID__=js,t})();const As=Ns,Ps=class extends As{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Bo(this._hostTNode,this._hostLView)}get injector(){return new Be(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ae(this._hostTNode,this._hostLView);if(Ee(t)){const e=Ce(t,this._hostLView),n=Oe(t);return new Be(e[1].data[n+8],e)}return new Be(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ks(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-rt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Ss,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ot(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ps(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=rt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-rt?(e[4]=n[i],Xe(n,rt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Ir(i,o),a=n[11],u=Or(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,xr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),Xe(Rs(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ks(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=vr(this._lContainer,e);n&&(Ze(Rs(this._lContainer),e),mr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=vr(this._lContainer,e);return n&&null!=Ze(Rs(this._lContainer),e)?new ps(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ks(t){return t[8]}function Rs(t){return t[8]||(t[8]=[])}function Ds(t,e){let n;const r=e[t.index];if(ot(r))n=r;else{let i;if(8&t.type)i=Tt(r);else{const n=e[11];i=n.createComment("");const r=It(t,e);_r(n,Or(n,r),i,function(t,e){return Ot(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=vi(r,e,i,t),wi(e,n)}return new Ps(n,t,e)}const Ms={};class Ls extends qo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=tt(t);return new Vs(e,this.ngModule)}}function Fs(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Us=new Qe("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>sr});class Vs extends Uo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Hr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Fs(this.componentDef.inputs)}get outputs(){return Fs(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ms,i);return o!==Ms||r===Ms?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Qo,Ct),s=i.get(Yo,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ot(t))return t.selectRootElement(e,n===j.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):gr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:sr,clean:Ii,playerHandler:null,flags:0},f=ri(0,null,null,1,0,null,null,null,null,null),d=Qr(null,f,h,l,null,null,o,a,s,i);let p,g;te(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=$r(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Pi(a,u,!0),null!==t&&(ve(i,t,u),null!==a.classes&&Ar(i,t,a.classes),null!==a.styles&&Nr(i,t,a.styles)));const c=r.createRenderer(t,e),l=Qr(n,ni(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Pe(xe(a,n),s,e.type),li(s,a),fi(a,n.length,1)),wi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)ve(a,c,["ng-version",Xo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Fr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&ve(a,c,t),e&&e.length>0&&Ar(a,c,e.join(" "))}if(g=St(f,nt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Vt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),di(t,r,e,Kr(t,e,1,null),n));const i=Ve(e,t,r.directiveStart,r);or(i,e);const o=It(r,e);return o&&or(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Vt();e.contentQueries(1,s,t.directiveStart)}const a=Vt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ae(a.index),ui(n[1],a,0,a.directiveStart,a.directiveEnd,e),ci(e,s)),s}(t,this.componentDef,d,h,[Ki]),Yr(f,d,null)}finally{oe()}return new qs(this.componentType,p,Bo(g,d),d,g)}}class qs extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new gs(r),this.componentType=t}get injector(){return new Be(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Hs=new Map;class Bs extends Ss{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ls(this);const n=et(t),r=t[q]||null;r&&Fo(r),this._bootstrapComponents=ar(n.bootstrap),this._r3Injector=qi(t,e,[{provide:Ss,useValue:this},{provide:qo,useValue:this.componentFactoryResolver}],c(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=$i.THROW_IF_NOT_FOUND,n=O.Default){return t===$i||t===Ss||t===ki?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class zs extends xs{constructor(t){super(),this.moduleType=t,null!==et(t)&&function(t){const e=new Set;!function t(n){const r=et(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${c(e)} vs ${c(e.name)}`)}(i,Hs.get(i),n),Hs.set(i,n));const o=ar(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Bs(this.moduleType,t)}}function Gs(t,e){const n=Ft();let r;const i=t+nt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new ht("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=lt(r.type)),s=T(so);try{const t=Ie(!1),e=o();return Ie(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Lt(),i,e),e}finally{T(s)}}function Ws(t,e,n,r){const i=t+nt,o=Lt(),s=function(t,e){return t[e]}(o,i);return function(t,e){return Xi.isWrapped(e)&&(e=Xi.unwrap(e),t[Wt()]=Br),e}(o,function(t,e){return t[1].data[e].pure}(o,i)?function(t,e,n,r,i,o,s){const a=e+n;return no(t,a,i,o)?function(t,e,n){return t[e]=n}(t,a+2,s?r.call(s,i,o):r(i,o)):function(t,e){const n=t[e];return n===Br?void 0:n}(t,a+2)}(o,function(){const t=Dt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,r,s):s.transform(n,r))}const Qs=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function $s(){return this._results[Ji()]()}class Ks{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ji(),n=Ks.prototype;n[e]||(n[e]=$s)}get changes(){return this._changes||(this._changes=new Qs)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Ye(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ys{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ys(this.queryList)}setDirty(){this.queryList.setDirty()}}class Js{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Js(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==ua(t,e).matches&&this.queries[e].setDirty()}}class Xs{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Zs{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Zs(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ta{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new ta(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,ea(e,i)),this.matchTNodeWithReadOption(t,e,Ue(e,t,i,!1,!1))}else n===Os?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ue(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Go||r===Ns||r===Os&&4&e.type)this.addMatch(e.index,-2);else{const n=Ue(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function ea(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function na(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Bo(t,e):4&t.type?Is(t,e):null}(e,t):-2===n?function(t,e,n){return n===Go?Bo(e,t):n===Os?Is(e,t):n===Ns?Ds(e,t):void 0}(t,e,r):Ve(t,t[1],n,e)}function ra(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:na(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function ia(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=ra(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=rt;t<s.length;t++){const e=s[t];e[17]===e[3]&&ia(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];ia(n[1],n,i,r)}}}}}return r}function oa(t){const e=Lt(),n=Ft(),r=Yt();Jt(r+1);const i=ua(n,r);if(t.dirty&&Nt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?ia(n,e,r,[]):ra(n,e,i,r);t.reset(o,Wo),t.notifyOnChanges()}return!0}return!1}function sa(t,e,n,r){const i=Ft();if(i.firstCreatePass){const o=Vt();(function(t,e,n){null===t.queries&&(t.queries=new Zs),t.queries.track(new ta(e,n))})(i,new Xs(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Ks(4==(4&n));ii(t,e,r,r.destroy),null===e[19]&&(e[19]=new Js),e[19].queries.push(new Ys(r))}(i,Lt(),n)}function aa(){return t=Lt(),e=Yt(),t[19].queries[e].queryList;var t,e}function ua(t,e){return t.queries.getByIndex(e)}function ca(t=O.Default){const e=ms(!0);if(null!=e||t&O.Optional)return e;pt("ChangeDetectorRef")}const la=new Qe("Application Initializer");let ha=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ho,this.reject=Ho,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();po(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(un(la,8))},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();const fa=new Qe("AppId"),da={provide:fa,useFactory:function(){return`${pa()}${pa()}${pa()}`},deps:[]};function pa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ga=new Qe("Platform Initializer"),ya=new Qe("Platform ID"),va=new Qe("appBootstrapListener");let ma=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();const ba=new Qe("LocaleId"),_a=new Qe("DefaultCurrencyCode");class wa{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Ea=function(t){return new zs(t)},Oa=Ea,Ca=function(t){return Promise.resolve(Ea(t))},Ta=function(t){const e=Ea(t),n=ar(et(t).declarations).reduce((t,e)=>{const n=tt(e);return n&&t.push(new Vs(n)),t},[]);return new wa(e,n)},Ia=Ta,Sa=function(t){return Promise.resolve(Ta(t))};let xa=(()=>{class t{constructor(){this.compileModuleSync=Oa,this.compileModuleAsync=Ca,this.compileModuleAndAllComponentsSync=Ia,this.compileModuleAndAllComponentsAsync=Sa}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();const ja=(()=>Promise.resolve(0))();function Na(t){"undefined"==typeof Zone?ja.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Aa{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qs(!1),this.onMicrotaskEmpty=new Qs(!1),this.onStable=new Qs(!1),this.onError=new Qs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=R.requestAnimationFrame,e=R.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(R,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ra(t),ka(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ra(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Da(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Ma(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Da(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ma(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Ra(t),ka(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Aa.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Aa.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Pa,Ho,Ho);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Pa={};function ka(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ra(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Da(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ma(t){t._nesting--,ka(t)}class La{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qs,this.onMicrotaskEmpty=new Qs,this.onStable=new Qs,this.onError=new Qs}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Fa=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Aa.assertNotInAngularZone(),Na(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Na(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(un(Aa))},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})(),Ua=(()=>{class t{constructor(){this._applications=new Map,Ba.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ba.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();class Va{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function qa(t){Ba=t}let Ha,Ba=new Va,za=!0,Ga=!1;function Wa(){return Ga=!0,za}function Qa(){if(Ga)throw new Error("Cannot enable prod mode after platform setup.");za=!1}const $a=new Qe("AllowMultipleToken");class Ka{constructor(t,e){this.name=t,this.token=e}}function Ya(t,e,n=[]){const r=`Platform: ${e}`,i=new Qe(r);return(e=[])=>{let o=Ja();if(!o||o.injector.get($a,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Di,useValue:"platform"});!function(t){if(Ha&&!Ha.destroyed&&!Ha.injector.get($a,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ha=t.get(Xa);const e=t.get(ga,null);e&&e.forEach(t=>t())}($i.create({providers:t,name:r}))}return function(t){const e=Ja();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Ja(){return Ha&&!Ha.destroyed?Ha:null}let Xa=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new La:("zone.js"===t?void 0:t)||new Aa({enableLongStackTrace:Wa(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Aa,useValue:n}];return n.run(()=>{const e=$i.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(ir,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{eu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return po(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(ha);return t.runInitializers(),t.donePromise.then(()=>(Fo(i.injector.get(ba,Mo)||Mo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Za({},e);return function(t,e,n){const r=new zs(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(tu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${c(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(un($i))},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();function Za(t,e){return Array.isArray(e)?e.reduce(Za,t):Object.assign(Object.assign({},t),e)}let tu=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Aa.assertNotInAngularZone(),Na(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Aa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Uo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ss),i=n.create($i.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Fa,null),a=s&&i.injector.get(Ua);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),eu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),Wa()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;eu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(va,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(un(Aa),un(ma),un($i),un(ir),un(qo),un(ha))},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();function eu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class nu{}class ru{}const iu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ou=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||iu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>su(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>su(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(un(xa),un(ru,8))},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();function su(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const au=function(t){return null},uu=Ya(null,"core",[{provide:ya,useValue:"unknown"},{provide:Xa,deps:[$i]},{provide:Ua,deps:[]},{provide:ma,deps:[]}]),cu=[{provide:tu,useClass:tu,deps:[Aa,ma,$i,ir,qo,ha]},{provide:Us,deps:[Aa],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ha,useClass:ha,deps:[[new fn,la]]},{provide:xa,useClass:xa,deps:[]},da,{provide:ls,useFactory:function(){return _s},deps:[]},{provide:fs,useFactory:function(){return ws},deps:[]},{provide:ba,useFactory:function(t){return Fo(t=t||"undefined"!=typeof $localize&&$localize.locale||Mo),t},deps:[[new hn(ba),new fn,new dn]]},{provide:_a,useValue:"USD"}];let lu=(()=>{class t{constructor(t){}}return t.\u0275mod=K({type:t}),t.\u0275inj=g({factory:function(e){return new(e||t)(un(tu))},providers:cu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},oB13:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function l(t,e){return function(n){let r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new h(r,e));const i=Object.create(n,u);return i.source=n,i.subjectFactory=r,i}}class h{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i}}},os0x:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return C}),n.d(e,"c",function(){return L}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return P}),n.d(e,"i",function(){return F}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return H}),n.d(e,"m",function(){return d}),n.d(e,"n",function(){return A}),n.d(e,"o",function(){return y}),n.d(e,"p",function(){return v}),n.d(e,"q",function(){return b}),n.d(e,"r",function(){return R}),n.d(e,"s",function(){return _}),n.d(e,"t",function(){return p}),n.d(e,"u",function(){return g}),n.d(e,"v",function(){return E}),n.d(e,"w",function(){return m}),n.d(e,"x",function(){return w}),n.d(e,"y",function(){return N}),n.d(e,"z",function(){return S}),n.d(e,"A",function(){return D}),n.d(e,"B",function(){return M}),n.d(e,"C",function(){return k}),n.d(e,"D",function(){return W}),n.d(e,"E",function(){return G}),n.d(e,"F",function(){return x}),n.d(e,"G",function(){return q}),n.d(e,"H",function(){return B}),n.d(e,"I",function(){return z});var r=n("os0x"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function E(){return!1}var O=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,C.prototype.create),o}return Object(r.c)(e,t),e}(Error),C=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new O(i,a,r);return u},t}();function T(t,e){return t.replace(I,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var I=/\{\$([^}]+)}/g;function S(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var j=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=S(c(o[0])||""),n=S(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},N=function(t){var e=j(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},A=function(t){var e=j(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function R(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function V(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function B(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e,r)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e,r)+"must be a valid context object.")}var G=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},W=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return I}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return m}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return v}),n.d(e,"f",function(){return C}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),v=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),_=new u.P("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.U)()&&"undefined"!=typeof console&&console[t](...e)};function C(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:w,deps:[m,u.A,[new u.B,b]]};let I=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:m,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Eb({type:t}),t.\u0275inj=u.Db({factory:function(e){return new(e||t)(u.Mb(u.C))},providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new v(t,e))}}class v{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("oB13"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>Object(i.a)()(Object(r.a)(s)(t))}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("os0x"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return u},"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}c(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.2.5",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.k)(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var d=Object(o.h)(Object.keys(e)),g=d.next();!g.done;g=d.next())e[g.value]._addComponent(a)}catch(y){u={error:y}}finally{try{g&&!g.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.o)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.u)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new v(t)},"PRIVATE")),t.registerVersion(h,"0.6.14",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Cb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Mb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s))},t.\u0275prov=Object(r.Cb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Mb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Cb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.Mb)(s).location;return new b(Object(r.Mb)(a),e&&e.origin||"")}const m=new r.r("appBaseHref");let b=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(a),r.Mb(m,8))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(a),r.Mb(m,8))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(y),r.Mb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Cb)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new w(Object(r.Mb)(y),Object(r.Mb)(a))}function O(t){return t.replace(/\/index.html$/,"")}const C={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var T=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),I=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),S=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function x(t,e){const n=Object(r.ib)(t),i=n[r.Z.NumberSymbols][e];if(void 0===i){if(e===S.CurrencyDecimal)return n[r.Z.NumberSymbols][S.Decimal];if(e===S.CurrencyGroup)return n[r.Z.NumberSymbols][S.Group]}return i}const j=r.lb,N=/^(\d+)?\.((\d+)(-(\d+))?)?$/,A=".",P="0";function k(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class R{}let D=(()=>{class t extends R{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(j(e||this.locale)(t)){case I.Zero:return"zero";case I.One:return"one";case I.Two:return"two";case I.Few:return"few";case I.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.v))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();function M(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let L=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.ob)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.ub)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(r.t),r.Gb(r.u),r.Gb(r.l),r.Gb(r.E))},t.\u0275dir=r.Bb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class F{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let U=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new F(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new V(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new V(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(r.Q),r.Gb(r.L),r.Gb(r.t))},t.\u0275dir=r.Bb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class V{constructor(t,e){this.record=t,this.view=e}}let q=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new H,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){B("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){B("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(r.Q),r.Gb(r.L))},t.\u0275dir=r.Bb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class H{constructor(){this.$implicit=null,this.ngIf=null}}function B(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.ub)(e)}'.`)}let z=(()=>{class t{constructor(t,e="USD"){this._locale=t,this._defaultCurrencyCode=e}transform(e,n,i="symbol",o,s){if(!function(t){return!(null==t||""===t||t!=t)}(e))return null;s=s||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let a=n||this._defaultCurrencyCode;"code"!==i&&(a="symbol"===i||"symbol-narrow"===i?function(t,e,n="en"){const i=function(t){return Object(r.ib)(t)[r.Z.Currencies]}(n)[t]||C[t]||[],o=i[1];return"narrow"===e&&"string"==typeof o?o:i[0]||t}(a,"symbol"===i?"wide":"narrow",s):i);try{return function(t,e,n,i,o){const s=function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(A)?i.split(A):[i.substring(0,i.lastIndexOf(P)+1),i.substring(i.lastIndexOf(P)+1)],a=s[0],u=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<u.length;l++){const t=u.charAt(l);t===P?n.minFrac=n.maxFrac=l+1:"#"===t?n.maxFrac=l+1:n.posSuf+=t}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const t=i.length-n.posPre.length-n.posSuf.length,e=o.indexOf("#");n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return Object(r.ib)(t)[r.Z.NumberFormats][e]}(e,T.Currency),x(e,S.MinusSign));return s.minFrac=function(t){let e;const n=C[t];return n&&(e=n[2]),"number"==typeof e?e:2}(i),s.maxFrac=s.minFrac,function(t,e,n,r,i,o,s=!1){let a="",u=!1;if(isFinite(t)){let c=function(t){let e,n,r,i,o,s=Math.abs(t)+"",a=0;for((n=s.indexOf(A))>-1&&(s=s.replace(A,"")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;s.charAt(r)===P;r++);if(r===(o=s.length))e=[0],n=1;else{for(o--;s.charAt(o)===P;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(s.charAt(r))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);s&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let l=e.minInt,h=e.minFrac,f=e.maxFrac;if(o){const t=o.match(N);if(null===t)throw new Error(`${o} is not a valid digit info`);const e=t[1],n=t[3],r=t[5];null!=e&&(l=k(e)),null!=n&&(h=k(n)),null!=r?f=k(r):null!=n&&h>f&&(f=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const o=Math.min(Math.max(e,i),n);let s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let t=s;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let t=1;t<s;t++)r[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=0!==o;const c=e+t.integerLen,l=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,u&&(0===r[n]&&n>=c?r.pop():u=!1),e>=10?1:0},0);l&&(r.unshift(l),t.integerLen++)}(c,h,f);let d=c.digits,p=c.integerLen;const g=c.exponent;let y=[];for(u=d.every(t=>!t);p<l;p++)d.unshift(0);for(;p<0;p++)d.unshift(0);p>0?y=d.splice(p,d.length):(y=d,d=[0]);const v=[];for(d.length>=e.lgSize&&v.unshift(d.splice(-e.lgSize,d.length).join(""));d.length>e.gSize;)v.unshift(d.splice(-e.gSize,d.length).join(""));d.length&&v.unshift(d.join("")),a=v.join(x(n,r)),y.length&&(a+=x(n,i)+y.join("")),g&&(a+=x(n,S.Exponential)+"+"+g)}else a=x(n,S.Infinity);return a=t<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,s,e,S.CurrencyGroup,S.CurrencyDecimal,o).replace("\xa4",n).replace("\xa4","").trim()}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),s,a,n,o)}catch(u){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.ub)(t)}'`)}(t,u.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(r.v),r.Gb(r.k))},t.\u0275pipe=r.Fb({name:"currency",type:t,pure:!0}),t})(),G=(()=>{class t{}return t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({factory:function(e){return new(e||t)},providers:[{provide:R,useClass:D}]}),t})();function W(t){return"browser"===t}function Q(t){return"server"===t}let $=(()=>{class t{}return t.\u0275prov=Object(r.Cb)({token:t,providedIn:"root",factory:()=>new K(Object(r.Mb)(s),window)}),t})();class K{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Y(this.window.history)||Y(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Y(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class J extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new J,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Z||(Z=document.querySelector("base"),Z)?Z.getAttribute("href"):null;return null==e?null:(n=e,X||(X=document.createElement("a")),X.setAttribute("href",n),"/"===X.pathname.charAt(0)?X.pathname:"/"+X.pathname);var n}resetBaseElement(){Z=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return M(document.cookie,t)}}let X,Z=null;const tt=new r.r("TRANSITION_ID"),et=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[tt,s,r.s],multi:!0}];class nt{static init(){Object(r.W)(new nt)}addToWindow(t){r.nb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.nb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.nb.getAllAngularRootElements=()=>t.getAllRootElements(),r.nb.frameworkStabilizers||(r.nb.frameworkStabilizers=[]),r.nb.frameworkStabilizers.push(t=>{const e=r.nb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const rt=new r.r("EventManagerPlugins");let it=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(rt),r.Mb(r.A))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();class ot{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let st=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),at=(()=>{class t extends st{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const ut={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ct=/%COMP%/g;function lt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?lt(t,i,n):(i=i.replace(ct,t),n.push(i))}return n}function ht(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ft=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new dt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new pt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new gt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=lt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(it),r.Mb(at),r.Mb(r.c))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();class dt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(ut[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=ut[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=ut[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ht(n)):this.eventManager.addEventListener(t,e,ht(n))}}class pt extends dt{constructor(t,e,n,r){super(t),this.component=n;const i=lt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(ct,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(ct,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class gt extends dt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=lt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let yt=(()=>{class t extends ot{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const vt=["alt","control","meta","shift"],mt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},_t={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let wt=(()=>{class t extends ot{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(vt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&bt.hasOwnProperty(e)&&(e=bt[e]))}return mt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),vt.forEach(r=>{r!=n&&(0,_t[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const Et=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){J.makeCurrent(),nt.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.tb)(document),document},deps:[]}],Ot=Object(r.S)(r.V,"browser",Et),Ct=[[],{provide:r.Y,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:rt,useClass:yt,multi:!0,deps:[s,r.A,r.C]},{provide:rt,useClass:wt,multi:!0,deps:[s]},[],{provide:ft,useClass:ft,deps:[it,at,r.c]},{provide:r.F,useExisting:ft},{provide:st,useExisting:at},{provide:at,useClass:at,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:it,useClass:it,deps:[rt,r.A]},[]];let Tt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:tt,useExisting:r.c},et]}}}return t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({factory:function(e){return new(e||t)(r.Mb(t,12))},providers:Ct,imports:[G,r.f]}),t})();"undefined"!=typeof window&&window;var It=n("Cfvw"),St=n("LRne"),xt=n("XNiG"),jt=n("9ppp");class Nt extends xt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new jt.a;return this._value}next(t){super.next(this._value=t)}}var At=n("z+Ro"),Pt=n("DH7j"),kt=n("7o/Q");class Rt extends kt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Dt extends kt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Mt=n("SeVD"),Lt=n("HDdC");function Ft(t,e,n,r,i=new Dt(t,n,r)){if(!i.closed)return e instanceof Lt.a?e.subscribe(i):Object(Mt.a)(e)(i)}var Ut=n("yCtX");const Vt={};class qt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ht(t,this.resultSelector))}}class Ht extends Rt{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Vt),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Ft(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Vt?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Bt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var zt=n("bHdf");function Gt(...t){return Object(zt.a)(1)(Object(St.a)(...t))}var Wt=n("EY2u");function Qt(t){return new Lt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(It.a)(n):Object(Wt.b)()).subscribe(e)})}var $t=n("lJxs"),Kt=n("zx2A");function Yt(t,e){return"function"==typeof e?n=>n.pipe(Yt((n,r)=>Object(It.a)(t(n,r)).pipe(Object($t.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Jt(t))}class Jt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Xt(t,this.project))}}class Xt extends Kt.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Kt.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Kt.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Zt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function te(t){return e=>0===t?Object(Wt.b)():e.lift(new ee(t))}class ee{constructor(t){if(this.total=t,this.total<0)throw new Zt}call(t,e){return e.subscribe(new ne(t,this.total))}}class ne extends kt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function re(...t){const e=t[t.length-1];return Object(At.a)(e)?(t.pop(),n=>Gt(t,n,e)):e=>Gt(t,e)}function ie(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new oe(t,e,n))}}class oe{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new se(t,this.accumulator,this.seed,this.hasSeed))}}class se extends kt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function ae(t,e){return function(n){return n.lift(new ue(t,e))}}class ue{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ce(t,this.predicate,this.thisArg))}}class ce extends kt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function le(t){return function(e){const n=new he(t),r=e.lift(n);return n.caught=r}}class he{constructor(t){this.selector=t}call(t,e){return e.subscribe(new fe(t,this.selector,this.caught))}}class fe extends Kt.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Kt.a(this);this.add(r);const i=Object(Kt.c)(n,r);i!==r&&this.add(i)}}}var de=n("5+tZ");function pe(t,e){return Object(de.a)(t,e,1)}function ge(t){return function(e){return 0===t?Object(Wt.b)():e.lift(new ye(t))}}class ye{constructor(t){if(this.total=t,this.total<0)throw new Zt}call(t,e){return e.subscribe(new ve(t,this.total))}}class ve extends kt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function me(t=we){return e=>e.lift(new be(t))}class be{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new _e(t,this.errorFactory))}}class _e extends kt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Zm){t=Zm}this.destination.error(t)}}}function we(){return new Bt}function Ee(t=null){return e=>e.lift(new Oe(t))}class Oe{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ce(t,this.defaultValue))}}class Ce extends kt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Te=n("SpAZ");function Ie(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ae((e,n)=>t(e,n,r)):Te.a,te(1),n?Ee(e):me(()=>new Bt))}var Se=n("vkgz"),xe=n("quSY");class je{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Ne(t,this.callback))}}class Ne extends kt.a{constructor(t,e){super(t),this.add(new xe.a(e))}}class Ae{constructor(t,e){this.id=t,this.url=e}}class Pe extends Ae{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ke extends Ae{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Re extends Ae{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class De extends Ae{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Me extends Ae{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Le extends Ae{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fe extends Ae{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ue extends Ae{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ve extends Ae{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qe{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class He{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Be{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ze{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ge{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class We{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qe{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const $e="primary";class Ke{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ye(t){return new Ke(t)}function Je(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Xe(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ze(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!tn(t[i],e[i]))return!1;return!0}function tn(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function en(t){return Array.prototype.concat.apply([],t)}function nn(t){return t.length>0?t[t.length-1]:null}function rn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function on(t){return Object(r.pb)(t)?t:Object(r.qb)(t)?Object(It.a)(Promise.resolve(t)):Object(St.a)(t)}function sn(t,e,n){return n?function(t,e){return Ze(t,e)}(t.queryParams,e.queryParams)&&an(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>tn(t[n],e[n]))}(t.queryParams,e.queryParams)&&un(t.root,e.root)}function an(t,e){if(!dn(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!an(t.children[n],e.children[n]))return!1}return!0}function un(t,e){return cn(t,e,e.segments)}function cn(t,e,n){if(t.segments.length>n.length)return!!dn(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!dn(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!un(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!dn(t.segments,r)&&!!t.children.primary&&cn(t.children.primary,e,i)}}class ln{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ye(this.queryParams)),this._queryParamMap}toString(){return yn.serialize(this)}}class hn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,rn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vn(this)}}class fn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ye(this.parameters)),this._parameterMap}toString(){return Cn(this)}}function dn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class pn{}class gn{parse(t){const e=new jn(t);return new ln(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${mn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${_n(e)}=${_n(t)}`).join("&"):`${_n(e)}=${_n(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const yn=new gn;function vn(t){return t.segments.map(t=>Cn(t)).join("/")}function mn(t,e){if(!t.hasChildren())return vn(t);if(e){const e=t.children.primary?mn(t.children.primary,!1):"",n=[];return rn(t.children,(t,e)=>{e!==$e&&n.push(`${e}:${mn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return rn(t.children,(t,r)=>{r===$e&&(n=n.concat(e(t,r)))}),rn(t.children,(t,r)=>{r!==$e&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===$e?[mn(t.children.primary,!1)]:[`${n}:${mn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${vn(t)}/${e[0]}`:`${vn(t)}/(${e.join("//")})`}}function bn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _n(t){return bn(t).replace(/%3B/gi,";")}function wn(t){return bn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function En(t){return decodeURIComponent(t)}function On(t){return En(t.replace(/\+/g,"%20"))}function Cn(t){return`${wn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${wn(t)}=${wn(e[t])}`).join("")}`;var e}const Tn=/^[^\/()?;=#]+/;function In(t){const e=t.match(Tn);return e?e[0]:""}const Sn=/^[^=?&#]+/,xn=/^[^?&#]+/;class jn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new hn(t,e)),n}parseSegment(){const t=In(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new fn(En(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=In(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=In(this.remaining);t&&(n=t,this.capture(n))}t[En(e)]=En(n)}parseQueryParam(t){const e=function(t){const e=t.match(Sn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(xn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=On(e),i=On(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=In(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=$e);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new hn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Nn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=An(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=An(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Pn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Pn(t,this._root).map(t=>t.value)}}function An(t,e){if(t===e.value)return e;for(const n of e.children){const e=An(t,n);if(e)return e}return null}function Pn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Pn(t,n);if(r.length)return r.unshift(e),r}return[]}class kn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Rn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Dn extends Nn{constructor(t,e){super(t),this.snapshot=e,qn(this,t)}toString(){return this.snapshot.toString()}}function Mn(t,e){const n=function(t,e){const n=new Un([],{},{},"",{},$e,e,null,t.root,-1,{});return new Vn("",new kn(n,[]))}(t,e),r=new Nt([new fn("",{})]),i=new Nt({}),o=new Nt({}),s=new Nt({}),a=new Nt(""),u=new Ln(r,i,s,a,o,$e,e,n.root);return u.snapshot=n.root,new Dn(new kn(u,[]),n)}class Ln{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object($t.a)(t=>Ye(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object($t.a)(t=>Ye(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Un{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ye(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ye(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vn extends Nn{constructor(t,e){super(e),this.url=t,qn(this,e)}toString(){return Hn(this._root)}}function qn(t,e){e.value._routerState=t,e.children.forEach(e=>qn(t,e))}function Hn(t){const e=t.children.length>0?` { ${t.children.map(Hn).join(", ")} } `:"";return`${t.value}${e}`}function Bn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ze(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ze(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ze(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ze(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function zn(t,e){return Ze(t.params,e.params)&&function(t,e){return dn(t,e)&&t.every((t,n)=>Ze(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||zn(t.parent,e.parent))}function Gn(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Gn(t,e,r);return Gn(t,e)})}(t,e,n);return new kn(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Wn(e,t),t}{const n=new Ln(new Nt((r=e.value).url),new Nt(r.params),new Nt(r.queryParams),new Nt(r.fragment),new Nt(r.data),r.outlet,r.component,r),i=e.children.map(e=>Gn(t,e));return new kn(n,i)}}var r}function Wn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Wn(t.children[n],e.children[n])}function Qn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function $n(t){return"object"==typeof t&&null!=t&&t.outlets}function Kn(t,e,n,r,i){let o={};return r&&rn(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new ln(n.root===t?e:Yn(n.root,t,e),o,i)}function Yn(t,e,n){const r={};return rn(t.children,(t,i)=>{r[i]=t===e?n:Yn(t,e,n)}),new hn(t.segments,r)}class Jn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Qn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find($n);if(r&&r!==nn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Zn(t,e,n){if(t||(t=new hn([],{})),0===t.segments.length&&t.hasChildren())return tr(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if($n(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!ir(a,u,e))return o;r+=2}else{if(!ir(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new hn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new hn(t.segments.slice(r.pathIndex),t.children),tr(e,0,i)}return r.match&&0===i.length?new hn(t.segments,{}):r.match&&!t.hasChildren()?er(t,e,n):r.match?tr(t,0,i):er(t,e,n)}function tr(t,e,n){if(0===n.length)return new hn(t.segments,{});{const r=function(t){return $n(t[0])?t[0].outlets:{[$e]:t}}(n),i={};return rn(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Zn(t.children[r],e,n))}),rn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new hn(t.segments,i)}}function er(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if($n(o)){const t=nr(o.outlets);return new hn(r,t)}if(0===i&&Qn(n[0])){r.push(new fn(t.segments[e].path,rr(n[0]))),i++;continue}const s=$n(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Qn(a)?(r.push(new fn(s,rr(a))),i+=2):(r.push(new fn(s,{})),i++)}return new hn(r,{})}function nr(t){const e={};return rn(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=er(new hn([],{}),0,t))}),e}function rr(t){const e={};return rn(t,(t,n)=>e[n]=`${t}`),e}function ir(t,e,n){return t==n.path&&Ze(e,n.parameters)}class or{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Bn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Rn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),rn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Rn(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=Rn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new We(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ze(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Bn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),sr(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function sr(t){Bn(t.value),t.children.forEach(sr)}class ar{constructor(t,e){this.routes=t,this.module=e}}function ur(t){return"function"==typeof t}function cr(t){return t instanceof ln}const lr=Symbol("INITIAL_VALUE");function hr(){return Yt(t=>function(...t){let e,n;return Object(At.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Pt.a)(t[0])&&(t=t[0]),Object(Ut.a)(t,n).lift(new qt(e))}(t.map(t=>t.pipe(te(1),re(lr)))).pipe(ie((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==lr)return t;if(r===lr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||cr(r))return r}return t},t)},lr),ae(t=>t!==lr),Object($t.a)(t=>cr(t)?t:!0===t),te(1)))}let fr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ab({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Hb(0,"router-outlet")},directives:function(){return[si]},encapsulation:2}),t})();function dr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];pr(r,gr(e,r))}}function pr(t,e){t.children&&dr(t.children,e)}function gr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function yr(t){const e=t.children&&t.children.map(yr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==$e&&(n.component=fr),n}function vr(t){return t.outlet||$e}function mr(t,e){const n=t.filter(t=>vr(t)===e);return n.push(...t.filter(t=>vr(t)!==e)),n}const br={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function _r(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},br):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Xe)(n,t,e);if(!i)return Object.assign({},br);const o={};rn(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function wr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Er(t,e,n)&&vr(n)!==$e)}(t,n,r)){const i=new hn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&vr(o)!==$e){const n=new hn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[vr(o)]=n}return i}(t,e,r,new hn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Er(t,e,n))}(t,n,r)){const o=new hn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Er(t,n,a)&&!i[vr(a)]){const n=new hn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[vr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new hn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Er(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Or(t,e,n,r){return!!(vr(t)===r||r!==$e&&Er(e,n,t))&&("**"===t.path||_r(e,t,n).matched)}function Cr(t,e,n){return 0===e.length&&!t.children[n]}class Tr{constructor(t){this.segmentGroup=t||null}}class Ir{constructor(t){this.urlTree=t}}function Sr(t){return new Lt.a(e=>e.error(new Tr(t)))}function xr(t){return new Lt.a(e=>e.error(new Ir(t)))}function jr(t){return new Lt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Nr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=wr(this.urlTree.root,[],[],this.config).segmentGroup,e=new hn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,$e).pipe(Object($t.a)(t=>this.createUrlTree(Ar(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(le(t=>{if(t instanceof Ir)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Tr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,$e).pipe(Object($t.a)(e=>this.createUrlTree(Ar(e),t.queryParams,t.fragment))).pipe(le(t=>{if(t instanceof Tr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new hn([],{[$e]:t}):t;return new ln(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object($t.a)(t=>new hn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(It.a)(r).pipe(pe(r=>{const i=n.children[r],o=mr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object($t.a)(t=>({segment:t,outlet:r})))}),ie((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ae((e,n)=>t(e,n,r)):Te.a,ge(1),n?Ee(e):me(()=>new Bt))}())}expandSegment(t,e,n,r,i,o){return Object(It.a)(n).pipe(pe(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(le(t=>{if(t instanceof Tr)return Object(St.a)(null);throw t}))),Ie(t=>!!t),le((t,n)=>{if(t instanceof Bt||"EmptyError"===t.name){if(Cr(e,r,i))return Object(St.a)(new hn([],{}));throw new Tr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Or(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Sr(e):Sr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?xr(i):this.lineralizeSegments(n,i).pipe(Object(de.a)(n=>{const i=new hn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=_r(e,r,i);if(!s)return Sr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?xr(l):this.lineralizeSegments(r,l).pipe(Object(de.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object($t.a)(t=>(n._loadedConfig=t,new hn(r,{})))):Object(St.a)(new hn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=_r(e,n,r);if(!o)return Sr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(de.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=wr(e,s,u,o),l=new hn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object($t.a)(t=>new hn(s,t)));if(0===o.length&&0===c.length)return Object(St.a)(new hn(s,{}));const h=vr(n)===i;return this.expandSegment(r,l,o,c,h?$e:i,!0).pipe(Object($t.a)(t=>new hn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(St.a)(new ar(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(St.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(de.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object($t.a)(t=>(e._loadedConfig=t,t))):function(t){return new Lt.a(e=>e.error(Je(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(St.a)(new ar([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(St.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&ur(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!ur(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return on(o)});return Object(St.a)(i).pipe(hr(),Object(Se.a)(t=>{if(!cr(t))return;const e=Je(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object($t.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(St.a)(n);if(r.numberOfChildren>1||!r.children.primary)return jr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new ln(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return rn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return rn(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new hn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Ar(t){const e={};for(const n of Object.keys(t.children)){const r=Ar(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new hn(t.segments.concat(e.segments),e.children)}return t}(new hn(t.segments,e))}class Pr{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class kr{constructor(t,e){this.component=t,this.route=e}}function Rr(t,e,n){const r=t._root;return Mr(r,e?e._root:null,n,[r.value])}function Dr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Mr(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Rn(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!dn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!dn(t.url,e.url)||!Ze(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zn(t,e)||!Ze(t.queryParams,e.queryParams);case"paramsChange":default:return!zn(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Pr(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Mr(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new kr(a.outlet.component,s))}else s&&Lr(e,a,i),i.canActivateChecks.push(new Pr(r)),Mr(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),rn(o,(t,e)=>Lr(t,n.getContext(e),i)),i}function Lr(t,e,n){const r=Rn(t),i=t.value;rn(r,(t,r)=>{Lr(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new kr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Fr{}function Ur(t){return new Lt.a(e=>e.error(t))}class Vr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=wr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,$e);if(null===e)return null;const n=new Un([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},$e,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new kn(n,e),i=new Vn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Fn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=mr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!qr(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===$e?-1:e.value.outlet===$e?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Cr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Or(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?nn(n).parameters:{};i=new Un(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zr(t),vr(t),t.component,t,Hr(e),Br(e)+n.length,Gr(t))}else{const r=_r(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Un(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zr(t),vr(t),t.component,t,Hr(e),Br(e)+o.length,Gr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=wr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new kn(i,t)]}if(0===a.length&&0===c.length)return[new kn(i,[])];const l=vr(t)===r,h=this.processSegment(a,u,c,l?$e:r);return null===h?null:[new kn(i,h)]}}function qr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Hr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Br(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function zr(t){return t.data||{}}function Gr(t){return t.resolve||{}}function Wr(t){return Yt(e=>{const n=t(e);return n?Object(It.a)(n).pipe(Object($t.a)(()=>e)):Object(St.a)(e)})}class Qr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const $r=new r.r("ROUTES");class Kr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object($t.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new ar(en(i.injector.get($r,void 0,r.q.Self|r.q.Optional)).map(yr),i)}))}loadModuleFactory(t){return"string"==typeof t?Object(It.a)(this.loader.load(t)):on(t()).pipe(Object(de.a)(t=>t instanceof r.w?Object(St.a)(t):Object(It.a)(this.compiler.compileModuleAsync(t))))}}class Yr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Jr,this.attachRef=null}}class Jr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Yr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Xr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Zr(t){throw t}function ti(t,e,n){return e.parse("/")}function ei(t,e){return Object(St.a)(null)}let ni=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new xt.a,this.errorHandler=Zr,this.malformedUriErrorHandler=ti,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ei,afterPreactivation:ei},this.urlHandlingStrategy=new Xr,this.routeReuseStrategy=new Qr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.X);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new ln(new hn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Kr(s,a,t=>this.triggerEvent(new qe(t)),t=>this.triggerEvent(new He(t))),this.routerState=Mn(this.currentUrlTree,this.rootComponentType),this.transitions=new Nt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(ae(t=>0!==t.id),Object($t.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Yt(t=>{let n=!1,r=!1;return Object(St.a)(t).pipe(Object(Se.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Yt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(St.a)(t).pipe(Yt(t=>{const n=this.transitions.getValue();return e.next(new Pe(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Wt.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Yt(t=>function(t,e,n,r,i){return new Nr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object($t.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(Se.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(de.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Vr(t,e,n,r,i,o).recognize();return null===s?Ur(new Fr):Object(St.a)(s)}catch(Zm){return Ur(Zm)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object($t.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Se.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Me(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Pe(n,this.serializeUrl(r),i,o);e.next(a);const u=Mn(r,this.rootComponentType).snapshot;return Object(St.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Wt.a}),Wr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Se.a)(t=>{const e=new Le(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object($t.a)(t=>Object.assign(Object.assign({},t),{guards:Rr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(de.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(St.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(It.a)(t).pipe(Object(de.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(St.a)(!0);const s=o.map(o=>{const s=Dr(o,e,i);let a;if(function(t){return t&&ur(t.canDeactivate)}(s))a=on(s.canDeactivate(t,e,n,r));else{if(!ur(s))throw new Error("Invalid CanDeactivate guard");a=on(s(t,e,n,r))}return a.pipe(Ie())});return Object(St.a)(s).pipe(hr())}(t.component,t.route,n,e,r)),Ie(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(de.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(It.a)(e).pipe(pe(e=>Gt(function(t,e){return null!==t&&e&&e(new Be(t)),Object(St.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Ge(t)),Object(St.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Qt(()=>{const i=e.guards.map(i=>{const o=Dr(i,e.node,n);let s;if(function(t){return t&&ur(t.canActivateChild)}(o))s=on(o.canActivateChild(r,t));else{if(!ur(o))throw new Error("Invalid CanActivateChild guard");s=on(o(r,t))}return s.pipe(Ie())});return Object(St.a)(i).pipe(hr())}));return Object(St.a)(i).pipe(hr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(St.a)(!0);const i=r.map(r=>Qt(()=>{const i=Dr(r,e,n);let o;if(function(t){return t&&ur(t.canActivate)}(i))o=on(i.canActivate(e,t));else{if(!ur(i))throw new Error("Invalid CanActivate guard");o=on(i(e,t))}return o.pipe(Ie())}));return Object(St.a)(i).pipe(hr())}(t,e.route,n))),Ie(t=>!0!==t,!0))}(r,o,t,e):Object(St.a)(n)),Object($t.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Se.a)(t=>{if(cr(t.guardsResult)){const e=Je(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Fe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),ae(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Re(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Wr(t=>{if(t.guards.canActivateChecks.length)return Object(St.a)(t).pipe(Object(Se.a)(t=>{const e=new Ue(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Yt(t=>{let n=!1;return Object(St.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(de.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(St.a)(t);let o=0;return Object(It.a)(n).pipe(pe(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(St.a)({});const o={};return Object(It.a)(i).pipe(Object(de.a)(i=>function(t,e,n,r){const i=Dr(t,e,r);return on(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Se.a)(t=>{o[i]=t}))),ge(1),Object(de.a)(()=>Object.keys(o).length===i.length?Object(St.a)(o):Wt.a))}(t._resolve,t,e,r).pipe(Object($t.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Fn(t,n).resolve),null)))}(t.route,e,r,i)),Object(Se.a)(()=>o++),ge(1),Object(de.a)(e=>o===n.length?Object(St.a)(t):Wt.a))})),Object(Se.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Re(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Se.a)(t=>{const e=new Ve(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Wr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object($t.a)(t=>{const e=function(t,e,n){const r=Gn(t,e._root,n?n._root:void 0);return new Dn(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Se.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object($t.a)(t=>(new or(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(Se.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Re(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new je(i))),le(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=cr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Re(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new De(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(wl){t.reject(wl)}}var i;return Wt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){dr(t),this.config=t.map(yr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Kn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Jn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return rn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Jn(n,e,r)}(n);if(o.toRoot())return Kn(e.root,new hn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Xn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Xn(t,t===e.root,0)}const r=Qn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Xn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?tr(s.segmentGroup,s.index,o.commands):Zn(s.segmentGroup,s.index,o.commands);return Kn(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=cr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Zm){e=this.malformedUriErrorHandler(Zm,this.urlSerializer,t)}return e}isActive(t,e){if(cr(t))return sn(this.currentUrlTree,t,e);const n=this.parseUrl(t);return sn(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.N),r.Mb(pn),r.Mb(Jr),r.Mb(w),r.Mb(r.s),r.Mb(r.x),r.Mb(r.i),r.Mb(void 0))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),ri=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new xt.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:oi(this.skipLocationChange),replaceUrl:oi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:oi(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(ni),r.Gb(Ln),r.Nb("tabindex"),r.Gb(r.E),r.Gb(r.l))},t.\u0275dir=r.Bb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Pb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.wb]}),t})(),ii=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new xt.a,this.subscription=t.events.subscribe(t=>{t instanceof ke&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:oi(this.skipLocationChange),replaceUrl:oi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:oi(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(ni),r.Gb(Ln),r.Gb(y))},t.\u0275dir=r.Bb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Pb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Lb("href",e.href,r.Yb),r.yb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.wb]}),t})();function oi(t){return""===t||!!t}let si=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||$e,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ai(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Jr),r.Gb(r.Q),r.Gb(r.j),r.Nb("name"),r.Gb(r.h))},t.\u0275dir=r.Bb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ai{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Ln?this.route:t===Jr?this.childContexts:this.parent.get(t,e)}}class ui{}class ci{preload(t,e){return Object(St.a)(null)}}let li=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Kr(e,n,e=>t.triggerEvent(new qe(e)),e=>t.triggerEvent(new He(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(ae(t=>t instanceof ke),pe(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(It.a)(n).pipe(Object(zt.a)(),Object($t.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(de.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ni),r.Mb(r.x),r.Mb(r.i),r.Mb(r.s),r.Mb(ui))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),hi=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Pe?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ke&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qe&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Qe(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ni),r.Mb($),r.Mb(void 0))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const fi=new r.r("ROUTER_CONFIGURATION"),di=new r.r("ROUTER_FORROOT_GUARD"),pi=[w,{provide:pn,useClass:gn},{provide:ni,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new ni(null,t,e,n,r,i,s,en(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[pn,Jr,w,r.s,r.x,r.i,$r,fi,[class{},new r.B],[class{},new r.B]]},Jr,{provide:Ln,useFactory:function(t){return t.routerState.root},deps:[ni]},{provide:r.x,useClass:r.K},li,ci,class{preload(t,e){return e().pipe(le(()=>Object(St.a)(null)))}},{provide:fi,useValue:{enableTracing:!1}}];function gi(){return new r.z("Router",ni)}let yi=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[pi,_i(e),{provide:di,useFactory:bi,deps:[[ni,new r.B,new r.J]]},{provide:fi,useValue:n||{}},{provide:y,useFactory:mi,deps:[a,[new r.p(m),new r.B],fi]},{provide:hi,useFactory:vi,deps:[ni,$,fi]},{provide:ui,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ci},{provide:r.z,multi:!0,useFactory:gi},[wi,{provide:r.d,multi:!0,useFactory:Ei,deps:[wi]},{provide:Ci,useFactory:Oi,deps:[wi]},{provide:r.b,multi:!0,useExisting:Ci}]]}}static forChild(e){return{ngModule:t,providers:[_i(e)]}}}return t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({factory:function(e){return new(e||t)(r.Mb(di,8),r.Mb(ni,8))}}),t})();function vi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new hi(t,e,n)}function mi(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function bi(t){return"guarded"}function _i(t){return[{provide:r.a,multi:!0,useValue:t},{provide:$r,multi:!0,useValue:t}]}let wi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new xt.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ni),r=this.injector.get(fi);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(St.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(fi),n=this.injector.get(li),i=this.injector.get(hi),o=this.injector.get(ni),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();function Ei(t){return t.appInitializer.bind(t)}function Oi(t){return t.bootstrapListener.bind(t)}const Ci=new r.r("Router Initializer");var Ti=n("D0XW");function Ii(){return t=>t.lift(new Si)}class Si{call(t,e){return e.subscribe(new xi(t))}}class xi extends kt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function ji(t,e){return n=>n.lift(new Ni(t,e))}class Ni{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ai(t,this.compare,this.keySelector))}}class Ai extends kt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Pi=n("pxpQ"),ki=n("spgP"),Ri=n("Jgta"),Di=n("zIRd"),Mi=n("q/0M"),Li=n("qOnz"),Fi=function(t,e){return(Fi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ui(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Vi,qi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Hi=Hi||{},Bi=qi||self;function zi(){}function Gi(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Wi(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Qi="closure_uid_"+(1e9*Math.random()>>>0),$i=0;function Ki(t,e,n){return t.call.apply(t.bind,arguments)}function Yi(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ji(t,e,n){return(Ji=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ki:Yi).apply(null,arguments)}function Xi(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Zi(){return Date.now()}function to(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function eo(){this.j=this.j,this.i=this.i}eo.prototype.j=!1,eo.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Qi)&&t[Qi]||(t[Qi]=++$i)}(this)},eo.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var no=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ro=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function io(t){return Array.prototype.concat.apply([],arguments)}function oo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function so(t){return/^[\s\xa0]*$/.test(t)}var ao,uo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function co(t,e){return-1!=t.indexOf(e)}function lo(t,e){return t<e?-1:t>e?1:0}t:{var ho=Bi.navigator;if(ho){var fo=ho.userAgent;if(fo){ao=fo;break t}}ao=""}function po(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function go(t){var e={};for(var n in t)e[n]=t[n];return e}var yo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vo(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yo.length;o++)n=yo[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mo(t){return mo[" "](t),t}mo[" "]=zi;var bo,_o,wo=co(ao,"Opera"),Eo=co(ao,"Trident")||co(ao,"MSIE"),Oo=co(ao,"Edge"),Co=Oo||Eo,To=co(ao,"Gecko")&&!(co(ao.toLowerCase(),"webkit")&&!co(ao,"Edge"))&&!(co(ao,"Trident")||co(ao,"MSIE"))&&!co(ao,"Edge"),Io=co(ao.toLowerCase(),"webkit")&&!co(ao,"Edge");function So(){var t=Bi.document;return t?t.documentMode:void 0}t:{var xo="",jo=(_o=ao,To?/rv:([^\);]+)(\)|;)/.exec(_o):Oo?/Edge\/([\d\.]+)/.exec(_o):Eo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(_o):Io?/WebKit\/(\S+)/.exec(_o):wo?/(?:Version)[ \/]?(\S+)/.exec(_o):void 0);if(jo&&(xo=jo?jo[1]:""),Eo){var No=So();if(null!=No&&No>parseFloat(xo)){bo=String(No);break t}}bo=xo}var Ao={};function Po(t){return function(t,e){var n=Ao;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=uo(String(bo)).split("."),r=uo(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=lo(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||lo(0==s[2].length,0==a[2].length)||lo(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var ko=Bi.document&&Eo&&(So()||parseInt(bo,10))||void 0,Ro=!Eo||9<=Number(ko),Do=Eo&&!Po("9"),Mo=function(){if(!Bi.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Bi.addEventListener("test",zi,e),Bi.removeEventListener("test",zi,e)}catch(n){}return t}();function Lo(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Fo(t,e){if(Lo.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(To){t:{try{mo(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Uo[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Lo.prototype.b=function(){this.defaultPrevented=!0},to(Fo,Lo);var Uo={2:"touch",3:"pen",4:"mouse"};Fo.prototype.b=function(){Fo.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Do)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Vo="closure_listenable_"+(1e6*Math.random()|0),qo=0;function Ho(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++qo,this.Y=this.Z=!1}function Bo(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function zo(t){this.src=t,this.a={},this.b=0}function Go(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=no(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Bo(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Wo(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}zo.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Wo(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ho(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Qo="closure_lm_"+(1e6*Math.random()|0),$o={};function Ko(t,e,n,r,i){if(r&&r.once)return Jo(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ko(t,e[o],n,r,i);return null}return n=os(n),t&&t[Vo]?t.va(e,n,Wi(r)?!!r.capture:!!r,i):Yo(t,e,n,!1,r,i)}function Yo(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Wi(i)?!!i.capture:!!i;if(s&&!Ro)return null;var a=rs(t);if(a||(t[Qo]=a=new zo(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=ns,e=Ro?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Mo||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ts(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Jo(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Jo(t,e[o],n,r,i);return null}return n=os(n),t&&t[Vo]?t.wa(e,n,Wi(r)?!!r.capture:!!r,i):Yo(t,e,n,!0,r,i)}function Xo(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Xo(t,e[o],n,r,i);else r=Wi(r)?!!r.capture:!!r,n=os(n),t&&t[Vo]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Wo(o=t.a[e],n,r,i))&&(Bo(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=rs(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Wo(e,n,r,i)),(n=-1<t?e[t]:null)&&Zo(n))}function Zo(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Vo])Go(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ts(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=rs(e))?(Go(n,t),0==n.b&&(n.src=null,e[Qo]=null)):Bo(t)}}}function ts(t){return t in $o?$o[t]:$o[t]="on"+t}function es(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Zo(t),n.call(r,e)}function ns(t,e){if(t.Y)return!0;if(!Ro){if(!e)t:{e=["window","event"];for(var n=Bi,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return es(t,e=new Fo(e,this))}return es(t,new Fo(e,this))}function rs(t){return(t=t[Qo])instanceof zo?t:null}var is="__closure_events_fn_"+(1e9*Math.random()>>>0);function os(t){return"function"==typeof t?t:(t[is]||(t[is]=function(e){return t.handleEvent(e)}),t[is])}function ss(){eo.call(this),this.c=new zo(this),this.J=this,this.C=null}function as(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Lo(e,t);else if(e instanceof Lo)e.target=e.target||t;else{var i=e;vo(e=new Lo(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=us(s,r,!0,e)&&i}if(i=us(s=e.a=t,r,!0,e)&&i,i=us(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=us(s=e.a=n[o],r,!1,e)&&i}function us(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Go(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}to(ss,eo),ss.prototype[Vo]=!0,(Vi=ss.prototype).addEventListener=function(t,e,n,r){Ko(this,t,e,n,r)},Vi.removeEventListener=function(t,e,n,r){Xo(this,t,e,n,r)},Vi.G=function(){if(ss.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Bo(n[r]);delete e.a[t],e.b--}}this.C=null},Vi.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Vi.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var cs=Bi.JSON.stringify;function ls(){this.b=this.a=null}var hs,fs=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ps},function(t){t.reset()});function ds(){var t=ms,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ps(){this.next=this.b=this.a=null}function gs(t){Bi.setTimeout(function(){throw t},0)}function ys(t,e){hs||function(){var t=Bi.Promise.resolve(void 0);hs=function(){t.then(bs)}}(),vs||(hs(),vs=!0),ms.add(t,e)}ls.prototype.add=function(t,e){var n=fs.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ps.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ps.prototype.reset=function(){this.next=this.b=this.a=null};var vs=!1,ms=new ls;function bs(){for(var t;t=ds();){try{t.a.call(t.b)}catch(n){gs(n)}var e=fs;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}vs=!1}function _s(t,e){ss.call(this),this.b=t||1,this.a=e||Bi,this.f=Ji(this.Za,this),this.g=Zi()}function ws(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Es(t,e,n){if("function"==typeof t)n&&(t=Ji(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ji(t.handleEvent,t)}return 2147483647<Number(e)?-1:Bi.setTimeout(t,e||0)}function Os(t){t.a=Es(function(){t.a=null,t.c&&(t.c=!1,Os(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}to(_s,ss),(Vi=_s.prototype).aa=!1,Vi.M=null,Vi.Za=function(){if(this.aa){var t=Zi()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),as(this,"tick"),this.aa&&(ws(this),this.start()))}},Vi.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Zi())},Vi.G=function(){_s.X.G.call(this),ws(this),delete this.a};var Cs=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Fi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Os(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Bi.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(eo);function Ts(t){eo.call(this),this.b=t,this.a={}}to(Ts,eo);var Is=[];function Ss(t,e,n,r){Array.isArray(n)||(n&&(Is[0]=n.toString()),n=Is);for(var i=0;i<n.length;i++){var o=Ko(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function xs(t){po(t.a,function(t,e){this.a.hasOwnProperty(e)&&Zo(t)},t),t.a={}}function js(){this.a=!0}function Ns(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return cs(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Ts.prototype.G=function(){Ts.X.G.call(this),xs(this)},Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},js.prototype.info=function(){};var As={},Ps=null;function ks(){return Ps=Ps||new ss}function Rs(t){Lo.call(this,As.Fa,t)}function Ds(t){var e=ks();as(e,new Rs(e,t))}function Ms(t,e){Lo.call(this,As.STAT_EVENT,t),this.stat=e}function Ls(t){var e=ks();as(e,new Ms(e,t))}function Fs(t){Lo.call(this,As.Ga,t)}function Us(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Bi.setTimeout(function(){t()},e)}As.Fa="serverreachability",to(Rs,Lo),As.STAT_EVENT="statevent",to(Ms,Lo),As.Ga="timingevent",to(Fs,Lo);var Vs={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},qs={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Hs(){}function Bs(){}Hs.prototype.a=null;var zs,Gs={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ws(){Lo.call(this,"d")}function Qs(){Lo.call(this,"c")}function $s(){}function Ks(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ts(this),this.P=Ys,this.R=new _s(t=Co?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}to(Ws,Lo),to(Qs,Lo),to($s,Hs),zs=new $s;var Ys=45e3,Js={},Xs={};function Zs(t,e,n){t.H=1,t.i=wa(ga(e)),t.j=n,t.I=!0,ta(t,null)}function ta(t,e){t.u=Zi(),ra(t),t.l=ga(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Ra(n.b,"t",r),t.D=0,t.a=xu(t.g,t.g.C?e:null),0<t.O&&(t.F=new Cs(Ji(t.Ca,t,t.a),t.O)),Ss(t.J,t.a,"readystatechange",t.Xa),e=t.B?go(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ds(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function ea(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=na(t,n);if(i==Xs){4==e&&(t.h=4,Ls(14),r=!1),Ns(t.c,t.f,null,"[Incomplete Response]");break}if(i==Js){t.h=4,Ls(15),Ns(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ns(t.c,t.f,i,null),ua(t,i)}4==e&&0==n.length&&(t.h=1,Ls(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),_u(e),e.F=!0,Ls(11))):(Ns(t.c,t.f,n,"[Invalid Chunked Response]"),aa(t),sa(t))}function na(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Xs:(n=Number(e.substring(n,r)),isNaN(n)?Js:(r+=1)+n>e.length?Xs:(e=e.substr(r,n),t.D=r+n,e))}function ra(t){t.T=Zi()+t.P,ia(t,t.P)}function ia(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Us(Ji(t.Va,t),e)}function oa(t){t.o&&(Bi.clearTimeout(t.o),t.o=null)}function sa(t){0==t.g.v||t.A||Ou(t.g,t)}function aa(t){oa(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ws(t.R),xs(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ua(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||qa(n.b,t)))if(n.I=t.N,!t.C&&qa(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(fm){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Eu(n),hu(n)}bu(n),Ls(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Us(Ji(n.Sa,n),6e3));if(1>=Va(n.b)&&n.ea){try{n.ea()}catch(fm){}n.ea=void 0}}else Tu(n,11)}else if((t.C||n.a==t)&&Eu(n),!so(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(co(l,"spdy")||co(l,"quic")||co(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Ha(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,_a(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Zi()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Su(u,u.C?u.ga:null,u.fa),d.C){Ba(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(oa(p),ra(p)),u.a=d}else mu(u);0<n.g.length&&pu(n)}else"stop"!=i[0]&&"close"!=i[0]||Tu(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Tu(n,7):lu(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ds(4)}catch(fm){}}function ca(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Gi(t)||"string"==typeof t)ro(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Gi(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Gi(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function la(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof la)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ha(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];fa(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)fa(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function fa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Vi=Ks.prototype).setTimeout=function(t){this.P=t},Vi.Xa=function(t){t=t.target;var e=this.F;e&&3==su(t)?e.f():this.Ca(t)},Vi.Ca=function(t){try{if(t==this.a)t:{var e=su(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Co&&!this.a.$())){this.A||4!=e||7==n||Ds(8==n||0>=r?3:2),oa(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!so(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Ls(12),aa(this),sa(this);break t}Ns(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ua(this,u)}this.I?(ea(this,e,o),Co&&this.b&&3==e&&(Ss(this.J,this.R,"tick",this.Wa),this.R.start())):(Ns(this.c,this.f,o,null),ua(this,o)),4==e&&aa(this),this.b&&!this.A&&(4==e?Ou(this.g,this):(this.b=!1,ra(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Ls(12)):(this.h=0,Ls(13)),aa(this),sa(this)}}}catch(c){}},Vi.Wa=function(){if(this.a){var t=su(this.a),e=this.a.$();this.D<e.length&&(oa(this),ea(this,t,e),this.b&&4!=t&&ra(this))}},Vi.cancel=function(){this.A=!0,aa(this)},Vi.Va=function(){this.o=null;var t=Zi();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Ds(3),Ls(17)),aa(this),this.h=2,sa(this)):ia(this,this.T-t)},(Vi=la.prototype).K=function(){ha(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Vi.L=function(){return ha(this),this.a.concat()},Vi.get=function(t,e){return fa(this.b,t)?this.b[t]:e},Vi.set=function(t,e){fa(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Vi.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var da=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pa(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof pa){this.a=void 0!==e?e:t.a,ya(this,t.f),this.j=t.j,va(this,t.c),ma(this,t.h),this.g=t.g,e=t.b;var n=new Na;n.c=e.c,e.a&&(n.a=new la(e.a),n.b=e.b),ba(this,n),this.i=t.i}else t&&(n=String(t).match(da))?(this.a=!!e,ya(this,n[1]||"",!0),this.j=Ea(n[2]||""),va(this,n[3]||"",!0),ma(this,n[4]),this.g=Ea(n[5]||"",!0),ba(this,n[6]||"",!0),this.i=Ea(n[7]||"")):(this.a=!!e,this.b=new Na(null,this.a))}function ga(t){return new pa(t)}function ya(t,e,n){t.f=n?Ea(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function va(t,e,n){t.c=n?Ea(e,!0):e}function ma(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ba(t,e,n){e instanceof Na?(t.b=e,function(t,e){e&&!t.f&&(Aa(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Pa(this,e),Ra(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Oa(e,xa)),t.b=new Na(e,t.a))}function _a(t,e,n){t.b.set(e,n)}function wa(t){return _a(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Zi()).toString(36)),t}function Ea(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Oa(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ca),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ca(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}pa.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Oa(e,Ta,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Oa(e,Ta,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Oa(n,"/"==n.charAt(0)?Sa:Ia,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Oa(n,ja)),t.join("")};var Ta=/[#\/\?@]/g,Ia=/[#\?:]/g,Sa=/[#\?]/g,xa=/[#\?@]/g,ja=/#/g;function Na(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Aa(t){t.a||(t.a=new la,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Pa(t,e){Aa(t),e=Da(t,e),fa(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,fa((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ha(t)))}function ka(t,e){return Aa(t),e=Da(t,e),fa(t.a.b,e)}function Ra(t,e,n){Pa(t,e),0<n.length&&(t.c=null,t.a.set(Da(t,e),oo(n)),t.b+=n.length)}function Da(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Vi=Na.prototype).add=function(t,e){Aa(this),this.c=null,t=Da(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Vi.forEach=function(t,e){Aa(this),this.a.forEach(function(n,r){ro(n,function(n){t.call(e,n,r,this)},this)},this)},Vi.L=function(){Aa(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Vi.K=function(t){Aa(this);var e=[];if("string"==typeof t)ka(this,t)&&(e=io(e,this.a.get(Da(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=io(e,t[n])}return e},Vi.set=function(t,e){return Aa(this),this.c=null,ka(this,t=Da(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Vi.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Vi.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ma=function(){return function(t,e){this.b=t,this.a=e}}();function La(t){this.g=t||Fa,t=Bi.PerformanceNavigationTiming?0<(t=Bi.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Bi.ia&&Bi.ia.ya&&Bi.ia.ya()&&Bi.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Fa=10;function Ua(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Va(t){return t.b?1:t.a?t.a.size:0}function qa(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Ha(t,e){t.a?t.a.add(e):t.b=e}function Ba(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function za(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ui(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return oo(t.c)}function Ga(){}function Wa(){this.a=new Ga}function Qa(t,e,n){var r=n||"";try{ca(t,function(t,n){var i=t;Wi(t)&&(i=cs(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Zm){throw e.push(r+"type="+encodeURIComponent("_badmap")),Zm}}function $a(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}La.prototype.cancel=function(){var t,e;if(this.c=za(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ui(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ga.prototype.stringify=function(t){return Bi.JSON.stringify(t,void 0)},Ga.prototype.parse=function(t){return Bi.JSON.parse(t,void 0)};var Ka=Bi.JSON.parse;function Ya(t){ss.call(this),this.headers=new la,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ja,this.D=this.F=!1}to(Ya,ss);var Ja="",Xa=/^https?$/i,Za=["POST","PUT"];function tu(t){return"content-type"==t.toLowerCase()}function eu(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,nu(t),iu(t)}function nu(t){t.u||(t.u=!0,as(t,"complete"),as(t,"error"))}function ru(t){if(t.b&&void 0!==Hi&&(!t.s[1]||4!=su(t)||2!=t.W()))if(t.l&&4==su(t))Es(t.za,0,t);else if(as(t,"readystatechange"),4==su(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(da)[1]||null;if(!o&&Bi.self&&Bi.self.location){var s=Bi.self.location.protocol;o=s.substr(0,s.length-1)}i=!Xa.test(o?o.toLowerCase():"")}e=i}if(e)as(t,"complete"),as(t,"success");else{t.h=6;try{var a=2<su(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",nu(t)}}finally{iu(t)}}}function iu(t,e){if(t.a){ou(t);var n=t.a,r=t.s[0]?zi:null;t.a=null,t.s=null,e||as(t,"ready");try{n.onreadystatechange=r}catch(Zm){}}}function ou(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Bi.clearTimeout(t.m),t.m=null)}function su(t){return t.a?t.a.readyState:0}function au(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return po(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):_a(t,e,n))}function uu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function cu(t){this.pa=0,this.g=[],this.c=new js,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=uu("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=uu("baseRetryDelayMs",5e3,t),this.Ra=uu("retryDelaySeedMs",1e4,t),this.Ma=uu("forwardChannelMaxRetries",2,t),this.ma=uu("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new La(t&&t.concurrentRequestLimit),this.ka=new Wa,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function lu(t){if(fu(t),3==t.v){var e=t.R++,n=ga(t.B);_a(n,"SID",t.J),_a(n,"RID",e),_a(n,"TYPE","terminate"),yu(t,n),(e=new Ks(t,t.c,e,void 0)).H=2,e.i=wa(ga(n)),n=!1,Bi.navigator&&Bi.navigator.sendBeacon&&(n=Bi.navigator.sendBeacon(e.i.toString(),"")),!n&&Bi.Image&&((new Image).src=e.i,n=!0),n||(e.a=xu(e.g,null),e.a.ba(e.i)),e.u=Zi(),ra(e)}Iu(t)}function hu(t){t.a&&(_u(t),t.a.cancel(),t.a=null)}function fu(t){hu(t),t.j&&(Bi.clearTimeout(t.j),t.j=null),Eu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Bi.clearTimeout(t.h),t.h=null)}function du(t,e){t.g.push(new Ma(t.Oa++,e)),3==t.v&&pu(t)}function pu(t){Ua(t.b)||t.h||(t.h=!0,ys(t.Ba,t),t.u=0)}function gu(t,e){var n;n=e?e.f:t.R++;var r=ga(t.B);_a(r,"SID",t.J),_a(r,"RID",n),_a(r,"AID",t.P),yu(t,r),t.i&&t.l&&au(r,t.i,t.l),n=new Ks(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=vu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ha(t.b,n),Zs(n,r,e)}function yu(t,e){t.f&&ca({},function(t,n){_a(e,n,t)})}function vu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Ji(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Qa(l,s,"req"+c+"_")}catch(lc){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function mu(t){t.a||t.j||(t.T=1,ys(t.Aa,t),t.o=0)}function bu(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Us(Ji(t.Aa,t),Cu(t,t.o)),t.o++,0))}function _u(t){null!=t.s&&(Bi.clearTimeout(t.s),t.s=null)}function wu(t){t.a=new Ks(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=ga(t.la);_a(e,"RID","rpc"),_a(e,"SID",t.J),_a(e,"CI",t.H?"0":"1"),_a(e,"AID",t.P),yu(t,e),_a(e,"TYPE","xmlhttp"),t.i&&t.l&&au(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=wa(ga(e)),n.j=null,n.I=!0,ta(n,t)}function Eu(t){null!=t.m&&(Bi.clearTimeout(t.m),t.m=null)}function Ou(t,e){var n=null;if(t.a==e){Eu(t),_u(t),t.a=null;var r=2}else{if(!qa(t.b,e))return;n=e.s,Ba(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Zi()-e.u;var i=t.u;as(r=ks(),new Fs(r,n,e,i)),pu(t)}else mu(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Va(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Us(Ji(t.Ba,t,e),Cu(t,t.u)),t.u++,0)))}(t,e)||2==r&&bu(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Tu(t,5);break;case 4:Tu(t,10);break;case 3:Tu(t,6);break;default:Tu(t,2)}}function Cu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Tu(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Ji(t.Ya,t);n||(n=new pa("//www.google.com/images/cleardot.gif"),Bi.location&&"http"==Bi.location.protocol||ya(n,"https"),wa(n)),function(t,e){var n=new js;if(Bi.Image){var r=new Image;r.onload=Xi($a,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Xi($a,n,r,"TestLoadImage: error",!1,e),r.onabort=Xi($a,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xi($a,n,r,"TestLoadImage: timeout",!1,e),Bi.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ls(2);t.v=0,t.f&&t.f.ra(e),Iu(t),fu(t)}function Iu(t){t.v=0,t.I=-1,t.f&&(0==za(t.b).length&&0==t.g.length||(t.b.c.length=0,oo(t.g),t.g.length=0),t.f.qa())}function Su(t,e,n){var r=function(t){return t instanceof pa?ga(t):new pa(t,void 0)}(n);if(""!=r.c)e&&va(r,e+"."+r.c),ma(r,r.h);else{var i=Bi.location;r=function(t,e,n,r){var i=new pa(null,void 0);return t&&ya(i,t),e&&va(i,e),n&&ma(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&po(t.V,function(t,e){_a(r,e,t)}),n=t.na,(e=t.A)&&n&&_a(r,e,n),_a(r,"VER",t.ha),yu(t,r),r}function xu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ya(t.Na)).F=t.C,e}function ju(){}function Nu(){if(Eo&&!(10<=Number(ko)))throw Error("Environmental error: no available transport.")}function Au(t,e){ss.call(this),this.a=new cu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!so(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!so(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Ru(this)}function Pu(t){Ws.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ku(){Qs.call(this),this.status=1}function Ru(t){this.a=t}(Vi=Ya.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:zs),this.a.onreadystatechange=Ji(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void eu(this,o)}t=n||"";var i=new la(this.headers);r&&ca(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=tu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Bi.FormData&&t instanceof Bi.FormData,!(0<=no(Za,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ou(this),0<this.o&&((this.D=function(t){return Eo&&Po(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Ji(this.xa,this)):this.m=Es(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){eu(this,o)}},Vi.xa=function(){void 0!==Hi&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,as(this,"timeout"),this.abort(8))},Vi.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,as(this,"complete"),as(this,"abort"),iu(this))},Vi.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),iu(this,!0)),Ya.X.G.call(this)},Vi.za=function(){this.j||(this.A||this.l||this.g?ru(this):this.Ua())},Vi.Ua=function(){ru(this)},Vi.W=function(){try{return 2<su(this)?this.a.status:-1}catch(_o){return-1}},Vi.$=function(){try{return this.a?this.a.responseText:""}catch(_o){return""}},Vi.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ka(e)}},Vi.ua=function(){return this.h},Vi.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Vi=cu.prototype).ha=8,Vi.v=1,Vi.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ks(this,this.c,t,void 0),r=this.l;if(this.O&&(r?vo(r=go(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=vu(this,n,e),_a(i=ga(this.B),"RID",t),_a(i,"CVER",22),this.A&&_a(i,"X-HTTP-Session-Id",this.A),yu(this,i),this.i&&r&&au(i,this.i,r),Ha(this.b,n),this.Ia&&_a(i,"TYPE","init"),this.da?(_a(i,"$req",e),_a(i,"SID","null"),n.U=!0,Zs(n,i,null)):Zs(n,i,e),this.v=2}}else 3==this.v&&(t?gu(this,t):0==this.g.length||Ua(this.b)||gu(this))},Vi.Aa=function(){if(this.j=null,wu(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Us(Ji(this.Ta,this),t)}},Vi.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Ls(10),hu(this),wu(this))},Vi.Sa=function(){null!=this.m&&(this.m=null,hu(this),bu(this),Ls(19))},Vi.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Ls(2)):(this.c.info("Failed to ping google.com"),Ls(1))},(Vi=ju.prototype).ta=function(){},Vi.sa=function(){},Vi.ra=function(){},Vi.qa=function(){},Vi.Ja=function(){},Nu.prototype.a=function(t,e){return new Au(t,e)},to(Au,ss),Au.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Ls(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Su(t,null,t.fa),pu(t)},Au.prototype.close=function(){lu(this.a)},Au.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,du(this.a,e)}else this.l?((e={}).__data__=cs(t),du(this.a,e)):du(this.a,t)},Au.prototype.G=function(){this.a.f=null,delete this.f,lu(this.a),delete this.a,Au.X.G.call(this)},to(Pu,Ws),to(ku,Qs),to(Ru,ju),Ru.prototype.ta=function(){as(this.a,"a")},Ru.prototype.sa=function(t){as(this.a,new Pu(t))},Ru.prototype.ra=function(t){as(this.a,new ku(t))},Ru.prototype.qa=function(){as(this.a,"b")},Nu.prototype.createWebChannel=Nu.prototype.a,Au.prototype.send=Au.prototype.h,Au.prototype.open=Au.prototype.g,Au.prototype.close=Au.prototype.close,Vs.NO_ERROR=0,Vs.TIMEOUT=8,Vs.HTTP_ERROR=6,qs.COMPLETE="complete",Bs.EventType=Gs,Gs.OPEN="a",Gs.CLOSE="b",Gs.ERROR="c",Gs.MESSAGE="d",ss.prototype.listen=ss.prototype.va,Ya.prototype.listenOnce=Ya.prototype.wa,Ya.prototype.getLastError=Ya.prototype.Qa,Ya.prototype.getLastErrorCode=Ya.prototype.ua,Ya.prototype.getStatus=Ya.prototype.W,Ya.prototype.getResponseJson=Ya.prototype.Pa,Ya.prototype.getResponseText=Ya.prototype.$,Ya.prototype.send=Ya.prototype.ba;var Du=Vs,Mu=qs,Lu=As,Fu=Bs,Uu=Ya,Vu=n("os0x"),qu=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Hu=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Bu=new Mi.b("@firebase/firestore");function zu(){return Bu.logLevel}function Gu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Bu.logLevel<=Mi.a.DEBUG){var r=e.map($u);Bu.debug.apply(Bu,Object(Vu.g)(["Firestore (8.2.7): "+t],r))}}function Wu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Bu.logLevel<=Mi.a.ERROR){var r=e.map($u);Bu.error.apply(Bu,Object(Vu.g)(["Firestore (8.2.7): "+t],r))}}function Qu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Bu.logLevel<=Mi.a.WARN){var r=e.map($u);Bu.warn.apply(Bu,Object(Vu.g)(["Firestore (8.2.7): "+t],r))}}function $u(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Zm){return t}}function Ku(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.7) INTERNAL ASSERTION FAILED: "+t;throw Wu(e),new Error(e)}function Yu(t,e){t||Ku()}function Ju(t,e){return t}function Xu(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Zu=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Xu(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function tc(t,e){return t<e?-1:t>e?1:0}function ec(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function nc(t){return t+"\0"}var rc=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.h)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return tc(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();rc.T=new rc("");var ic={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},oc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Vu.c)(e,t),e}(Error),sc=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(rc.fromBase64String(e))}catch(e){throw new oc(ic.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(rc.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),ac=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();ac.UNAUTHENTICATED=new ac(null),ac.R=new ac("google-credentials-uid"),ac.P=new ac("first-party-uid");var uc=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},cc=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(ac.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),lc=function(){function t(t){var e=this;this.D=null,this.currentUser=ac.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.N!==e?(Gu("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Yu("string"==typeof n.accessToken),new uc(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return Yu(null===t||"string"==typeof t),new ac(t)},t}(),hc=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=ac.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),fc=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new hc(this.F,this.O))},t.prototype.v=function(t){t(ac.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),dc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();dc.q=-1;var pc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new oc(ic.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new oc(ic.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new oc(ic.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new oc(ic.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?tc(this.nanoseconds,t.nanoseconds):tc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),gc=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new pc(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),yc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ku(),void 0===n?n=t.length-e:n>t.length-e&&Ku(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return this.J(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),vc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vu.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new oc(ic.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.ct=function(){return new e([])},e}(yc),mc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vu.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return mc.test(t)},e.prototype.rt=function(){return this.it().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new oc(ic.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new oc(ic.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new oc(ic.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new oc(ic.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(yc),_c=function(){function t(t){this.path=t}return t._t=function(e){return new t(vc.ot(e))},t.ft=function(e){return new t(vc.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===vc.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return vc.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new vc(e.slice()))},t}();function wc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ec(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Oc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Cc=function(){function t(t){this.fields=t,t.sort(bc.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return ec(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Tc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ic(t){if(Yu(!!t),"string"==typeof t){var e=0,n=Tc.exec(t);if(Yu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Sc(t.seconds),nanos:Sc(t.nanos)}}function Sc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function xc(t){return"string"==typeof t?rc.fromBase64String(t):rc.fromUint8Array(t)}function jc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Nc(t){var e=t.mapValue.fields.__previous_value__;return jc(e)?Nc(e):e}function Ac(t){var e=Ic(t.mapValue.fields.__local_write_time__.timestampValue);return new pc(e.seconds,e.nanos)}function Pc(t){return null==t}function kc(t){return 0===t&&1/t==-1/0}function Rc(t){return"number"==typeof t&&Number.isInteger(t)&&!kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Dc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jc(t)?4:10:Ku()}function Mc(t,e){var n=Dc(t);if(n!==Dc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ac(t).isEqual(Ac(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ic(t.timestampValue),r=Ic(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return xc(t.bytesValue).isEqual(xc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Sc(t.geoPointValue.latitude)===Sc(e.geoPointValue.latitude)&&Sc(t.geoPointValue.longitude)===Sc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Sc(t.integerValue)===Sc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Sc(t.doubleValue),r=Sc(e.doubleValue);return n===r?kc(n)===kc(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ec(t.arrayValue.values||[],e.arrayValue.values||[],Mc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(wc(n)!==wc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Mc(n[i],r[i])))return!1;return!0}(t,e);default:return Ku()}}function Lc(t,e){return void 0!==(t.values||[]).find(function(t){return Mc(t,e)})}function Fc(t,e){var n=Dc(t),r=Dc(e);if(n!==r)return tc(n,r);switch(n){case 0:return 0;case 1:return tc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Sc(t.integerValue||t.doubleValue),r=Sc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Uc(t.timestampValue,e.timestampValue);case 4:return Uc(Ac(t),Ac(e));case 5:return tc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=xc(t),r=xc(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=tc(n[i],r[i]);if(0!==o)return o}return tc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=tc(Sc(t.latitude),Sc(e.latitude));return 0!==n?n:tc(Sc(t.longitude),Sc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Fc(n[i],r[i]);if(o)return o}return tc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=tc(r[s],o[s]);if(0!==a)return a;var u=Fc(n[r[s]],i[o[s]]);if(0!==u)return u}return tc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ku()}}function Uc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return tc(t,e);var n=Ic(t),r=Ic(e),i=tc(n.seconds,r.seconds);return 0!==i?i:tc(n.nanos,r.nanos)}function Vc(t){return qc(t)}function qc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Ic(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?xc(t.bytesValue).toBase64():"referenceValue"in t?_c.ft(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=qc(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+qc(t.fields[o])}return e+"}"}(t.mapValue):Ku();var e}function Hc(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function Bc(t){return!!t&&"integerValue"in t}function zc(t){return!!t&&"arrayValue"in t}function Gc(t){return!!t&&"nullValue"in t}function Wc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qc(t){return!!t&&"mapValue"in t}var $c=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Qc(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return Mc(this.proto,t.proto)},t}(),Kc=function(){function t(t){void 0===t&&(t=$c.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Dc(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(bc.ct(),this.At);return null!=t?new $c(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=Qc(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Yc(t){var e=[];return Ec(t.fields||{},function(t,n){var r=new bc([t]);if(Qc(n)){var i=Yc(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Cc(e)}var Jc=function(t,e){this.key=t,this.version=e},Xc=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Vu.c)(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Jc),Zc=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Vu.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Jc),tl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vu.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Jc),el=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function nl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new el(t,e,n,r,i,o,s)}function rl(t){var e=Ju(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.rt()+t.op.toString()+Vc(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.rt()+t.dir}(t)}).join(","),Pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=yl(e.startAt)),e.endAt&&(n+="|ub:",n+=yl(e.endAt)),e.vt=n}return e.vt}function il(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ml(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Mc(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_l(t.startAt,e.startAt)&&_l(t.endAt,e.endAt)}function ol(t){return _c.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var sl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Vu.c)(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new al(t,n,r):"array-contains"===n?new hl(t,r):"in"===n?new fl(t,r):"not-in"===n?new dl(t,r):"array-contains-any"===n?new pl(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new ul(t,n):new cl(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(Fc(e,this.value)):null!==e&&Dc(this.value)===Dc(e)&&this.Dt(Fc(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ku()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),al=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=_c.ft(r.referenceValue),i}return Object(Vu.c)(e,t),e.prototype.matches=function(t){var e=_c.H(t.key,this.key);return this.Dt(e)},e}(sl),ul=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ll(0,n),r}return Object(Vu.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(sl),cl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ll(0,n),r}return Object(Vu.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(sl);function ll(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return _c.ft(t.referenceValue)})}var hl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Vu.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return zc(e)&&Lc(e.arrayValue,this.value)},e}(sl),fl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Vu.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Lc(this.value.arrayValue,e)},e}(sl),dl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Vu.c)(e,t),e.prototype.matches=function(t){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Lc(this.value.arrayValue,e)},e}(sl),pl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Vu.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!zc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Lc(e.value.arrayValue,t)})},e}(sl),gl=function(t,e){this.position=t,this.before=e};function yl(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Vc(t)}).join(",")}var vl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ml(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function bl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?_c.H(_c.ft(s.referenceValue),n.key):Fc(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function _l(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Mc(t.position[n],e.position[n]))return!1;return!0}var wl=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null};function El(t,e,n,r,i,o,s,a){return new wl(t,e,n,r,i,o,s,a)}function Ol(t){return new wl(t)}function Cl(t){return!Pc(t.limit)&&"F"===t.limitType}function Tl(t){return!Pc(t.limit)&&"L"===t.limitType}function Il(t){return t.xt.length>0?t.xt[0].field:null}function Sl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function xl(t){return null!==t.collectionGroup}function jl(t){var e=Ju(t);if(null===e.Nt){e.Nt=[];var n=Sl(e),r=Il(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new vl(n)),e.Nt.push(new vl(bc.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new vl(bc.ht(),u))}}}return e.Nt}function Nl(t){var e=Ju(t);if(!e.$t)if("F"===e.limitType)e.$t=nl(e.path,e.collectionGroup,jl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=jl(e);r<i.length;r++){var o=i[r];n.push(new vl(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new gl(e.endAt.position,!e.endAt.before):null,a=e.startAt?new gl(e.startAt.position,!e.startAt.before):null;e.$t=nl(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.$t}function Al(t,e,n){return new wl(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pl(t,e){return il(Nl(t),Nl(e))&&t.limitType===e.limitType}function kl(t){return rl(Nl(t))+"|lt:"+t.limitType}function Rl(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.rt()+" "+e.op+" "+Vc(e.value);var e}).join(", ")+"]"),Pc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+yl(t.startAt)),t.endAt&&(e+=", endAt: "+yl(t.endAt)),"Target("+e+")"}(Nl(t))+"; limitType="+t.limitType+")"}function Dl(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):_c.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!bl(t.startAt,jl(t),e)||t.endAt&&bl(t.endAt,jl(t),e))}(t,e)}function Ml(t){return function(e,n){for(var r=!1,i=0,o=jl(t);i<o.length;i++){var s=o[i],a=Ll(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function Ll(t,e,n){var r=t.field.ut()?_c.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Fc(r,i):Ku()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ku()}}var Fl=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=gc.min()),void 0===o&&(o=gc.min()),void 0===s&&(s=rc.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();function Ul(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kc(e)?"-0":e}}function Vl(t){return{integerValue:""+t}}function ql(t,e){return Rc(e)?Vl(e):Ul(t,e)}var Hl=function(){this.qt=void 0};function Bl(t,e,n){return t instanceof Wl?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ql?$l(t,e):t instanceof Kl?Yl(t,e):function(t,e){var n=Gl(t,e),r=Xl(n)+Xl(t.Ut);return Bc(n)&&Bc(t.Ut)?Vl(r):Ul(t.Qt,r)}(t,e)}function zl(t,e,n){return t instanceof Ql?$l(t,e):t instanceof Kl?Yl(t,e):n}function Gl(t,e){return t instanceof Jl?Bc(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Wl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vu.c)(e,t),e}(Hl),Ql=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Vu.c)(e,t),e}(Hl);function $l(t,e){for(var n=Zl(e),r=function(t){n.some(function(e){return Mc(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Kl=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Vu.c)(e,t),e}(Hl);function Yl(t,e){for(var n=Zl(e),r=function(t){n=n.filter(function(e){return!Mc(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Jl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Object(Vu.c)(e,t),e}(Hl);function Xl(t){return Sc(t.integerValue||t.doubleValue)}function Zl(t){return zc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var th=function(t,e){this.field=t,this.transform=e},eh=function(t,e){this.version=t,this.transformResults=e},nh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function rh(t,e){return void 0!==t.updateTime?e instanceof Xc&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Xc}var ih=function(){};function oh(t,e,n){return t instanceof lh?function(t,e,n){var r=t.value;if(n.transformResults){var i=dh(t.fieldTransforms,e,n.transformResults);r=gh(t.fieldTransforms,r,i)}return new Xc(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof hh?function(t,e,n){if(!rh(t.jt,e))return new tl(t.key,n.version);var r=fh(t,e,n.transformResults?dh(t.fieldTransforms,e,n.transformResults):[]);return new Xc(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Zc(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function sh(t,e,n){return t instanceof lh?function(t,e,n){if(!rh(t.jt,e))return e;var r=t.value,i=ph(t.fieldTransforms,n,e);r=gh(t.fieldTransforms,r,i);var o=ch(e);return new Xc(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof hh?function(t,e,n){if(!rh(t.jt,e))return e;var r=ch(e),i=fh(t,e,ph(t.fieldTransforms,n,e));return new Xc(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return rh(t.jt,e)?new Zc(t.key,gc.min()):e}(t,e)}function ah(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Xc?e.field(o.field):void 0,a=Gl(o.transform,s||null);null!=a&&(n=null==n?(new Kc).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function uh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ec(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ql&&e instanceof Ql||t instanceof Kl&&e instanceof Kl?ec(t.elements,e.elements,Mc):t instanceof Jl&&e instanceof Jl?Mc(t.Ut,e.Ut):t instanceof Wl&&e instanceof Wl}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function ch(t){return t instanceof Xc?t.version:gc.min()}var lh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Object(Vu.c)(e,t),e}(ih),hh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Object(Vu.c)(e,t),e}(ih);function fh(t,e,n){var r;return r=function(t,e){var n=new Kc(e);return t.Gt.fields.forEach(function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.Pt()}(t,r=e instanceof Xc?e.data():$c.empty()),gh(t.fieldTransforms,r,n)}function dh(t,e,n){var r=[];Yu(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Xc&&(a=e.field(o.field)),r.push(zl(s,a,n[i]))}return r}function ph(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Xc&&(u=n.field(s.field)),r.push(Bl(a,u,e))}return r}function gh(t,e,n){for(var r=new Kc(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.Pt()}var yh,vh,mh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Object(Vu.c)(e,t),e}(ih),bh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Object(Vu.c)(e,t),e}(ih),_h=function(t){this.count=t};function wh(t){switch(t){case ic.OK:return Ku();case ic.CANCELLED:case ic.UNKNOWN:case ic.DEADLINE_EXCEEDED:case ic.RESOURCE_EXHAUSTED:case ic.INTERNAL:case ic.UNAVAILABLE:case ic.UNAUTHENTICATED:return!1;case ic.INVALID_ARGUMENT:case ic.NOT_FOUND:case ic.ALREADY_EXISTS:case ic.PERMISSION_DENIED:case ic.FAILED_PRECONDITION:case ic.ABORTED:case ic.OUT_OF_RANGE:case ic.UNIMPLEMENTED:case ic.DATA_LOSS:return!0;default:return Ku()}}function Eh(t){if(void 0===t)return Wu("GRPC error has no .code"),ic.UNKNOWN;switch(t){case yh.OK:return ic.OK;case yh.CANCELLED:return ic.CANCELLED;case yh.UNKNOWN:return ic.UNKNOWN;case yh.DEADLINE_EXCEEDED:return ic.DEADLINE_EXCEEDED;case yh.RESOURCE_EXHAUSTED:return ic.RESOURCE_EXHAUSTED;case yh.INTERNAL:return ic.INTERNAL;case yh.UNAVAILABLE:return ic.UNAVAILABLE;case yh.UNAUTHENTICATED:return ic.UNAUTHENTICATED;case yh.INVALID_ARGUMENT:return ic.INVALID_ARGUMENT;case yh.NOT_FOUND:return ic.NOT_FOUND;case yh.ALREADY_EXISTS:return ic.ALREADY_EXISTS;case yh.PERMISSION_DENIED:return ic.PERMISSION_DENIED;case yh.FAILED_PRECONDITION:return ic.FAILED_PRECONDITION;case yh.ABORTED:return ic.ABORTED;case yh.OUT_OF_RANGE:return ic.OUT_OF_RANGE;case yh.UNIMPLEMENTED:return ic.UNIMPLEMENTED;case yh.DATA_LOSS:return ic.DATA_LOSS;default:return Ku()}}(vh=yh||(yh={}))[vh.OK=0]="OK",vh[vh.CANCELLED=1]="CANCELLED",vh[vh.UNKNOWN=2]="UNKNOWN",vh[vh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vh[vh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vh[vh.NOT_FOUND=5]="NOT_FOUND",vh[vh.ALREADY_EXISTS=6]="ALREADY_EXISTS",vh[vh.PERMISSION_DENIED=7]="PERMISSION_DENIED",vh[vh.UNAUTHENTICATED=16]="UNAUTHENTICATED",vh[vh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vh[vh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vh[vh.ABORTED=10]="ABORTED",vh[vh.OUT_OF_RANGE=11]="OUT_OF_RANGE",vh[vh.UNIMPLEMENTED=12]="UNIMPLEMENTED",vh[vh.INTERNAL=13]="INTERNAL",vh[vh.UNAVAILABLE=14]="UNAVAILABLE",vh[vh.DATA_LOSS=15]="DATA_LOSS";var Oh=function(){function t(t,e){this.H=t,this.root=e||Th.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,Th.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,Th.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Xt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new Ch(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new Ch(this.root,t,this.H,!1)},t.prototype.ne=function(){return new Ch(this.root,null,this.H,!0)},t.prototype.se=function(t){return new Ch(this.root,t,this.H,!0)},t}(),Ch=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),Th=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw Ku();if(this.right.le())throw Ku();var t=this.left.Ie();if(t!==this.right.Ie())throw Ku();return t+(this.le()?0:1)},t}();Th.EMPTY=null,Th.RED=!0,Th.Ht=!1,Th.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ku()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ku()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ku()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ku()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ku()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new Th(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());var Ih=function(){function t(t){this.H=t,this.data=new Oh(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt(function(e,n){return t(e),!1})},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new Sh(this.data.te())},t.prototype.ee=function(t){return new Sh(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),Sh=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),xh=new Oh(_c.H);function jh(){return xh}function Nh(){return jh()}var Ah=new Oh(_c.H);function Ph(){return Ah}var kh=new Oh(_c.H);function Rh(){return kh}var Dh=new Ih(_c.H);function Mh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Dh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Lh=new Ih(tc);function Fh(){return Lh}var Uh=function(){function t(t){this.H=t?function(e,n){return t(e,n)||_c.H(e.key,n.key)}:function(t,e){return _c.H(t.key,e.key)},this.ge=Ph(),this.Ve=new Oh(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),Vh=function(){function t(){this.be=new Oh(_c.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):Ku():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt(function(e,n){t.push(n)}),t},t}(),qh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Uh.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Pl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Hh=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,Bh.Le(e,n)),new t(gc.min(),r,Fh(),jh(),Mh())},t}(),Bh=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(rc.T,n,Mh(),Mh(),Mh())},t}(),zh=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},Gh=function(t,e){this.targetId=t,this.je=e},Wh=function(t,e,n,r){void 0===n&&(n=rc.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Qh=function(){function t(){this.Ge=0,this.ze=Yh(),this.He=rc.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Mh(),e=Mh(),n=Mh();return this.ze.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ku()}}),new Bh(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=Yh()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),$h=function(){function t(t){this.un=t,this.hn=new Map,this.ln=jh(),this._n=Kh(),this.fn=new Ih(tc)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof Xc?this.wn(r,t.We):t.We instanceof Zc&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.En(r=o[i],t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:Ku()}})},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach(function(t,r){n.An(r)&&e(r)})},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(ol(i))if(0===n){var o=new _c(i.path);this.En(e,o,new Zc(o,gc.min()))}else Yu(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach(function(r,i){var o=e.yn(i);if(o){if(r.Be&&ol(o.target)){var s=new _c(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new Zc(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}});var r=Mh();this._n.forEach(function(t,n){var i=!0;n.Ae(function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Hh(t,n,this.fn,this.ln,r);return this.ln=jh(),this._n=Kh(),this.fn=new Ih(tc),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new Qh,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Ih(tc),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||Gu("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new Qh),this.un.vn(t).forEach(function(n){e.En(t,n,null)})},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();function Kh(){return new Oh(_c.H)}function Yh(){return new Oh(_c.H)}var Jh={asc:"ASCENDING",desc:"DESCENDING"},Xh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zh=function(t,e){this.t=t,this.Bt=e};function tf(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ef(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function nf(t,e){return tf(t,e.j())}function rf(t){return Yu(!!t),gc.K(function(t){var e=Ic(t);return new pc(e.seconds,e.nanos)}(t))}function of(t,e){return function(t){return new vc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function sf(t){var e=vc.ot(t);return Yu(Nf(e)),e}function af(t,e){return of(t.t,e.path)}function uf(t,e){var n=sf(e);if(n.get(1)!==t.t.projectId)throw new oc(ic.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new oc(ic.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new _c(ff(n))}function cf(t,e){return of(t.t,e)}function lf(t){var e=sf(t);return 4===e.length?vc.ct():ff(e)}function hf(t){return new vc(["projects",t.t.projectId,"databases",t.t.database]).rt()}function ff(t){return Yu(t.length>4&&"documents"===t.get(4)),t.Y(5)}function df(t,e,n){return{name:af(t,e),fields:n.proto.mapValue.fields}}function pf(t,e,n){var r=uf(t,e.name),i=rf(e.updateTime),o=new $c({mapValue:{fields:e.fields}});return new Xc(r,i,o,{hasCommittedMutations:!!n})}function gf(t,e){var n;if(e instanceof lh)n={update:df(t,e.key,e.value)};else if(e instanceof mh)n={delete:af(t,e.key)};else if(e instanceof hh)n={update:df(t,e.key,e.data),updateMask:jf(e.Gt)};else{if(!(e instanceof bh))return Ku();n={verify:af(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Wl)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ql)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof Kl)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof Jl)return{fieldPath:e.field.rt(),increment:n.Ut};throw Ku()}(0,t)})),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:nf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ku()}(t,e.jt)),n}function yf(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?nh.updateTime(rf(t.updateTime)):void 0!==t.exists?nh.exists(t.exists):nh.Kt()}(e.currentDocument):nh.Kt(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Yu("REQUEST_TIME"===e.setToServerValue),n=new Wl):"appendMissingElements"in e?n=new Ql(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Kl(e.removeAllFromArray.values||[]):"increment"in e?n=new Jl(t,e.increment):Ku();var r=bc.lt(e.fieldPath);return new th(r,n)}(t,e)}):[];if(e.update){var i=uf(t,e.update.name),o=new $c({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Cc((t.fieldPaths||[]).map(function(t){return bc.lt(t)}))}(e.updateMask);return new hh(i,o,s,n,r)}return new lh(i,o,n,r)}if(e.delete){var a=uf(t,e.delete);return new mh(a,n)}if(e.verify){var u=uf(t,e.verify);return new bh(u,n)}return Ku()}function vf(t,e){return{documents:[cf(t,e.path)]}}function mf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=cf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=cf(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Wc(t.value))return{unaryFilter:{field:Tf(t.field),op:"IS_NAN"}};if(Gc(t.value))return{unaryFilter:{field:Tf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Wc(t.value))return{unaryFilter:{field:Tf(t.field),op:"IS_NOT_NAN"}};if(Gc(t.value))return{unaryFilter:{field:Tf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tf(t.field),op:Cf(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Tf(t.field),direction:Of(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||Pc(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=wf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=wf(e.endAt)),n}function bf(t){var e=lf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Yu(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=_f(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new vl(If(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Pc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ef(n.startAt));var l=null;return n.endAt&&(l=Ef(n.endAt)),El(e,i,a,s,u,"F",c,l)}function _f(t){return t?void 0!==t.unaryFilter?[xf(t)]:void 0!==t.fieldFilter?[Sf(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return _f(t)}).reduce(function(t,e){return t.concat(e)}):Ku():[]}function wf(t){return{before:t.before,values:t.position}}function Ef(t){return new gl(t.values||[],!!t.before)}function Of(t){return Jh[t]}function Cf(t){return Xh[t]}function Tf(t){return{fieldPath:t.rt()}}function If(t){return bc.lt(t.fieldPath)}function Sf(t){return sl.create(If(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ku()}}(t.fieldFilter.op),t.fieldFilter.value)}function xf(t){switch(t.unaryFilter.op){case"IS_NAN":var e=If(t.unaryFilter.field);return sl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=If(t.unaryFilter.field);return sl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=If(t.unaryFilter.field);return sl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=If(t.unaryFilter.field);return sl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ku()}}function jf(t){var e=[];return t.fields.forEach(function(t){return e.push(t.rt())}),{fieldPaths:e}}function Nf(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Af=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Pf=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)},function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&Ku(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t(function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}})},t.prototype.On=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn(function(){return e(n)}):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.Mn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.Mn(r)},t}(),kf=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new Af,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new Mf(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=qf(e.target.error);n.Bn.reject(new Mf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Mf(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(Gu("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ff(e)},t}(),Rf=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(Object(Li.m)())&&Wu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Gu("SimpleDb","Removing database:",t),Uf(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(Li.m)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Object(Vu.b)(this,void 0,void 0,function(){var e,n=this;return Object(Vu.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Gu("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Mf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new oc(ic.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Mf(t,n))},i.onupgradeneeded=function(t){Gu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Un.Jn(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Gu("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}})})},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Vu.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Vu.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Vu.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=h.sent(),e=kf.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Pf.reject(t)}).On(),u={},s.catch(function(){}),[4,e.qn];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Gu("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Df=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return Uf(this.Zn.delete())},t}(),Mf=function(t){function e(e,n){var r=this;return(r=t.call(this,ic.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Vu.c)(e,t),e}(oc);function Lf(t){return"IndexedDbTransactionError"===t.name}var Ff=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Gu("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Gu("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Uf(n)},t.prototype.add=function(t){return Gu("SimpleDb","ADD",this.store.name,t,t),Uf(this.store.add(t))},t.prototype.get=function(t){var e=this;return Uf(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Gu("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Gu("SimpleDb","DELETE",this.store.name,t),Uf(this.store.delete(t))},t.prototype.count=function(){return Gu("SimpleDb","COUNT",this.store.name),Uf(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.cs=function(t,e){Gu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,function(t,e,n){return n.delete()})},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new Pf(function(n,r){e.onerror=function(t){var e=qf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.os=function(t,e){var n=[];return new Pf(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Df(i),s=e(i.primaryKey,i.value,o);if(s instanceof Pf){var a=s.catch(function(t){return o.done(),Pf.reject(t)});n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}}).next(function(){return Pf.Mn(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Uf(t){return new Pf(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=qf(t.target.error);n(e)}})}var Vf=!1;function qf(t){var e=Rf.Qn(Object(Li.m)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new oc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Vf||(Vf=!0,setTimeout(function(){throw r},0)),r}}return t}var Hf=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Af,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(t){})}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout(function(){return e.As()},t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new oc(ic.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps(function(){return null!==t.Is?(t.clearTimeout(),t.op().then(function(e){return t.Es.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function Bf(t,e){if(Wu("AsyncQueue",e+": "+t),Lf(t))return new oc(ic.UNAVAILABLE,e+": "+t);throw t}var zf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gf=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},t}();function Wf(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=$f(e)),e=Qf(t.get(n),e);return $f(e)}function Qf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function $f(t){return t+"\x01\x01"}function Kf(t){var e=t.length;if(Yu(e>=2),2===e)return Yu("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),vc.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Ku(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Ku()}o=s+2}return new vc(r)}var Yf=function(t,e){this.seconds=t,this.nanoseconds=e},Jf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Jf.store="owner",Jf.key="owner";var Xf=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Xf.store="mutationQueues",Xf.keyPath="userId";var Zf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Zf.store="mutations",Zf.keyPath="batchId",Zf.userMutationsIndex="userMutationsIndex",Zf.userMutationsKeyPath=["userId","batchId"];var td=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Wf(e)]},t.key=function(t,e,n){return[t,Wf(e),n]},t}();td.store="documentMutations",td.PLACEHOLDER=new td;var ed=function(t,e){this.path=t,this.readTime=e},nd=function(t,e){this.path=t,this.version=e},rd=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};rd.store="remoteDocuments",rd.readTimeIndex="readTimeIndex",rd.readTimeIndexPath="readTime",rd.collectionReadTimeIndex="collectionReadTimeIndex",rd.collectionReadTimeIndexPath=["parentPath","readTime"];var id=function(t){this.byteSize=t};id.store="remoteDocumentGlobal",id.key="remoteDocumentGlobalKey";var od=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};od.store="targets",od.keyPath="targetId",od.queryTargetsIndexName="queryTargetsIndex",od.queryTargetsKeyPath=["canonicalId","targetId"];var sd=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};sd.store="targetDocuments",sd.keyPath=["targetId","path"],sd.documentTargetsIndex="documentTargetsIndex",sd.documentTargetsKeyPath=["path","targetId"];var ad=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ad.key="targetGlobalKey",ad.store="targetGlobal";var ud=function(t,e){this.collectionId=t,this.parent=e};ud.store="collectionParents",ud.keyPath=["collectionId","parent"];var cd=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};cd.store="clientMetadata",cd.keyPath="clientId";var ld=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};ld.store="bundles",ld.keyPath="bundleId";var hd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};hd.store="namedQueries",hd.keyPath="name";var fd=Object(Vu.g)(Object(Vu.g)(Object(Vu.g)(Object(Vu.g)([Xf.store,Zf.store,td.store,rd.store,od.store,Jf.store,ad.store,sd.store],[cd.store]),[id.store]),[ud.store]),[ld.store,hd.store]),dd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Object(Vu.c)(e,t),e}(Gf);function pd(t,e){var n=Ju(t);return Rf.zn(n.ps,e)}var gd=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=oh(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=sh(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=sh(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Mh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ec(this.mutations,t.mutations,function(t,e){return uh(t,e)})&&ec(this.baseMutations,t.baseMutations,function(t,e){return uh(t,e)})},t}(),yd=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){Yu(e.mutations.length===r.length);for(var i=Rh(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),vd=function(t){this.Fs=t};function md(t,e){if(e.document)return pf(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=_c.Et(e.noDocument.path),r=Od(e.noDocument.readTime);return new Zc(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=_c.Et(e.unknownDocument.path);return r=Od(e.unknownDocument.version),new tl(i,r)}return Ku()}function bd(t,e,n){var r=_d(n),i=e.key.path.X().it();if(e instanceof Xc){var o=function(t,e){return{name:af(t,e.key),fields:e.bt().mapValue.fields,updateTime:tf(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new rd(null,null,o,s,r,i)}if(e instanceof Zc){var a=e.key.path.it(),u=Ed(e.version);return s=e.hasCommittedMutations,new rd(null,new ed(a,u),null,s,r,i)}if(e instanceof tl){var c=e.key.path.it(),l=Ed(e.version);return new rd(new nd(c,l),null,null,!0,r,i)}return Ku()}function _d(t){var e=t.j();return[e.seconds,e.nanoseconds]}function wd(t){var e=new pc(t[0],t[1]);return gc.K(e)}function Ed(t){var e=t.j();return new Yf(e.seconds,e.nanoseconds)}function Od(t){var e=new pc(t.seconds,t.nanoseconds);return gc.K(e)}function Cd(t,e){for(var n=(e.baseMutations||[]).map(function(e){return yf(t.Fs,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return yf(t.Fs,e)}),o=pc.fromMillis(e.localWriteTimeMs);return new gd(e.batchId,o,n,i)}function Td(t){var e,n,r=Od(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Od(t.lastLimboFreeSnapshotVersion):gc.min();return void 0!==t.query.documents?(Yu(1===(n=t.query).documents.length),e=Nl(Ol(lf(n.documents[0])))):e=function(t){return Nl(bf(t))}(t.query),new Fl(e,t.targetId,0,t.lastListenSequenceNumber,r,i,rc.fromBase64String(t.resumeToken))}function Id(t,e){var n,r=Ed(e.Ot),i=Ed(e.lastLimboFreeSnapshotVersion);n=ol(e.target)?vf(t.Fs,e.target):mf(t.Fs,e.target);var o=e.resumeToken.toBase64();return new od(e.targetId,rl(e.target),r,o,e.sequenceNumber,i,n)}function Sd(t){var e=bf({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Al(e,e.limit,"L"):e}var xd=function(){function t(){}return t.prototype.Os=function(t,e){return jd(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Od(e.createTime),version:e.version};var e})},t.prototype.ks=function(t,e){return jd(t).put({bundleId:(n=e).id,createTime:Ed(rf(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return Nd(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Sd(e.bundledQuery),readTime:Od(e.readTime)};var e})},t.prototype.Ls=function(t,e){return Nd(t).put(function(t){return{name:t.name,readTime:Ed(rf(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function jd(t){return pd(t,ld.store)}function Nd(t){return pd(t,hd.store)}var Ad=function(){function t(){this.Bs=new Pd}return t.prototype.qs=function(t,e){return this.Bs.add(e),Pf.resolve()},t.prototype.Us=function(t,e){return Pf.resolve(this.Bs.getEntries(e))},t}(),Pd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Ih(vc.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ih(vc.H)).it()},t}(),kd=function(){function t(){this.Qs=new Pd}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs(function(){n.Qs.add(e)});var o={collectionId:r,parent:Wf(i)};return Rd(t).put(o)}return Pf.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[nc(e),""],!1,!0);return Rd(t).rs(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Kf(o.parent))}return n})},t}();function Rd(t){return pd(t,ud.store)}var Dd={Ks:!1,Ws:0,js:0,Gs:0},Md=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();function Ld(t){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(e){if(t.code!==ic.FAILED_PRECONDITION||t.message!==zf)throw t;return Gu("LocalStore","Unexpectedly lost primary lease"),[2]})})}Md.Xs=10,Md.Zs=1e3,Md.ti=new Md(41943040,Md.Xs,Md.Zs),Md.ei=new Md(-1,0,0);var Fd=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.si(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ec(this.ii,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.et=function(){return Oc(this.ii)},t}(),Ud=function(){function t(){this.ri=new Fd(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:gc.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?Pf.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();function Vd(t,e,n){var r=t.store(Zf.store),i=t.store(td.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Yu(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=td.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Pf.Mn(o).next(function(){return c})}function qd(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ku();e=t.noDocument}return JSON.stringify(e).length}var Hd=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return Yu(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zd(t).hs({index:Zf.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Ri=function(t,e,n,r){var i=this,o=Gd(t),s=zd(t);return s.add({}).next(function(a){Yu("number"==typeof a);for(var u=new gd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return gf(t.Fs,e)}),i=n.mutations.map(function(e){return gf(t.Fs,e)});return new Zf(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),l=[],h=new Ih(function(t,e){return tc(t.rt(),e.rt())}),f=0,d=r;f<d.length;f++){var p=d[f],g=td.key(i.userId,p.key.path,a);h=h.add(p.key.path.X()),l.push(s.put(c)),l.push(o.put(g,td.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ei.qs(t,e))}),t.gs(function(){i.Ii[a]=u.keys()}),Pf.Mn(l).next(function(){return u})})},t.prototype.Pi=function(t,e){var n=this;return zd(t).get(e).next(function(t){return t?(Yu(t.userId===n.userId),Cd(n.Qt,t)):null})},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?Pf.resolve(this.Ii[e]):this.Pi(t,e).next(function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null})},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return zd(t).hs({index:Zf.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Yu(e.batchId>=r),o=Cd(n.Qt,e)),i.done()}).next(function(){return o})},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zd(t).hs({index:Zf.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zd(t).rs(Zf.userMutationsIndex,n).next(function(t){return t.map(function(t){return Cd(e.Qt,t)})})},t.prototype.bi=function(t,e){var n=this,r=td.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Gd(t).hs({range:i},function(r,i,s){var a=r[0],u=r[2],c=Kf(r[1]);if(a===n.userId&&e.path.isEqual(c))return zd(t).get(u).next(function(t){if(!t)throw Ku();Yu(t.userId===n.userId),o.push(Cd(n.Qt,t))});s.done()}).next(function(){return o})},t.prototype.vi=function(t,e){var n=this,r=new Ih(tc),i=[];return e.forEach(function(e){var o=td.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Gd(t).hs({range:s},function(t,i,o){var s=t[0],a=t[2],u=Kf(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Pf.Mn(i).next(function(){return n.Si(t,r)})},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=td.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ih(tc);return Gd(t).hs({range:s},function(t,e,o){var s=t[0],u=t[2],c=Kf(t[1]);s===n.userId&&r.nt(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Si(t,a)})},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(zd(t).get(e).next(function(t){if(null===t)throw Ku();Yu(t.userId===n.userId),r.push(Cd(n.Qt,t))}))}),Pf.Mn(i).next(function(){return r})},t.prototype.Ci=function(t,e){var n=this;return Vd(t.ps,this.userId,e).next(function(r){return t.gs(function(){n.xi(e.batchId)}),Pf.forEach(r,function(e){return n.Ti.Ni(t,e)})})},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next(function(n){if(!n)return Pf.resolve();var r=IDBKeyRange.lowerBound(td.prefixForUser(e.userId)),i=[];return Gd(t).hs({range:r},function(t,n,r){if(t[0]===e.userId){var o=Kf(t[1]);i.push(o)}else r.done()}).next(function(){Yu(0===i.length)})})},t.prototype.Fi=function(t,e){return Bd(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return Wd(t).get(this.userId).next(function(t){return t||new Xf(e.userId,-1,"")})},t}();function Bd(t,e,n){var r=td.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Gd(t).hs({range:o,us:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function zd(t){return pd(t,Zf.store)}function Gd(t){return pd(t,td.store)}function Wd(t){return pd(t,Xf.store)}var Qd=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),$d=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next(function(n){var r=new Qd(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next(function(){return n.highestTargetId})})},t.prototype.Qi=function(t){return this.qi(t).next(function(t){return gc.K(new pc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Ki=function(t){return this.qi(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)})},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next(function(){return n.qi(t).next(function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)})})},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next(function(){return Kd(t).delete(e.targetId)}).next(function(){return n.qi(t)}).next(function(e){return Yu(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)})},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return Kd(t).hs(function(s,a){var u=Td(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))}).next(function(){return Pf.Mn(o)}).next(function(){return i})},t.prototype.In=function(t,e){return Kd(t).hs(function(t,n){var r=Td(n);e(r)})},t.prototype.qi=function(t){return Yd(t).get(ad.key).next(function(t){return Yu(null!==t),t})},t.prototype.Ui=function(t,e){return Yd(t).put(ad.key,e)},t.prototype.Gi=function(t,e){return Kd(t).put(Id(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next(function(t){return t.targetCount})},t.prototype.tr=function(t,e){var n=rl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Kd(t).hs({range:r,index:od.queryTargetsIndexName},function(t,n,r){var o=Td(n);il(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.er=function(t,e,n){var r=this,i=[],o=Jd(t);return e.forEach(function(e){var s=Wf(e.path);i.push(o.put(new sd(n,s))),i.push(r.Ti.nr(t,n,e))}),Pf.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=Jd(t);return Pf.forEach(e,function(e){var o=Wf(e.path);return Pf.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])})},t.prototype.Yi=function(t,e){var n=Jd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Jd(t),i=Mh();return r.hs({range:n,us:!0},function(t,e,n){var r=Kf(t[1]),o=new _c(r);i=i.add(o)}).next(function(){return i})},t.prototype.Fi=function(t,e){var n=Wf(e.path),r=IDBKeyRange.bound([n],[nc(n)],!1,!0),i=0;return Jd(t).hs({index:sd.documentTargetsIndex,us:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Sn=function(t,e){return Kd(t).get(e).next(function(t){return t?Td(t):null})},t}();function Kd(t){return pd(t,od.store)}function Yd(t){return pd(t,ad.store)}function Jd(t){return pd(t,sd.store)}function Xd(t,e){var n=t[1],r=e[1],i=tc(t[0],e[0]);return 0===i?tc(n,r):i}var Zd=function(){function t(t){this.cr=t,this.buffer=new Ih(Xd),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Xd(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),tp=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;Gu("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,function(){return Object(Vu.b)(e,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return Lf(e=n.sent())?(Gu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Ld(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}})})})},t}(),ep=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Pr=function(t,e){var n=this;if(0===e)return Pf.resolve(dc.q);var r=new Zd(e);return this.mr.In(t,function(t){return r.hr(t.sequenceNumber)}).next(function(){return n.mr.yr(t,function(t){return r.hr(t)})}).next(function(){return r.maxValue})},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(Gu("LruGarbageCollector","Garbage collection skipped; disabled"),Pf.resolve(Dd)):this.pr(t).next(function(r){return r<n.params.zs?(Gu("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Dd):n.br(t,e)})},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ar(t,this.params.Hs).next(function(e){return e>c.params.Js?(Gu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)}).next(function(r){return n=r,s=Date.now(),c.Xi(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.gr(t,n)}).next(function(t){return u=Date.now(),zu()<=Mi.a.DEBUG&&Gu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Pf.resolve({Ks:!0,Ws:r,js:i,Gs:t})})},t}(),np=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new ep(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.vr=function(t){var e=0;return this.yr(t,function(t){e++}).next(function(){return e})},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,function(t,n){return e(n)})},t.prototype.nr=function(t,e,n){return rp(t,n)},t.prototype.ir=function(t,e,n){return rp(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return rp(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return Wd(t).ls(function(r){return Bd(t,r,e).next(function(t){return t&&(n=!0),Pf.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,function(s,a){if(a<=e){var u=n.Cr(t,s).next(function(e){if(!e)return o++,r._i(t,s).next(function(){return r.li(s),Jd(t).delete([0,Wf(s.path)])})});i.push(u)}}).next(function(){return Pf.Mn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return rp(t,e)},t.prototype.Dr=function(t,e){var n,r=Jd(t),i=dc.q;return r.hs({index:sd.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==dc.q&&e(new _c(Kf(n)),i),i=s,n=o):i=dc.q}).next(function(){i!==dc.q&&e(new _c(Kf(n)),i)})},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function rp(t,e){return Jd(t).put(function(t,e){return new sd(0,Wf(t.path),e)}(e,t.bs))}var ip=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return ap(t).put(up(e),n)},t.prototype.li=function(t,e){var n=ap(t),r=up(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.kr(t,r)})},t.prototype._i=function(t,e){var n=this;return ap(t).get(up(e)).next(function(t){return n.Mr(t)})},t.prototype.Lr=function(t,e){var n=this;return ap(t).get(up(e)).next(function(t){var e=n.Mr(t);return e?{hi:e,size:qd(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Nh();return this.Br(t,e,function(t,e){var i=n.Mr(e);r=r.zt(t,i)}).next(function(){return r})},t.prototype.qr=function(t,e){var n=this,r=Nh(),i=new Oh(_c.H);return this.Br(t,e,function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,qd(e))):(r=r.zt(t,null),i=i.zt(t,0))}).next(function(){return{Ur:r,Qr:i}})},t.prototype.Br=function(t,e,n){if(e.et())return Pf.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return ap(t).hs({range:r},function(t,e,r){for(var s=_c.Et(t);o&&_c.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()}).next(function(){for(;o;)n(o,null),o=i.ce()?i.oe():null})},t.prototype.Kr=function(t,e,n){var r=this,i=Ph(),o=e.path.length+1,s={};if(n.isEqual(gc.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=_d(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=rd.collectionReadTimeIndex}return ap(t).hs(s,function(t,n,s){if(t.length===o){var a=md(r.Qt,n);e.path.nt(a.key.path)?a instanceof Xc&&Dl(e,a)&&(i=i.zt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.Nr=function(t){return new op(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return sp(t).get(id.key).next(function(t){return Yu(!!t),t})},t.prototype.kr=function(t,e){return sp(t).put(id.key,e)},t.prototype.Mr=function(t){if(t){var e=md(this.Qt,t);return e instanceof Zc&&e.version.isEqual(gc.min())?null:e}return null},t}(),op=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Fd(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Vu.c)(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new Ih(function(t,e){return tc(t.rt(),e.rt())});return this.ri.forEach(function(o,s){var a=e.Gr.get(o);if(s.hi){var u=bd(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=qd(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var l=bd(e.jr.Qt,new Zc(o,gc.min()),e.ci(o));n.push(e.jr.ai(t,o,l))}else n.push(e.jr.li(t,o))}),i.forEach(function(r){n.push(e.jr.Ei.qs(t,r))}),n.push(this.jr.updateMetadata(t,r)),Pf.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next(function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)})},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next(function(t){var e=t.Ur;return t.Qr.forEach(function(t,e){n.Gr.set(t,e)}),e})},e}(Ud);function sp(t){return pd(t,id.store)}function ap(t){return pd(t,rd.store)}function up(t){return t.path.it()}var cp=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;Yu(n<r&&n>=0&&r<=11);var o=new kf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Jf.store)}(t),function(t){t.createObjectStore(Xf.store,{keyPath:Xf.keyPath}),t.createObjectStore(Zf.store,{keyPath:Zf.keyPath,autoIncrement:!0}).createIndex(Zf.userMutationsIndex,Zf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(td.store)}(t),lp(t),function(t){t.createObjectStore(rd.store)}(t));var s=Pf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(sd.store),t.deleteObjectStore(od.store),t.deleteObjectStore(ad.store)}(t),lp(t)),s=s.next(function(){return function(t){var e=t.store(ad.store),n=new ad(0,0,gc.min().j(),0);return e.put(ad.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Zf.store).rs().next(function(n){t.deleteObjectStore(Zf.store),t.createObjectStore(Zf.store,{keyPath:Zf.keyPath,autoIncrement:!0}).createIndex(Zf.userMutationsIndex,Zf.userMutationsKeyPath,{unique:!0});var r=e.store(Zf.store),i=n.map(function(t){return r.put(t)});return Pf.Mn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(cd.store,{keyPath:cd.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.zr(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(id.store)}(t),i.Hr(o)})),n<7&&r>=7&&(s=s.next(function(){return i.Jr(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Yr(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(rd.store);e.createIndex(rd.readTimeIndex,rd.readTimeIndexPath,{unique:!1}),e.createIndex(rd.collectionReadTimeIndex,rd.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Xr(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(ld.store,{keyPath:ld.keyPath})}(t),function(t){t.createObjectStore(hd.store,{keyPath:hd.keyPath})}(t)})),s},t.prototype.Hr=function(t){var e=0;return t.store(rd.store).hs(function(t,n){e+=qd(n)}).next(function(){var n=new id(e);return t.store(id.store).put(id.key,n)})},t.prototype.zr=function(t){var e=this,n=t.store(Xf.store),r=t.store(Zf.store);return n.rs().next(function(n){return Pf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(Zf.userMutationsIndex,i).next(function(r){return Pf.forEach(r,function(r){Yu(r.userId===n.userId);var i=Cd(e.Qt,r);return Vd(t,n.userId,i).next(function(){})})})})})},t.prototype.Jr=function(t){var e=t.store(sd.store),n=t.store(rd.store);return t.store(ad.store).get(ad.key).next(function(t){var r=[];return n.hs(function(n,i){var o=new vc(n),s=function(t){return[0,Wf(t)]}(o);r.push(e.get(s).next(function(n){return n?Pf.resolve():function(n){return e.put(new sd(0,Wf(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Pf.Mn(r)})})},t.prototype.Yr=function(t,e){t.createObjectStore(ud.store,{keyPath:ud.keyPath});var n=e.store(ud.store),r=new Pd,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:Wf(i)})}};return e.store(rd.store).hs({us:!0},function(t,e){var n=new vc(t);return i(n.X())}).next(function(){return e.store(td.store).hs({us:!0},function(t,e){var n=Kf(t[1]);return i(n.X())})})},t.prototype.Xr=function(t){var e=this,n=t.store(od.store);return n.hs(function(t,r){var i=Td(r),o=Id(e.Qt,i);return n.put(o)})},t}();function lp(t){t.createObjectStore(sd.store,{keyPath:sd.keyPath}).createIndex(sd.documentTargetsIndex,sd.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(od.store,{keyPath:od.keyPath}).createIndex(od.queryTargetsIndexName,od.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ad.store)}var hp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=l,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new oc(ic.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new np(this,i),this.ho=n+"main",this.Qt=new vd(u),this.lo=new Rf(this.ho,11,new cp(this.Qt)),this._o=new $d(this.Ti,this.Qt),this.Ei=new kd,this.fo=function(t,e){return new ip(t,e)}(this.Qt,this.Ei),this.wo=new xd,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===l&&Wu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new oc(ic.FAILED_PRECONDITION,hp);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t._o.Ki(e)})}).then(function(e){t.so=new dc(e,t.eo)}).then(function(){t.io=!0}).catch(function(e){return t.lo&&t.lo.close(),Promise.reject(e)})},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Object(Vu.b)(e,void 0,void 0,function(){return Object(Vu.d)(this,function(e){return this.Er?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn(function(n){return Object(Vu.b)(e,void 0,void 0,function(){return Object(Vu.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return Object(Vu.b)(e,void 0,void 0,function(){return Object(Vu.d)(this,function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return pp(e).put(new cd(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Vo(e).next(function(e){e||(t.isPrimary=!1,t.Zr.po(function(){return t.uo(!1)}))})}).next(function(){return t.bo(e)}).next(function(n){return t.isPrimary&&!n?t.vo(e).next(function(){return!1}):!!n&&t.So(e).next(function(){return!0})})}).catch(function(e){if(Lf(e))return Gu("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Gu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Zr.po(function(){return t.uo(e)}),t.isPrimary=e})},t.prototype.Vo=function(t){var e=this;return dp(t).get(Jf.key).next(function(t){return Pf.resolve(e.Do(t))})},t.prototype.Co=function(t){return pp(t).delete(this.clientId)},t.prototype.xo=function(){return Object(Vu.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Vu.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=pd(t,cd.store);return e.rs().next(function(t){var n=r.$o(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Pf.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)this.Eo.removeItem(this.Fo(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?Pf.resolve(!0):dp(t).get(Jf.key).next(function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new oc(ic.FAILED_PRECONDITION,hp);return!1}}return!(!e.networkEnabled||!e.inForeground)||pp(t).rs().next(function(t){return void 0===e.$o(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Gu("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.ko=function(){return Object(Vu.b)(this,void 0,void 0,function(){var t=this;return Object(Vu.d)(this,function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[Jf.store,cd.store],function(e){var n=new dd(e,dc.q);return t.vo(n).next(function(){return t.Co(n)})})];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}})})},t.prototype.$o=function(t,e){var n=this;return t.filter(function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)})},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return pp(e).rs().next(function(e){return t.$o(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return Hd.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Gu("IndexedDbPersistence","Starting transaction:",t),this.lo.runTransaction(t,"readonly"===e?"readonly":"readwrite",fd,function(o){return r=new dd(o,i.so?i.so.next():dc.q),"readwrite-primary"===e?i.Vo(r).next(function(t){return!!t||i.bo(r)}).next(function(e){if(!e)throw Wu("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new oc(ic.FAILED_PRECONDITION,zf);return n(r)}).next(function(t){return i.So(r).next(function(){return t})}):i.jo(r).next(function(){return n(r)})}).then(function(t){return r.Vs(),t})},t.prototype.jo=function(t){var e=this;return dp(t).get(Jf.key).next(function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new oc(ic.FAILED_PRECONDITION,hp)})},t.prototype.So=function(t){var e=new Jf(this.clientId,this.allowTabSynchronization,Date.now());return dp(t).put(Jf.key,e)},t.Kn=function(){return Rf.Kn()},t.prototype.vo=function(t){var e=this,n=dp(t);return n.get(Jf.key).next(function(t){return e.Do(t)?(Gu("IndexedDbPersistence","Releasing primary lease."),n.delete(Jf.key)):Pf.resolve()})},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Wu("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground="visible"===t.document.visibilityState,t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps(function(){return e.ko()})},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return Gu("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Wu("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){Wu("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function dp(t){return pd(t,Jf.store)}function pp(t){return pd(t,cd.store)}function gp(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var yp=function(t,e){this.progress=t,this.Go=e},vp=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next(function(r){return n.Jo(t,e,r)})},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t})},t.prototype.Yo=function(t,e,n){var r=Nh();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)}),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next(function(e){return n.Zo(t,e)})},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next(function(r){var i=n.Yo(t,e,r),o=jh();return i.forEach(function(t,e){e||(e=new Zc(t,gc.min())),o=o.zt(t,e)}),o})},t.prototype.Kr=function(t,e,n){return function(t){return _c.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):xl(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new _c(e)).next(function(t){var e=Ph();return t instanceof Xc&&(e=e.zt(t.key,t)),e})},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=Ph();return this.Ei.Us(t,i).next(function(s){return Pf.forEach(s,function(s){var a=function(t,e){return new wl(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next(function(t){t.forEach(function(t,e){o=o.zt(t,e)})})}).next(function(){return o})})},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next(function(n){return r=n,o.zo.Di(t,e)}).next(function(e){return o.sc(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=sh(u,r.get(c),o.vs);r=l instanceof Xc?r.zt(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Dl(e,n)||(r=r.remove(t))}),r})},t.prototype.sc=function(t,e,n){for(var r=Mh(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof hh&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Xc&&(c=c.zt(t,e))}),c})},t}(),mp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Mh(),i=Mh(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),bp=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(gc.min())?this.uc(t,e):this.ac.Xo(t,r).next(function(o){var s=i.hc(e,o);return(Cl(e)||Tl(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(zu()<=Mi.a.DEBUG&&Gu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Rl(e)),i.ac.Kr(t,e,n).next(function(t){return s.forEach(function(e){t=t.zt(e.key,e)}),t}))})},t.prototype.hc=function(t,e){var n=new Ih(Ml(t));return e.forEach(function(e,r){r instanceof Xc&&Dl(t,r)&&(n=n.add(r))}),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return zu()<=Mi.a.DEBUG&&Gu("QueryEngine","Using full collection scan to execute query:",Rl(e)),this.ac.Kr(t,e,gc.min())},t}(),_p=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new Oh(tc),this.dc=new Fd(function(t){return rl(t)},il),this.wc=gc.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new vp(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Vr(n,e.fc)})},t}();function wp(t,e,n,r){return new _p(t,e,n,r)}function Ep(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Vu.d)(this,function(s){switch(s.label){case 0:return n=Ju(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.zo.pi(t).next(function(s){return o=s,r=n.persistence.Qo(e),i=new vp(n.Ec,r,n.persistence.Ko()),r.pi(t)}).next(function(e){for(var n=[],r=[],s=Mh(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.Xo(t,s).next(function(t){return{Ic:t,mc:n,Ac:r}})})})];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}})})}function Op(t,e){var n=Ju(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Pf.resolve();return o.forEach(function(t){s=s.next(function(){return r._i(e,t)}).next(function(e){var o=e,s=n.$s.get(t);Yu(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)})}),s.next(function(){return t.zo.Ci(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}function Cp(t){var e=Ju(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e._o.Qi(t)})}function Tp(t,e){var n=Ju(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach(function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next(function(){return n._o.er(t,e.qe,o)}));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return Yu(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}});var a=jh();if(e.Oe.forEach(function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))}),s.push(Ip(t,o,e.Oe,r,void 0).next(function(t){a=t})),!r.isEqual(gc.min())){var u=n._o.Qi(t).next(function(e){return n._o.Wi(t,t.bs,r)});s.push(u)}return Pf.Mn(s).next(function(){return o.apply(t)}).next(function(){return n.Tc.Zo(t,a)})}).then(function(t){return n.fc=i,t})}function Ip(t,e,n,r,i){var o=Mh();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=jh();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Zc&&s.version.isEqual(gc.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):Gu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Sp(t,e){var n=Ju(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)})}function xp(t,e){var n=Ju(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n._o.tr(t,e).next(function(i){return i?Pf.resolve(r=i):n._o.Bi(t).next(function(i){return r=new Fl(e,i,0,t.bs),n._o.ji(t,r).next(function(){return r})})})}).then(function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t})}function jp(t,e,n){return Object(Vu.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Vu.d)(this,function(a){switch(a.label){case 0:r=Ju(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Ti.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Lf(s=a.sent()))throw s;return Gu("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}})})}function Np(t,e,n){var r=Ju(t),i=gc.min(),o=Mh();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Ju(t),i=r.dc.get(n);return void 0!==i?Pf.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,Nl(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next(function(t){o=t})}).next(function(){return r._c.Kr(t,e,n?i:gc.min(),n?o:Mh())}).next(function(t){return{documents:t,Rc:o}})})}function Ap(t,e){var n=Ju(t),r=Ju(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Sn(t,e).next(function(t){return t?t.target:null})})}function Pp(t){var e=Ju(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Ju(t),i=jh(),o=_d(n),s=ap(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:rd.readTimeIndex,range:a},function(t,e){var n=md(r.Qt,e);i=i.zt(n.key,n),o=e.readTime}).next(function(){return{Go:i,readTime:wd(o)}})}(e.Ec,t,e.wc)}).then(function(t){var n=t.Go;return e.wc=t.readTime,n})}function kp(t){return Object(Vu.b)(this,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(n){return[2,(e=Ju(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=ap(t),n=gc.min();return e.hs({index:rd.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=wd(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.wc=t})]})})}function Rp(t,e,n,r){return Object(Vu.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Vu.d)(this,function(p){switch(p.label){case 0:for(i=Ju(t),o=Mh(),s=jh(),a=Rh(),u=0,c=n;u<c.length;u++)h=e.Pc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.zt(h,e.yc(l)),a=a.zt(h,e.gc(l.metadata.readTime));return f=i.Ec.Nr({Wr:!0}),[4,xp(i,function(t){return Nl(Ol(vc.ot("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Ip(t,f,s,gc.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i._o.Yi(t,d.targetId).next(function(){return i._o.er(t,o,d.targetId)}).next(function(){return i.Tc.Zo(t,e)})})})]}})})}function Dp(t,e,n){return void 0===n&&(n=Mh()),Object(Vu.b)(this,void 0,void 0,function(){var r,i;return Object(Vu.d)(this,function(o){switch(o.label){case 0:return[4,xp(t,Nl(Sd(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ju(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=rf(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(rc.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next(function(){return i._o.Yi(t,r.targetId)}).next(function(){return i._o.er(t,n,r.targetId)}).next(function(){return i.wo.Ls(t,e)})})]}})})}var Mp=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return Pf.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:rf(n.createTime)}),Pf.resolve()},t.prototype.Ms=function(t,e){return Pf.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:Sd(t.bundledQuery),readTime:rf(t.readTime)}}(e)),Pf.resolve()},t}(),Lp=function(){function t(){this.vc=new Ih(Fp.Sc),this.Dc=new Ih(Fp.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Fp(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach(function(t){return n.nr(t,e)})},t.prototype.ir=function(t,e){this.Nc(new Fp(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach(function(t){return n.ir(t,e)})},t.prototype.Fc=function(t){var e=this,n=new _c(new vc([])),r=new Fp(n,t),i=new Fp(n,t+1),o=[];return this.Dc.me([r,i],function(t){e.Nc(t),o.push(t.key)}),o},t.prototype.Oc=function(){var t=this;this.vc.forEach(function(e){return t.Nc(e)})},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new _c(new vc([])),n=new Fp(e,t),r=new Fp(e,t+1),i=Mh();return this.Dc.me([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Fi=function(t){var e=new Fp(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Fp=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return _c.H(t.key,e.key)||tc(t.Mc,e.Mc)},t.Cc=function(t,e){return tc(t.Mc,e.Mc)||_c.H(t.key,e.key)},t}(),Up=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new Ih(Fp.Sc)}return t.prototype.Ai=function(t){return Pf.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++;var o=new gd(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new Fp(u.key,i)),this.Ei.qs(t,u.key.path.X())}return Pf.resolve(o)},t.prototype.Pi=function(t,e){return Pf.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=this.Uc(e+1),r=n<0?0:n;return Pf.resolve(this.zo.length>r?this.zo[r]:null)},t.prototype.Vi=function(){return Pf.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return Pf.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Fp(e,0),i=new Fp(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],function(t){var e=n.qc(t.Mc);o.push(e)}),Pf.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new Ih(tc);return e.forEach(function(t){var e=new Fp(t,0),i=new Fp(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],function(t){r=r.add(t.Mc)})}),Pf.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;_c.wt(i)||(i=i.child(""));var o=new Fp(new _c(i),0),s=new Ih(tc);return this.Bc.Ae(function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)},o),Pf.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.qc(t);null!==r&&n.push(r)}),n},t.prototype.Ci=function(t,e){var n=this;Yu(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return Pf.forEach(e.mutations,function(i){var o=new Fp(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)}).next(function(){n.Bc=r})},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new Fp(e,0),r=this.Bc.Re(n);return Pf.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return Pf.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),Vp=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new Oh(_c.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return Pf.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=Nh();return e.forEach(function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)}),Pf.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=Ph(),i=new _c(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.value,u=a.hi,c=a.readTime;if(!e.path.nt(s.key.path))break;c._(n)<=0||u instanceof Xc&&Dl(e,u)&&(r=r.zt(u.key,u))}return Pf.resolve(r)},t.prototype.jc=function(t,e){return Pf.forEach(this.docs,function(t){return e(t)})},t.prototype.Nr=function(t){return new qp(this)},t.prototype.Or=function(t){return Pf.resolve(this.size)},t}(),qp=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Object(Vu.c)(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach(function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)}),Pf.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(Ud),Hp=function(){function t(t){this.persistence=t,this.Gc=new Fd(function(t){return rl(t)},il),this.lastRemoteSnapshotVersion=gc.min(),this.highestTargetId=0,this.zc=0,this.Hc=new Lp,this.targetCount=0,this.Jc=Qd.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach(function(t,n){return e(n)}),Pf.resolve()},t.prototype.Qi=function(t){return Pf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return Pf.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),Pf.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),Pf.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new Qd(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,Pf.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),Pf.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,Pf.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)}),Pf.Mn(o).next(function(){return i})},t.prototype.Zi=function(t){return Pf.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return Pf.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),Pf.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach(function(e){i.push(r.Ni(t,e))}),Pf.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),Pf.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return Pf.resolve(n)},t.prototype.Fi=function(t,e){return Pf.resolve(this.Hc.Fi(e))},t}(),Bp=function(){function t(t,e){var n=this;this.Yc={},this.so=new dc(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new Hp(this),this.Ei=new Ad,this.fo=function(t,e){return new Vp(t,function(t){return n.Ti.Xc(t)})}(this.Ei),this.Qt=new vd(e),this.wo=new Mp(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new Up(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;Gu("MemoryPersistence","Starting transaction:",t);var i=new zp(this.so.next());return this.Ti.Zc(),n(i).next(function(t){return r.Ti.ta(i).next(function(){return t})}).On().then(function(t){return i.Vs(),t})},t.prototype.ea=function(t,e){return Pf.Ln(Object.values(this.Yc).map(function(n){return function(){return n.Fi(t,e)}}))},t}(),zp=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Object(Vu.c)(e,t),e}(Gf),Gp=function(){function t(t){this.persistence=t,this.na=new Lp,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw Ku()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),Pf.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),Pf.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),Pf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach(function(t){return n.ra.add(t.toString())});var r=this.persistence.Sr();return r.rr(t,e.targetId).next(function(t){t.forEach(function(t){return n.ra.add(t.toString())})}).next(function(){return r.Ji(t,e)})},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return Pf.forEach(this.ra,function(r){var i=_c._t(r);return e.oa(t,i).next(function(t){t||n.li(i)})}).next(function(){return e.sa=null,n.apply(t)})},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next(function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())})},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return Pf.Ln([function(){return Pf.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();function Wp(t,e){return"firestore_clients_"+t+"_"+e}function Qp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function $p(t,e){return"firestore_targets_"+t+"_"+e}var Kp=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new oc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Wu("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Yp=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new oc(i.error.code,i.error.message)),o?new t(e,i.state,r):(Wu("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Jp=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Fh(),s=0;i&&s<r.activeTargetIds.length;++s)i=Rc(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Wu("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Xp=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Wu("SharedClientState","Failed to parse online state: "+e),null)},t}(),Zp=function(){function t(){this.activeTargetIds=Fh()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),tg=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new Oh(tc),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=Wp(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new Zp),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Vu.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Vu.d)(this,function(h){switch(h.label){case 0:return[4,this._a.Uo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(Wp(this.persistenceKey,r)))&&(o=Jp.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)this.wa(c[u]);return this.Ta=[],this.window.addEventListener("unload",function(){return l.ko()}),this.Er=!0,[2]}})})},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem($p(this.persistenceKey,t));if(n){var r=Yp.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem($p(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach(function(t){r.$a(t)}),this.currentUser=t,n.forEach(function(t){r.Ca(t)})},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Gu("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Gu("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Gu("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Gu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void Wu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po(function(){return Object(Vu.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Vu.d)(this,function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=dc.q;if(null!=t)try{var n=JSON.parse(t);Yu("number"==typeof n),e=n}catch(t){Wu("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==dc.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new Kp(this.currentUser,t,e,n),i=Qp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=Qp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){this.storage.setItem(this.ya,JSON.stringify({clientId:this.la,onlineState:t}))},t.prototype.qa=function(t,e,n){var r=$p(this.persistenceKey,t),i=new Yp(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return Jp.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]);return Kp.ca(new ac(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return Yp.ca(r,e)},t.prototype.pa=function(t){return Xp.ca(t)},t.prototype.Ya=function(t){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(Gu("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this._a.su(s,a).then(function(){n.Ea=r})},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=Fh();return t.forEach(function(t,n){e=e.Pe(n.activeTargetIds)}),e},t}(),eg=function(){function t(){this.iu=new Zp,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new Zp,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),ng=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),rg=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){Gu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){Gu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ig={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},og=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),sg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(Vu.c)(e,t),e.prototype.Su=function(t,e,n,r){return new Promise(function(i,o){var s=new Uu;s.listenOnce(Mu.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Du.NO_ERROR:var e=s.getResponseJson();Gu("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Du.TIMEOUT:Gu("Connection",'RPC "'+t+'" timed out'),o(new oc(ic.DEADLINE_EXCEEDED,"Request time out"));break;case Du.HTTP_ERROR:var n=s.getStatus();if(Gu("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ic).indexOf(e)>=0?e:ic.UNKNOWN}(r.status);o(new oc(a,r.message))}else o(new oc(ic.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new oc(ic.UNAVAILABLE,"Connection failed."));break;default:Ku()}}finally{Gu("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Nu,i=ks(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),Object(Li.t)()||Object(Li.w)()||Object(Li.q)()||Object(Li.s)()||Object(Li.x)()||Object(Li.p)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Gu("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new og({fu:function(t){c?Gu("Connection","Not sending because WebChannel is closed:",t):(u||(Gu("Connection","Opening WebChannel transport."),a.open(),u=!0),Gu("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Fu.EventType.OPEN,function(){c||Gu("Connection","WebChannel transport opened.")}),h(a,Fu.EventType.CLOSE,function(){c||(c=!0,Gu("Connection","WebChannel transport closed"),l.Ru())}),h(a,Fu.EventType.ERROR,function(t){c||(c=!0,Qu("Connection","WebChannel transport errored:",t),l.Ru(new oc(ic.UNAVAILABLE,"The operation could not be completed")))}),h(a,Fu.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Yu(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Gu("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=yh[t];if(void 0!==e)return Eh(e)}(i),s=r.message;void 0===o&&(o=ic.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Ru(new oc(o,s)),a.close()}else Gu("Connection","WebChannel received:",n),l.Pu(n)}}),h(i,Lu.STAT_EVENT,function(t){10===t.stat?Gu("Connection","Detected buffering proxy"):11===t.stat&&Gu("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Au()},0),l},e}(function(){function t(t){this.yu=t,this.t=t.t,this.gu=(t.ssl?"https":"http")+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);Gu("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then(function(t){return Gu("RestConnection","Received: ",t),t},function(e){throw Qu("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.7",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){return this.gu+"/v1/"+e+":"+ig[t]},t}());function ag(){return"undefined"!=typeof window?window:null}function ug(){return"undefined"!=typeof document?document:null}function cg(t){return new Zh(t,!0)}var lg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&Gu("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,function(){return e.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),hg=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new lg(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===ic.RESOURCE_EXHAUSTED?(Wu(e.toString()),Wu("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===ic.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}})})},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then(function(e){t.Wu===n&&t.ih(e)},function(n){e(function(){var e=new oc(ic.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)})})},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){n(function(){return e.state=2,e.listener.wu()})}),this.stream.Tu(function(t){n(function(){return e.rh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return Object(Vu.b)(t,void 0,void 0,function(){return Object(Vu.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.rh=function(t){return Gu("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps(function(){return e.Wu===t?n():(Gu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),fg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Object(Vu.c)(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ku()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(Yu(void 0===e||"string"==typeof e),rc.fromBase64String(e||"")):(Yu(void 0===e||e instanceof Uint8Array),rc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ic.UNKNOWN:Eh(t.code);return new oc(e,t.message||"")}(a);n=new Wh(r,i,o,s||null)}else if("documentChange"in e){i=uf(t,(r=e.documentChange).document.name),o=rf(r.document.updateTime);var a=new $c({mapValue:{fields:r.document.fields}}),u=(s=new Xc(i,o,a,{}),r.targetIds||[]);n=new zh(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=uf(t,(r=e.documentDelete).document),o=r.readTime?rf(r.readTime):gc.min(),a=new Zc(i,o),n=new zh([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=uf(t,(r=e.documentRemove).document),n=new zh([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Ku();var c=e.filter;i=new _h(r=c.count||0),n=new Gh(o=c.targetId,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return gc.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?gc.min():e.readTime?rf(e.readTime):gc.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=hf(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=ol(r)?{documents:vf(t,r)}:{query:mf(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=ef(t,e.resumeToken):e.Ot._(gc.min())>0&&(n.readTime=tf(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ku()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=hf(this.Qt),e.removeTarget=t,this.th(e)},e}(hg),dg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Object(Vu.c)(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(Yu(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(Yu(void 0!==e),t.map(function(t){return function(t,e){var n=rf(t.updateTime?t.updateTime:e);n.isEqual(gc.min())&&(n=rf(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new eh(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=rf(t.commitTime);return this.listener.dh(n,e)}return Yu(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=hf(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return gf(e.Qt,t)})};this.th(n)},e}(hg),pg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Object(Vu.c)(e,t),e.prototype.Ih=function(){if(this.Th)throw new oc(ic.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.pu(t,e,n,i)}).catch(function(t){throw t.code===ic.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.Du(t,e,n,i)}).catch(function(t){throw t.code===ic.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.terminate=function(){this.Th=!1},e}(function(){}),gg=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(Wu(e),this.Rh=!1):Gu("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),yg=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou(function(t){n.Ps(function(){return Object(Vu.b)(o,void 0,void 0,function(){return Object(Vu.d)(this,function(t){switch(t.label){case 0:return Tg(this)?(Gu("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Vu.b)(this,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(n){switch(n.label){case 0:return(e=Ju(t)).Nh.add(4),[4,mg(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,vg(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Oh=new gg(n,r)};function vg(t){return Object(Vu.b)(this,void 0,void 0,function(){var e,n;return Object(Vu.d)(this,function(r){switch(r.label){case 0:if(!Tg(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function mg(t){return Object(Vu.b)(this,void 0,void 0,function(){var e,n;return Object(Vu.d)(this,function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function bg(t,e){var n=Ju(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),Cg(n)?Og(n):Vg(n).Hu()&&wg(n,e))}function _g(t,e){var n=Ju(t),r=Vg(n);n.xh.delete(e),r.Hu()&&Eg(n,e),0===n.xh.size&&(r.Hu()?r.Xu():Tg(n)&&n.Oh.set("Unknown"))}function wg(t,e){t.kh.on(e.targetId),Vg(t).uh(e)}function Eg(t,e){t.kh.on(e),Vg(t).hh(e)}function Og(t){t.kh=new $h({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),Vg(t).start(),t.Oh.Ph()}function Cg(t){return Tg(t)&&!Vg(t).zu()&&t.xh.size>0}function Tg(t){return 0===Ju(t).Nh.size}function Ig(t){t.kh=void 0}function Sg(t){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(e){return t.xh.forEach(function(e,n){wg(t,e)}),[2]})})}function xg(t,e){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(n){return Ig(t),Cg(t)?(t.Oh.Vh(e),Og(t)):t.Oh.set("Unknown"),[2]})})}function jg(t,e,n){return Object(Vu.b)(this,void 0,void 0,function(){var r,i,o;return Object(Vu.d)(this,function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof Wh&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Vu.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.xh.has(o=i[r])?[4,t.Dh.Mh(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Gu("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Ng(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof zh?t.kh.dn(e):e instanceof Gh?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(gc.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Cp(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach(function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}}),n.Fe.forEach(function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(rc.T,n.Ot)),Eg(t,e);var r=new Fl(n.target,e,1,n.sequenceNumber);wg(t,r)}}),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Gu("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Ng(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Ng(t,e,n){return Object(Vu.b)(this,void 0,void 0,function(){var r=this;return Object(Vu.d)(this,function(i){switch(i.label){case 0:if(!Lf(e))throw e;return t.Nh.add(1),[4,mg(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return Cp(t.bh)}),t._s.po(function(){return Object(Vu.b)(r,void 0,void 0,function(){return Object(Vu.d)(this,function(e){switch(e.label){case 0:return Gu("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,vg(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Ag(t,e){return e().catch(function(n){return Ng(t,n,e)})}function Pg(t){return Object(Vu.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Vu.d)(this,function(s){switch(s.label){case 0:e=Ju(t),n=qg(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Tg(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Sp(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=qg(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Ng(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return kg(e)&&Rg(e),[2]}})})}function kg(t){return Tg(t)&&!qg(t).zu()&&t.Ch.length>0}function Rg(t){qg(t).start()}function Dg(t){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(e){return qg(t).Eh(),[2]})})}function Mg(t){return Object(Vu.b)(this,void 0,void 0,function(){var e,n,r;return Object(Vu.d)(this,function(i){for(e=qg(t),n=0,r=t.Ch;n<r.length;n++)e.fh(r[n].mutations);return[2]})})}function Lg(t,e,n){return Object(Vu.b)(this,void 0,void 0,function(){var r,i;return Object(Vu.d)(this,function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=yd.from(r,e,n),[4,Ag(t,function(){return t.Dh.Bh(i)})];case 1:return o.sent(),[4,Pg(t)];case 2:return o.sent(),[2]}})})}function Fg(t,e){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(n){switch(n.label){case 0:return e&&qg(t)._h?[4,function(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r;return Object(Vu.d)(this,function(i){switch(i.label){case 0:return wh(r=e.code)&&r!==ic.ABORTED?(n=t.Ch.shift(),qg(t).Yu(),[4,Ag(t,function(){return t.Dh.qh(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Pg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return kg(t)&&Rg(t),[2]}})})}function Ug(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n;return Object(Vu.d)(this,function(r){switch(r.label){case 0:return n=Ju(t),e?(n.Nh.delete(2),[4,vg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,mg(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Vg(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=Ju(t);return r.Ih(),new fg(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Sg.bind(null,t),Tu:xg.bind(null,t),ah:jg.bind(null,t)}),t.$h.push(function(n){return Object(Vu.b)(e,void 0,void 0,function(){return Object(Vu.d)(this,function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),Cg(t)?Og(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),Ig(t),e.label=3;case 3:return[2]}})})})),t.Uh}function qg(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=Ju(t);return r.Ih(),new dg(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Dg.bind(null,t),Tu:Fg.bind(null,t),wh:Mg.bind(null,t),dh:Lg.bind(null,t)}),t.$h.push(function(n){return Object(Vu.b)(e,void 0,void 0,function(){return Object(Vu.d)(this,function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,Pg(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(Gu("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}})})})),t.Qh}var Hg=function(){this.Kh=void 0,this.listeners=[]},Bg=function(){this.queries=new Fd(function(t){return kl(t)},Pl),this.onlineState="Unknown",this.Wh=new Set};function zg(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Vu.d)(this,function(c){switch(c.label){case 0:if(n=Ju(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Hg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=Bf(a,"Initialization of query '"+Rl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&$g(n),[2]}})})}function Gg(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Vu.d)(this,function(a){return n=Ju(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]})})}function Wg(t,e){for(var n=Ju(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&$g(n)}function Qg(t,e,n){var r=Ju(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function $g(t){t.Wh.forEach(function(t){t.next()})}var Kg=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new qh(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){return!t.fromCache||!(this.options.nl&&"Offline"!==e||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){return t.docChanges.length>0||!!(t.Ce||this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=qh.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),Yg=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),Jg=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return uf(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?pf(this.Qt,t.document,!1):new Zc(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return rf(t)},t}();!function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new Jg(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Mh()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Vu.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Vu.d)(this,function(o){switch(o.label){case 0:return[4,Rp(this.bh,new Jg(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Dp(this.bh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new yp(Object.assign({},this.progress),t))]}})})}}();var Xg=function(t){this.key=t},Zg=function(t){this.key=t},ty=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Mh(),this.De=Mh(),this.hl=Ml(t),this.ll=new Uh(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new Vh,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=Cl(this.query)&&i.size===this.query.limit?i.last():null,c=Tl(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt(function(t,e){var l=i.get(t),h=e instanceof Xc?e:null;h&&(h=Dl(n.query,h)?h:null);var f=!!l&&n.De.has(l.key),d=!!h&&(h.Vt||n.De.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.wl(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.hl(h,u)>0||c&&n.hl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Cl(this.query)||Tl(this.query))for(;s.size>this.query.limit;){var l=Cl(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ku()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)}),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new qh(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new Vh,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach(function(t){return e.cl=e.cl.add(t)}),t.Ue.forEach(function(t){}),t.Qe.forEach(function(t){return e.cl=e.cl.delete(t)}),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Mh(),this.ll.forEach(function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))});var n=[];return e.forEach(function(e){t.ul.has(e)||n.push(new Zg(e))}),this.ul.forEach(function(t){e.has(t)||n.push(new Xg(t))}),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Mh();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return qh.Ne(this.query,this.ll,this.De,0===this.al)},t}(),ey=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ny=function(t){this.key=t,this.Pl=!1},ry=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Fd(function(t){return kl(t)},Pl),this.Sl=new Map,this.Dl=new Set,this.Cl=new Oh(_c.H),this.xl=new Map,this.Nl=new Lp,this.$l={},this.Fl=new Map,this.Ol=Qd.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function iy(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Vu.d)(this,function(a){switch(a.label){case 0:return n=ky(t),(i=n.vl.get(e))?(n.Vl.Fa(i.targetId),r=i.view.Rl(),[3,4]):[3,1];case 1:return[4,xp(n.bh,Nl(e))];case 2:return o=a.sent(),s=n.Vl.Fa(o.targetId),[4,oy(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Ml&&bg(n.yl,o),a.label=4;case 4:return[2,r]}})})}function oy(t,e,n,r){return Object(Vu.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Vu.d)(this,function(l){switch(l.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Object(Vu.b)(this,void 0,void 0,function(){var i,o,s;return Object(Vu.d)(this,function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,Np(t.bh,e.query,!1).then(function(t){return e.view.fl(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(my(t,e.targetId,s.Il),s.snapshot)]}})})}(t,e,n,r)},[4,Np(t.bh,e,!0)];case 1:return i=l.sent(),o=new ty(e,i.Rc),s=o.fl(i.documents),a=Bh.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),my(t,n,u.Il),c=new ey(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}})})}function sy(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i;return Object(Vu.d)(this,function(o){switch(o.label){case 0:return n=Ju(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter(function(t){return!Pl(t,e)})),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,jp(n.bh,r.targetId,!1).then(function(){n.Vl.La(r.targetId),_g(n.yl,r.targetId),yy(n,r.targetId)}).catch(Ld)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return yy(n,r.targetId),[4,jp(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function ay(t,e,n){return Object(Vu.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Vu.d)(this,function(a){switch(a.label){case 0:r=Ry(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ju(t),i=pc.now(),o=e.reduce(function(t,e){return t.add(e.key)},Mh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Tc.Xo(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=ah(c,n.get(c.key));null!=l&&s.push(new hh(c.key,l,Yc(l.proto.mapValue),nh.exists(!0)))}return r.zo.Ri(t,i,s,e)})}).then(function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}})}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new Oh(tc)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,wy(r,i.ri)];case 3:return a.sent(),[4,Pg(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Bf(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function uy(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r;return Object(Vu.d)(this,function(i){switch(i.label){case 0:n=Ju(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Tp(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach(function(t,e){var r=n.xl.get(e);r&&(Yu(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?Yu(r.Pl):t.Qe.size>0&&(Yu(r.Pl),r.Pl=!1))}),[4,wy(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Ld(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function cy(t,e,n){var r=Ju(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach(function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Ju(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)}),r&&$g(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function ly(t,e,n){return Object(Vu.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Vu.d)(this,function(c){switch(c.label){case 0:return(r=Ju(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new Oh(_c.H)).zt(o,new Zc(o,gc.min())),a=Mh().add(o),u=new Hh(gc.min(),new Map,new Ih(tc),s,a),[4,uy(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),_y(r),[3,4];case 2:return[4,jp(r.bh,e,!1).then(function(){return yy(r,e,n)}).catch(Ld)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function hy(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i;return Object(Vu.d)(this,function(o){switch(o.label){case 0:n=Ju(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Op(n.bh,e)];case 2:return i=o.sent(),gy(n,r,null),py(n,r),n.Vl.Na(r,"acknowledged"),[4,wy(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Ld(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function fy(t,e,n){return Object(Vu.b)(this,void 0,void 0,function(){var r,i;return Object(Vu.d)(this,function(o){switch(o.label){case 0:r=Ju(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ju(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.zo.Pi(t,e).next(function(e){return Yu(null!==e),r=e.keys(),n.zo.Ci(t,e)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}(r.bh,e)];case 2:return i=o.sent(),gy(r,e,n),py(r,e),r.Vl.Na(e,"rejected",n),[4,wy(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Ld(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function dy(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Vu.d)(this,function(a){switch(a.label){case 0:Tg((n=Ju(t)).yl)||Gu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Ju(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.zo.Vi(t)})}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=Bf(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function py(t,e){(t.Fl.get(e)||[]).forEach(function(t){t.resolve()}),t.Fl.delete(e)}function gy(t,e,n){var r=Ju(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function yy(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach(function(e){t.Nl.Fi(e)||vy(t,e)})}function vy(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(_g(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),_y(t))}function my(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Xg?(t.Nl.nr(o.key,e),by(t,o)):o instanceof Zg?(Gu("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||vy(t,o.key)):Ku()}}function by(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(Gu("SyncEngine","New document in limbo: "+n),t.Dl.add(r),_y(t))}function _y(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new _c(vc.ot(e)),r=t.Ol.next();t.xl.set(r,new ny(n)),t.Cl=t.Cl.zt(n,r),bg(t.yl,new Fl(Nl(Ol(n.path)),r,2,dc.q))}}function wy(t,e,n){return Object(Vu.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Vu.d)(this,function(a){switch(a.label){case 0:return r=Ju(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach(function(t,a){s.push(r.Ll(a,e,n).then(function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=mp.oc(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Vu.d)(this,function(l){switch(l.label){case 0:n=Ju(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Pf.forEach(e,function(e){return Pf.forEach(e.ic,function(r){return n.persistence.Ti.nr(t,e.targetId,r)}).next(function(){return Pf.forEach(e.rc,function(r){return n.persistence.Ti.ir(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Lf(r=l.sent()))throw r;return Gu("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.fc.get(a),c=u.Lt(u.Ot),n.fc=n.fc.zt(a,c));return[2]}})})}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Ey(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r;return Object(Vu.d)(this,function(i){switch(i.label){case 0:return(n=Ju(t)).currentUser.isEqual(e)?[3,3]:(Gu("SyncEngine","User change. New user:",e.A()),[4,Ep(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach(function(t){t.forEach(function(t){t.reject(new oc(ic.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,wy(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Oy(t,e){var n=Ju(t),r=n.xl.get(e);if(r&&r.Pl)return Mh().add(r.key);var i=Mh(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.vl.get(a[s]);i=i.Pe(u.view._l)}return i}function Cy(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i;return Object(Vu.d)(this,function(o){switch(o.label){case 0:return[4,Np((n=Ju(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&my(n,e.targetId,i.Il),i)]}})})}function Ty(t){return Object(Vu.b)(this,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(n){return[2,Pp((e=Ju(t)).bh).then(function(t){return wy(e,t)})]})})}function Iy(t,e,n,r){return Object(Vu.b)(this,void 0,void 0,function(){var i,o;return Object(Vu.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Ju(t),r=Ju(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.yi(t,e).next(function(e){return e?n.Tc.Xo(t,e):Pf.resolve(null)})})}((i=Ju(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Pg(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(gy(i,e,r||null),py(i,e),function(t,e){Ju(Ju(t).zo).xi(e)}(i.bh,e)):Ku(),s.label=4;case 4:return[4,wy(i,o)];case 5:return s.sent(),[3,7];case 6:Gu("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Sy(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Vu.d)(this,function(c){switch(c.label){case 0:return ky(n=Ju(t)),Ry(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,xy(n,r.it())]);case 1:return i=c.sent(),n.kl=!0,[4,Ug(n.yl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)bg(n.yl,s[o]);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(a=[],u=Promise.resolve(),n.Sl.forEach(function(t,e){n.Vl.Ma(e)?a.push(e):u=u.then(function(){return yy(n,e),jp(n.bh,e,!0)}),_g(n.yl,e)}),[4,u]);case 4:return c.sent(),[4,xy(n,a)];case 5:return c.sent(),function(t){var e=Ju(t);e.xl.forEach(function(t,n){_g(e.yl,n)}),e.Nl.Oc(),e.xl=new Map,e.Cl=new Oh(_c.H)}(n),n.kl=!1,[4,Ug(n.yl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function xy(t,e,n){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Vu.d)(this,function(g){switch(g.label){case 0:n=Ju(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Sl.get(a=s[o]))&&0!==c.length?[4,xp(n.bh,Nl(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.vl.get(h[l]),[4,Cy(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Ap(n.bh,a)];case 8:return p=g.sent(),[4,xp(n.bh,p)];case 9:return u=g.sent(),[4,oy(n,jy(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}})})}function jy(t){return El(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ny(t){var e=Ju(t);return Ju(Ju(e.bh).persistence).Uo()}function Ay(t,e,n,r){return Object(Vu.b)(this,void 0,void 0,function(){var i,o,s;return Object(Vu.d)(this,function(a){switch(a.label){case 0:return(i=Ju(t)).kl?(Gu("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Pp(i.bh)];case 3:return o=a.sent(),s=Hh.Me(e,"current"===n),[4,wy(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,jp(i.bh,e,!0)];case 6:return a.sent(),yy(i,e,r),[3,8];case 7:Ku(),a.label=8;case 8:return[2]}})})}function Py(t,e,n){return Object(Vu.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Vu.d)(this,function(f){switch(f.label){case 0:if(!(r=ky(t)).kl)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Sl.has(s=o[i])?(Gu("SyncEngine","Adding an already active target "+s),[3,5]):[4,Ap(r.bh,s)]:[3,6];case 2:return a=f.sent(),[4,xp(r.bh,a)];case 3:return u=f.sent(),[4,oy(r,jy(a),u.targetId,!1)];case 4:f.sent(),bg(r.yl,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Vu.d)(this,function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,jp(r.bh,t,!1).then(function(){_g(r.yl,t),yy(r,t)}).catch(Ld)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function ky(t){var e=Ju(t);return e.yl.Dh.Lh=uy.bind(null,e),e.yl.Dh.vn=Oy.bind(null,e),e.yl.Dh.Mh=ly.bind(null,e),e.bl.ah=Wg.bind(null,e.gl),e.bl.Bl=Qg.bind(null,e.gl),e}function Ry(t){var e=Ju(t);return e.yl.Dh.Bh=hy.bind(null,e),e.yl.Dh.qh=fy.bind(null,e),e}var Dy=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(e){switch(e.label){case 0:return this.Qt=cg(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}})})},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return wp(this.persistence,new bp,t.Jl,this.Qt)},t.prototype.jl=function(t){return new Bp(Gp.ia,this.Qt)},t.prototype.Wl=function(t){return new eg},t.prototype.terminate=function(){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},t}(),My=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Vu.c)(e,t),e.prototype.initialize=function(e){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,kp(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,Ry(this.Yl._a)];case 4:return n.sent(),[4,Pg(this.Yl.yl)];case 5:return n.sent(),[2]}})})},e.prototype.Hl=function(t){return wp(this.persistence,new bp,t.Jl,this.Qt)},e.prototype.zl=function(t){return new tp(this.persistence.Ti.lr,t._s)},e.prototype.jl=function(t){var e=gp(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?Md.Ys(this.cacheSizeBytes):Md.ti;return new fp(this.synchronizeTabs,e,t.clientId,n,t._s,ag(),ug(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new eg},e}(Dy),Ly=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Vu.c)(e,t),e.prototype.initialize=function(e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r=this;return Object(Vu.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof tg?(this.Vl._a={eu:Iy.bind(null,n),nu:Ay.bind(null,n),su:Py.bind(null,n),Uo:Ny.bind(null,n),tu:Ty.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro(function(t){return Object(Vu.b)(r,void 0,void 0,function(){return Object(Vu.d)(this,function(e){switch(e.label){case 0:return[4,Sy(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Wl=function(t){var e=ag();if(!tg.Kn(e))throw new oc(ic.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=gp(t.yu.t,t.yu.persistenceKey);return new tg(e,t._s,n,t.clientId,t.Jl)},e}(My),Fy=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n=this;return Object(Vu.d)(this,function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return cy(n._a,t,1)},this.yl.Dh.n_=Ey.bind(null,this._a),[4,Ug(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.t_=function(t){return new Bg},t.prototype.Xl=function(t){var e=cg(t.yu.t),n=new sg(t.yu);return function(t,e,n){return new pg(t,e,n)}(t.credentials,n,e)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return cy(s._a,t,0)},o=rg.Kn()?new rg:new ng,new yg(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new ry(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Object(Vu.b)(this,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(n){switch(n.label){case 0:return e=Ju(t),Gu("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,mg(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}})})}(this.yl)},t}(),Uy=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Vy=(function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new Af,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Ql=function(){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},t.prototype.c_=function(){return Object(Vu.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Vu.d)(this,function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new Yg(JSON.parse(r),t.length+n)]}})})},t.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.a_=function(){return Object(Vu.b)(this,void 0,void 0,function(){var t,e;return Object(Vu.d)(this,function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.h_=function(t){return Object(Vu.b)(this,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Object(Vu.b)(this,void 0,void 0,function(){var t,e;return Object(Vu.d)(this,function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new oc(ic.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new bc(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}()),qy=function(t){this._methodName=t},Hy=function(t){this.d_=t};function By(t,e,n){if(!n)throw new oc(ic.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function zy(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new oc(ic.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Gy(t,e,n,r){if(!0===e&&!0===r)throw new oc(ic.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Wy(t){if(!_c.wt(t))throw new oc(ic.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Qy(t){if(_c.wt(t))throw new oc(ic.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function $y(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ku()}function Ky(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new oc(ic.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=$y(t);throw new oc(ic.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Yy(t,e){if(e<=0)throw new oc(ic.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Jy=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new oc(ic.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new oc(ic.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Gy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Xy=new Map,Zy=function(){function t(t,e){this.w_="(lite)",this.E_=new Jy({}),this.T_=!1,t instanceof Hu?(this.I_=t,this.m_=new cc):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new oc(ic.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hu(t.options.projectId)}(t),this.m_=new lc(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new oc(ic.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new oc(ic.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Jy(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new cc;switch(t.type){case"gapi":var e=t.client;return Yu(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new fc(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new oc(ic.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=Xy.get(this))&&(Gu("ComponentProvider","Removing Datastore"),Xy.delete(this),t.terminate()),Promise.resolve();var t},t}(),tv=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new nv(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),ev=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),nv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ol(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(Vu.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new tv(this.firestore,null,new _c(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(ev);function rv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Hy&&(t=t.d_),By("collection","path",e),t instanceof Zy)return Qy(n=vc.ot.apply(vc,Object(Vu.g)([e],r))),new nv(t,null,n);if(!(t instanceof tv||t instanceof nv))throw new oc(ic.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Qy(n=vc.ot.apply(vc,Object(Vu.g)([t.path],r)).child(vc.ot(e))),new nv(t.firestore,null,n)}function iv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Hy&&(t=t.d_),1===arguments.length&&(e=Zu.u()),By("doc","path",e),t instanceof Zy)return Wy(n=vc.ot.apply(vc,Object(Vu.g)([e],r))),new tv(t,null,new _c(n));if(!(t instanceof tv||t instanceof nv))throw new oc(ic.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wy(n=t.D_.child(vc.ot.apply(vc,Object(Vu.g)([e],r)))),new tv(t.firestore,t instanceof nv?t.v_:null,new _c(n))}function ov(t,e){return t instanceof Hy&&(t=t.d_),e instanceof Hy&&(e=e.d_),(t instanceof tv||t instanceof nv)&&(e instanceof tv||e instanceof nv)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function sv(t,e){return t instanceof Hy&&(t=t.d_),e instanceof Hy&&(e=e.d_),t instanceof ev&&e instanceof ev&&t.firestore===e.firestore&&Pl(t.C_,e.C_)&&t.v_===e.v_}var av=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new oc(ic.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new oc(ic.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return tc(this.x_,t.x_)||tc(this.N_,t.N_)},t}(),uv=/^__.*__$/,cv=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new hh(t,this.data,this.Gt,e,this.fieldTransforms):new lh(t,this.data,e,this.fieldTransforms)},t}(),lv=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new hh(t,this.data,this.Gt,e,this.fieldTransforms)},t}();function hv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ku()}}var fv=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Pv(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find(function(e){return t.nt(e)})||void 0!==this.fieldTransforms.find(function(e){return t.nt(e.field)})},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(hv(this.k_)&&uv.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),dv=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||cg(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new fv({k_:t,methodName:e,j_:n,path:bc.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function pv(t){var e=t.p_(),n=cg(t.I_);return new dv(t.I_,!!e.ignoreUndefinedProperties,n)}function gv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);xv("Data must be an object, but it was:",s,r);var a,u,c=Iv(r,s);if(o.merge)a=new Cc(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=jv(e,f[h],n);if(!s.contains(d))throw new oc(ic.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");kv(l,d)||l.push(d)}a=new Cc(l),u=s.fieldTransforms.filter(function(t){return a.Tt(t.field)})}else a=null,u=s.fieldTransforms;return new cv(new $c(c),a,u)}var yv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vu.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(qy);function vv(t,e,n){return new fv({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vu.c)(e,t),e.prototype.z_=function(t){return new th(t.path,new Wl)},e.prototype.isEqual=function(t){return t instanceof e},e}(qy),bv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Vu.c)(e,t),e.prototype.z_=function(t){var e=vv(this,t,!0),n=this.H_.map(function(t){return Tv(t,e)}),r=new Ql(n);return new th(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(qy),_v=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Vu.c)(e,t),e.prototype.z_=function(t){var e=vv(this,t,!0),n=this.H_.map(function(t){return Tv(t,e)}),r=new Kl(n);return new th(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(qy),wv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(Vu.c)(e,t),e.prototype.z_=function(t){var e=new Jl(t.Qt,ql(t.Qt,this.J_));return new th(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(qy);function Ev(t,e,n,r){var i=t.G_(1,e,n);xv("Data must be an object, but it was:",i,r);var o=[],s=new Kc;Ec(r,function(t,r){var a=Av(e,t,n);r instanceof Hy&&(r=r.d_);var u=i.U_(a);if(r instanceof yv)o.push(a);else{var c=Tv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Cc(o);return new lv(s.Pt(),a,i.fieldTransforms)}function Ov(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[jv(e,r,n)],u=[i];if(o.length%2!=0)throw new oc(ic.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(jv(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Kc,f=a.length-1;f>=0;--f)if(!kv(l,a[f])){var d=a[f],p=u[f];p instanceof Hy&&(p=p.d_);var g=s.U_(d);if(p instanceof yv)l.push(d);else{var y=Tv(p,g);null!=y&&(l.push(d),h.set(d,y))}}var v=new Cc(l);return new lv(h.Pt(),v,s.fieldTransforms)}function Cv(t,e,n,r){return void 0===r&&(r=!1),Tv(n,t.G_(r?4:3,e))}function Tv(t,e){if(t instanceof Hy&&(t=t.d_),Sv(t))return xv("Unsupported field value:",e,t),Iv(t,e);if(t instanceof qy)return function(t,e){if(!hv(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Tv(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Hy&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ql(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=pc.fromDate(t);return{timestampValue:tf(e.Qt,n)}}if(t instanceof pc)return n=new pc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:tf(e.Qt,n)};if(t instanceof av)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof sc)return{bytesValue:ef(e.Qt,t.I)};if(t instanceof tv){var r=t.firestore.I_;if(!r.isEqual(n=e.t))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:of(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+$y(t))}(t,e)}function Iv(t,e){var n={};return Oc(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):Ec(t,function(t,r){var i=Tv(r,e.L_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Sv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof pc||t instanceof av||t instanceof sc||t instanceof tv||t instanceof qy)}function xv(t,e,n){if(!Sv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=$y(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function jv(t,e,n){if(e instanceof Hy&&(e=e.d_),e instanceof Vy)return e.f_;if("string"==typeof e)return Av(t,e);throw Pv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Nv=new RegExp("[~\\*/\\[\\]]");function Av(t,e,n){if(e.search(Nv)>=0)throw Pv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Vy.bind.apply(Vy,Object(Vu.g)([void 0],e.split("."))))).f_}catch(r){throw Pv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Pv(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new oc(ic.INVALID_ARGUMENT,(a+=". ")+t+u)}function kv(t,e){return t.some(function(t){return t.isEqual(e)})}var Rv=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(Vu.b)(this,void 0,void 0,function(){var e,n=this;return Object(Vu.d)(this,function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new oc(ic.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Vu.d)(this,function(u){switch(u.label){case 0:return n=Ju(t),r=hf(n.Qt)+"/documents",i={documents:e.map(function(t){return af(n.Qt,t)})},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Yu(!!e.found);var n=uf(t,e.found.name),r=rf(e.found.updateTime),i=new $c({mapValue:{fields:e.found.fields}});return new Xc(n,r,i,{})}(t,e):"missing"in e?function(t,e){Yu(!!e.missing),Yu(!!e.readTime);var n=uf(t,e.missing),r=rf(e.readTime);return new Zc(n,r)}(t,e):Ku()}(n.Qt,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Yu(!!e),a.push(e)}),a)]}})})}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Zc||t instanceof Xc?n.sf(t):Ku()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new mh(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(Vu.b)(this,void 0,void 0,function(){var t,e=this;return Object(Vu.d)(this,function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=_c._t(n);e.mutations.push(new bh(r,e.jt(r)))}),[4,function(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i;return Object(Vu.d)(this,function(o){switch(o.label){case 0:return n=Ju(t),r=hf(n.Qt)+"/documents",i={writes:e.map(function(t){return gf(n.Qt,t)})},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}})})},t.prototype.sf=function(t){var e;if(t instanceof Xc)e=t.version;else{if(!(t instanceof Zc))throw Ku();e=gc.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new oc(ic.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?nh.updateTime(e):nh.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(gc.min()))throw new oc(ic.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nh.updateTime(e)}return nh.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Dv=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new lg(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu(function(){return Object(Vu.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Vu.d)(this,function(r){return t=new Rv(this.Sh),(e=this.uf(t))&&e.then(function(e){n._s.Ps(function(){return t.commit().then(function(){n.Es.resolve(e)}).catch(function(t){n.hf(t)})})}).catch(function(t){n.hf(t)}),[2]})})})},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Pc(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps(function(){return e.af(),Promise.resolve()})):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!wh(e)}return!1},t}(),Mv=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=ac.UNAUTHENTICATED,this.clientId=Zu.u(),this._f=function(){},this.C=new Af,this.credentials.v(function(t){Gu("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()})}return t.prototype.getConfiguration=function(){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then(function(){return e._f(e.user)})},t.prototype.df=function(){if(this._s.wf)throw new oc(ic.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new Af;return this._s.Tf(function(){return Object(Vu.b)(t,void 0,void 0,function(){var t,n;return Object(Vu.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Bf(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Lv(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Vu.d)(this,function(o){switch(o.label){case 0:return t._s.Af(),Gu("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff(function(n){r.isEqual(n)||(r=n,t._s.po(function(){return Object(Vu.b)(i,void 0,void 0,function(){return Object(Vu.d)(this,function(t){switch(t.label){case 0:return[4,Ep(e.bh,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.Po(function(){return t.terminate()}),t.mf=e,[2]}})})}function Fv(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r;return Object(Vu.d)(this,function(i){switch(i.label){case 0:return t._s.Af(),[4,Uv(t)];case 1:return n=i.sent(),Gu("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff(function(n){return t._s.po(function(){return function(t,e){return Object(Vu.b)(this,void 0,void 0,function(){var n,r;return Object(Vu.d)(this,function(i){switch(i.label){case 0:return(n=Ju(t))._s.Af(),Gu("RemoteStore","RemoteStore received new credentials"),r=Tg(n),n.Nh.add(3),[4,mg(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,vg(n)];case 3:return i.sent(),[2]}})})}(e.yl,n)})}),t.If=e,[2]}})})}function Uv(t){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(e){switch(e.label){case 0:return t.mf?[3,2]:(Gu("FirestoreClient","Using default OfflineComponentProvider"),[4,Lv(t,new Dy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}})})}function Vv(t){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(e){switch(e.label){case 0:return t.If?[3,2]:(Gu("FirestoreClient","Using default OnlineComponentProvider"),[4,Fv(t,new Fy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}})})}function qv(t){return Uv(t).then(function(t){return t.persistence})}function Hv(t){return Uv(t).then(function(t){return t.bh})}function Bv(t){return Vv(t).then(function(t){return t.yl})}function zv(t){return Vv(t).then(function(t){return t._a})}function Gv(t){return Object(Vu.b)(this,void 0,void 0,function(){var e,n;return Object(Vu.d)(this,function(r){switch(r.label){case 0:return[4,Vv(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=iy.bind(null,e._a),n.Hh=sy.bind(null,e._a),n)]}})})}function Wv(t,e,n){var r=this;void 0===n&&(n={});var i=new Af;return t._s.Ps(function(){return Object(Vu.b)(r,void 0,void 0,function(){var r;return Object(Vu.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Uy({next:function(o){e.Ps(function(){return Gg(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new oc(ic.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new oc(ic.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Kg(Ol(n.path),o,{includeMetadataChanges:!0,nl:!0});return zg(t,s)},[4,Gv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}function Qv(t,e,n){var r=this;void 0===n&&(n={});var i=new Af;return t._s.Ps(function(){return Object(Vu.b)(r,void 0,void 0,function(){var r;return Object(Vu.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Uy({next:function(n){e.Ps(function(){return Gg(t,s)}),n.fromCache&&"server"===r.source?i.reject(new oc(ic.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Kg(n,o,{includeMetadataChanges:!0,nl:!0});return zg(t,s)},[4,Gv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}var $v=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new lg(this,"async_queue_retry"),this.vf=function(){var e=ug();e&&Gu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=ug();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=ug();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps(function(){return e.Pf.push(t),e.Cf()})},t.prototype.Cf=function(){return Object(Vu.b)(this,void 0,void 0,function(){var t,e=this;return Object(Vu.d)(this,function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Lf(t=n.sent()))throw t;return Gu("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu(function(){return e.Cf()}),n.label=5;case 5:return[2]}})})},t.prototype.Df=function(t){var e=this,n=this.Rf.then(function(){return e.pf=!0,t().catch(function(t){throw e.Vf=t,e.pf=!1,Wu("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.pf=!1,t})});return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Hf.Ts(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Ku()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(Vu.b)(this,void 0,void 0,function(){var t;return Object(Vu.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then(function(){e.gf.sort(function(t,e){return t.ds-e.ds});for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()})},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function Kv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this.kf={},this.Mf=new Af,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)}}();var Yv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new $v,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(Vu.c)(e,t),e.prototype.b_=function(){return this.qf||Xv(this),this.qf.terminate()},e}(Zy);function Jv(t){return t.qf||Xv(t),t.qf.df(),t.qf}function Xv(t){var e=t.p_(),n=function(t,e,n){return new qu(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new Mv(t.m_,t.Bf,n)}function Zv(t,e,n){var r=this,i=new Af;return t._s.enqueue(function(){return Object(Vu.b)(r,void 0,void 0,function(){var r;return Object(Vu.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Lv(t,n)];case 1:return o.sent(),[4,Fv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ic.FAILED_PRECONDITION||t.code===ic.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function tm(t){if(t.R_||t.P_)throw new oc(ic.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var em=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Dc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Sc(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(xc(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw Ku()}},t.prototype.Hf=function(t,e){var n=this,r={};return Ec(t.fields||{},function(t,i){r[t]=n.Uf(i,e)}),r},t.prototype.Gf=function(t){return new av(Sc(t.latitude),Sc(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Uf(t,e)})},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=Nc(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Ac(t));default:return null}},t.prototype.Qf=function(t){var e=Ic(t);return new pc(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=vc.ot(t);Yu(Nf(n));var r=new Hu(n.get(1),n.get(3)),i=new _c(n.Y(5));return r.isEqual(e)||Wu("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),nm=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new tv(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new rm(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(im("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),rm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vu.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(nm);function im(t,e){return"string"==typeof e?Av(t,e):e instanceof Hy?e.d_.f_:e.f_}function om(t){if(Tl(t)&&0===t.xt.length)throw new oc(ic.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sm=function(){};function am(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var um=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Object(Vu.c)(e,t),e.prototype.td=function(t){var e=pv(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new oc(ic.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){gm(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(pm(r,t,l[c]));a={arrayValue:{values:u}}}else a=pm(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||gm(s,o),a=Cv(n,"where",s,"in"===o||"not-in"===o);var h=sl.create(i,o,a);return function(t,e){if(e.Ct()){var n=Sl(t);if(null!==n&&!n.isEqual(e.field))throw new oc(ic.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Il(t);null!==r&&ym(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new oc(ic.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new ev(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new wl(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(sm),cm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Object(Vu.c)(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new oc(ic.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new oc(ic.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new vl(e,n);return function(t,e){if(null===Il(t)){var n=Sl(t);null!==n&&ym(0,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new ev(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new wl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(sm),lm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Object(Vu.c)(e,t),e.prototype.td=function(t){return new ev(t.firestore,t.v_,Al(t.C_,this.od,this.ad))},e}(sm),hm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(Vu.c)(e,t),e.prototype.td=function(t){var e=dm(t,this.type,this.ud,this.hd);return new ev(t.firestore,t.v_,function(t,e){return new wl(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(sm),fm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(Vu.c)(e,t),e.prototype.td=function(t){var e=dm(t,this.type,this.ud,this.hd);return new ev(t.firestore,t.v_,function(t,e){return new wl(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(sm);function dm(t,e,n,r){if(n[0]instanceof Hy&&(n[0]=n[0].d_),n[0]instanceof nm)return function(t,e,n,r,i){if(!r)throw new oc(ic.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=jl(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(Hc(e,r.key));else{var c=r.field(u.field);if(jc(c))throw new oc(ic.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.rt();throw new oc(ic.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new gl(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=pv(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new oc(ic.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new oc(ic.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!xl(t)&&-1!==c.indexOf("/"))throw new oc(ic.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(vc.ot(c));if(!_c.wt(l))throw new oc(ic.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new _c(l);a.push(Hc(e,h))}else{var f=Cv(n,r,c);a.push(f)}}return new gl(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function pm(t,e,n){if(n instanceof Hy&&(n=n.d_),"string"==typeof n){if(""===n)throw new oc(ic.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!xl(e)&&-1!==n.indexOf("/"))throw new oc(ic.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(vc.ot(n));if(!_c.wt(r))throw new oc(ic.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Hc(t,new _c(r))}if(n instanceof tv)return Hc(t,n.S_);throw new oc(ic.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$y(n)+".")}function gm(t,e){if(!Array.isArray(t)||0===t.length)throw new oc(ic.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new oc(ic.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ym(t,e,n){if(!n.isEqual(e))throw new oc(ic.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function vm(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var mm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Vu.c)(e,t),e.prototype.Wf=function(t){return new sc(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new tv(this.firestore,null,e)},e}(em),bm=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),_m=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return Object(Vu.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new wm(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(im("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(nm),wm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vu.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(_m),Em=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new bm(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach(function(r){t.call(e,new wm(n.Yf,n.Xf,r.key,r,new bm(n._d.De.has(r.key),n._d.fromCache),n.query.v_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new oc(ic.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map(function(e){return{type:"added",doc:new wm(t.Yf,t.Xf,e.doc.key,e.doc,new bm(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}})}var r=t._d.Se;return t._d.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new wm(t.Yf,t.Xf,e.doc.key,e.doc,new bm(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Om(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.dd=e),this.fd},t}();function Om(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ku()}}function Cm(t,e){return t instanceof _m&&e instanceof _m?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof Em&&e instanceof Em&&t.Yf===e.Yf&&sv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var Tm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Vu.c)(e,t),e.prototype.Wf=function(t){return new sc(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new tv(this.firestore,null,e)},e}(em);function Im(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Ky(t,tv);var o=Ky(t.firestore,Yv),s=pv(o);return e instanceof Hy&&(e=e.d_),xm(o,[("string"==typeof e||e instanceof Vy?Ov(s,"updateDoc",t.S_,e,n,r):Ev(s,"updateDoc",t.S_,e)).F_(t.S_,nh.exists(!0))])}function Sm(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Hy&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Kv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Kv(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof tv)c=Ky(t.firestore,Yv),l=Ol(t.S_.path),u={next:function(e){i[a]&&i[a](jm(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Ky(t,ev);c=Ky(d.firestore,Yv),l=d.C_;var p=new Tm(c);u={next:function(t){i[a]&&i[a](new Em(c,p,d,t))},error:i[a+1],complete:i[a+2]},om(t.C_)}return function(t,e,n,r){var i=this,o=new Uy(r),s=new Kg(e,o,n);return t._s.Ps(function(){return Object(Vu.b)(i,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(n){switch(n.label){case 0:return e=zg,[4,Gv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.i_(),t._s.Ps(function(){return Object(Vu.b)(i,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(n){switch(n.label){case 0:return e=Gg,[4,Gv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Jv(c),l,h,u)}function xm(t,e){return function(t,e){var n=this,r=new Af;return t._s.Ps(function(){return Object(Vu.b)(n,void 0,void 0,function(){var n;return Object(Vu.d)(this,function(i){switch(i.label){case 0:return n=ay,[4,zv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Jv(t),e)}function jm(t,e,n){var r=n.docs.get(e.S_),i=new Tm(t);return new _m(t,i,e.S_,r,new bm(n.hasPendingWrites,n.fromCache),e.v_)}var Nm=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=pv(t)}return t.prototype.set=function(t,e,n){this.md();var r=Am(t,this.Yf),i=vm(r.v_,e,n),o=gv(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,nh.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=Am(t,this.Yf);return e instanceof Hy&&(e=e.d_),o="string"==typeof e||e instanceof Vy?Ov(this.Id,"WriteBatch.update",s.S_,e,n,r):Ev(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,nh.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=Am(t,this.Yf);return this.Ed=this.Ed.concat(new mh(e.S_,nh.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new oc(ic.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Am(t,e){if(t instanceof Hy&&(t=t.d_),t.firestore!==e)throw new oc(ic.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Pm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Object(Vu.c)(e,t),e.prototype.get=function(e){var n=this,r=Am(e,this.Yf),i=new Tm(this.Yf);return t.prototype.get.call(this,e).then(function(t){return new _m(n.Yf,i,r.S_,t.Zf,new bm(!1,!1),r.v_)})},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=pv(t)}return t.prototype.get=function(t){var e=this,n=Am(t,this.Yf),r=new mm(this.Yf);return this.Ad.ef([n.S_]).then(function(t){if(!t||1!==t.length)return Ku();var i=t[0];if(i instanceof Zc)return new nm(e.Yf,r,n.S_,null,n.v_);if(i instanceof Xc)return new nm(e.Yf,r,i.key,i,n.v_);throw Ku()})},t.prototype.set=function(t,e,n){var r=Am(t,this.Yf),i=vm(r.v_,e,n),o=gv(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Am(t,this.Yf);return e instanceof Hy&&(e=e.d_),o="string"==typeof e||e instanceof Vy?Ov(this.Id,"Transaction.update",s.S_,e,n,r):Ev(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=Am(t,this.Yf);return this.Ad.delete(e.S_),this},t}());function km(){if("undefined"==typeof Uint8Array)throw new oc(ic.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Rm(){if("undefined"==typeof atob)throw new oc(ic.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Dm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vu.c)(e,t),e.fromBase64String=function(t){return Rm(),new e(sc.fromBase64String(t))},e.fromUint8Array=function(t){return km(),new e(sc.fromUint8Array(t))},e.prototype.toBase64=function(){return Rm(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return km(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Hy),Mm=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){tm(t=Ky(t,Yv));var n=Jv(t),r=t.p_(),i=new Fy;return Zv(n,i,new My(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){tm(t=Ky(t,Yv));var e=Jv(t),n=t.p_(),r=new Fy;return Zv(e,r,new Ly(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new oc(ic.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Af;return t.Bf.Tf(function(){return Object(Vu.b)(e,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Vu.b)(this,void 0,void 0,function(){return Object(Vu.d)(this,function(e){switch(e.label){case 0:return Rf.Kn()?[4,Rf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(gp(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.d_)},t}(),Lm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Hu||(i.Pd=e),i}return Object(Vu.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Ky(t,Zy)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&Qu("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(Vu.b)(e,void 0,void 0,function(){var e,n;return Object(Vu.d)(this,function(r){switch(r.label){case 0:return[4,qv(t)];case 1:return e=r.sent(),[4,Bv(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=Ju(t);return e.Nh.delete(0),vg(e)}(n))]}})})})}(Jv(Ky(this.d_,Yv)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(Vu.b)(e,void 0,void 0,function(){var e,n;return Object(Vu.d)(this,function(r){switch(r.label){case 0:return[4,qv(t)];case 1:return e=r.sent(),[4,Bv(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Object(Vu.b)(this,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(n){switch(n.label){case 0:return(e=Ju(t)).Nh.add(0),[4,mg(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}})})}(n))]}})})})}(Jv(Ky(this.d_,Yv)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Gy("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Af;return t._s.Ps(function(){return Object(Vu.b)(e,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(r){switch(r.label){case 0:return e=dy,[4,zv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Jv(Ky(this.d_,Yv)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Uy(e);return t._s.Ps(function(){return Object(Vu.b)(n,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ju(t).Wh.add(e),e.next()},[4,Gv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.i_(),t._s.Ps(function(){return Object(Vu.b)(n,void 0,void 0,function(){var e;return Object(Vu.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ju(t).Wh.delete(e)},[4,Gv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Jv(t=Ky(t,Yv)),Kv(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new oc(ic.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Jm(this,rv(this.d_,t))}catch(t){throw Bm(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Hm(this,iv(this.d_,t))}catch(t){throw Bm(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new $m(this,function(t,e){if(t=Ky(t,Zy),By("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new oc(ic.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ev(t,null,function(t){return new wl(vc.ct(),t)}(e))}(this.d_,t))}catch(t){throw Bm(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Af;return t._s.Ps(function(){return Object(Vu.b)(n,void 0,void 0,function(){var n;return Object(Vu.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Vv(t).then(function(t){return t.Sh})}(t)];case 1:return n=i.sent(),new Dv(t._s,n,e,r).run(),[2]}})})}),r.promise}(Jv(t),function(n){return e(new Pm(t,n))})}(this.d_,function(n){return t(new Um(e,n))})},e.prototype.batch=function(){var t=this;return Jv(this.d_),new Vm(new Nm(this.d_,function(e){return xm(t.d_,e)}))},e.prototype.loadBundle=function(t){throw new oc(ic.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new oc(ic.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Hy),Fm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Vu.c)(e,t),e.prototype.Wf=function(t){return new Dm(new sc(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return Hm.yd(e,this.firestore,null)},e}(em),Um=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new Fm(e),r}return Object(Vu.c)(e,t),e.prototype.get=function(t){var e=this,n=Xm(t);return this.d_.get(n).then(function(t){return new Wm(e.Yf,new _m(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))})},e.prototype.set=function(t,e,n){var r=Xm(t);return n?(zy("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Xm(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(Vu.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Xm(t);return this.d_.delete(e),this},e}(Hy),Vm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vu.c)(e,t),e.prototype.set=function(t,e,n){var r=Xm(t);return n?(zy("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Xm(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(Vu.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Xm(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(Hy),qm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Object(Vu.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new wm(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new Qm(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Fm(t),n),i.set(n,o)),o},e}(Hy);qm.Vd=new WeakMap;var Hm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Fm(e),r}return Object(Vu.c)(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new oc(ic.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new tv(n.d_,r,new _c(t)))},e.yd=function(t,n,r){return new e(n,new tv(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Jm(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Jm(this.firestore,rv(this.d_,t))}catch(t){throw Bm(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Hy&&(t=t.d_),t instanceof tv&&ov(this.d_,t)},e.prototype.set=function(t,e){e=zy("DocumentReference.set",e);try{return function(t,e,n){t=Ky(t,tv);var r=Ky(t.firestore,Yv),i=vm(t.v_,e,n);return xm(r,[gv(pv(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,nh.Kt())])}(this.d_,t,e)}catch(t){throw Bm(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Im(this.d_,t):Im.apply(void 0,Object(Vu.g)([this.d_,t,e],n))}catch(t){throw Bm(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return xm(Ky((t=this.d_).firestore,Yv),[new mh(t.S_,nh.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=zm(e),i=Gm(e,function(e){return new Wm(t.firestore,new _m(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))});return Sm(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ky(t,tv);var e=Ky(t.firestore,Yv),n=Jv(e),r=new Tm(e);return function(t,e){var n=this,r=new Af;return t._s.Ps(function(){return Object(Vu.b)(n,void 0,void 0,function(){var n;return Object(Vu.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Vu.b)(this,void 0,void 0,function(){var r,i;return Object(Vu.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ju(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Tc.Ho(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Xc?n.resolve(i):i instanceof Zc?n.resolve(null):n.reject(new oc(ic.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Bf(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Hv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.S_).then(function(n){return new _m(e,r,t.S_,n,new bm(n instanceof Xc&&n.Vt,!0),t.v_)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=Ky(t,tv);var e=Ky(t.firestore,Yv);return Wv(Jv(e),t.S_,{source:"server"}).then(function(n){return jm(e,t,n)})}(this.d_):function(t){t=Ky(t,tv);var e=Ky(t.firestore,Yv);return Wv(Jv(e),t.S_).then(function(n){return jm(e,t,n)})}(this.d_)).then(function(t){return new Wm(e.firestore,new _m(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(qm.gd(this.firestore,t)))},e}(Hy);function Bm(t,e,n){return t.message=t.message.replace(e,n),t}function zm(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Kv(r))return r}return{}}function Gm(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Kv(t[0])?t[0]:Kv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Wm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Vu.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Hm(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return Cm(this.d_,t.d_)},e}(Hy),Qm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vu.c)(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(Wm),$m=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Fm(e),r}return Object(Vu.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,am(this.d_,function(t,e,n){var r=e,i=im("where",t);return new um(i,r,n)}(t,n,r)))}catch(t){throw Bm(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,am(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=im("orderBy",t);return new cm(r,n)}(t,n)))}catch(t){throw Bm(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,am(this.d_,function(t){return Yy("limit",t),new lm("limit",t,"F")}(t)))}catch(t){throw Bm(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,am(this.d_,function(t){return Yy("limitToLast",t),new lm("limitToLast",t,"L")}(t)))}catch(t){throw Bm(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,am(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hm("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw Bm(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,am(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hm("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw Bm(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,am(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fm("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw Bm(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,am(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fm("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw Bm(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return sv(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ky(t,ev);var e=Ky(t.firestore,Yv),n=Jv(e),r=new Tm(e);return function(t,e){var n=this,r=new Af;return t._s.Ps(function(){return Object(Vu.b)(n,void 0,void 0,function(){var n;return Object(Vu.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Vu.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Vu.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Np(t,e,!0)];case 1:return a=u.sent(),r=new ty(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Bf(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Hv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.C_).then(function(n){return new Em(e,r,t,n)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=Ky(t,ev);var e=Ky(t.firestore,Yv),n=Jv(e),r=new Tm(e);return Qv(n,t.C_,{source:"server"}).then(function(n){return new Em(e,r,t,n)})}(this.d_):function(t){t=Ky(t,ev);var e=Ky(t.firestore,Yv),n=Jv(e),r=new Tm(e);return om(t.C_),Qv(n,t.C_).then(function(n){return new Em(e,r,t,n)})}(this.d_)).then(function(t){return new Ym(e.firestore,new Em(e.firestore.d_,e.Xf,e.d_,t._d))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=zm(e),i=Gm(e,function(e){return new Ym(t.firestore,new Em(t.firestore.d_,t.Xf,t.d_,e._d))});return Sm(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(qm.gd(this.firestore,t)))},e}(Hy),Km=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Vu.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Qm(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(Hy),Ym=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Vu.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new $m(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map(function(e){return new Qm(t.Yf,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map(function(t){return new Km(e.Yf,t)})},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach(function(r){t.call(e,new Qm(n.Yf,r))})},e.prototype.isEqual=function(t){return Cm(this.d_,t.d_)},e}(Hy),Jm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Object(Vu.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new Hm(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Hm(this.firestore,void 0===t?iv(this.d_):iv(this.d_,t))}catch(t){throw Bm(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ky(t.firestore,Yv),r=iv(t),i=vm(t.v_,e);return xm(n,[gv(pv(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,nh.exists(!1))]).then(function(){return r})}(this.d_,t).then(function(t){return new Hm(e.firestore,t)})},e.prototype.isEqual=function(t){return ov(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(qm.gd(this.firestore,t)))},e}($m);function Xm(t){return t instanceof Hy&&(t=t.d_),Ky(t,tv)}var Zm,tb=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Vy.bind.apply(Vy,Object(Vu.g)([void 0],e))))||this}return Object(Vu.c)(e,t),e.documentId=function(){return new e(bc.ht().rt())},e.prototype.isEqual=function(t){return t instanceof Hy&&(t=t.d_),t instanceof Vy&&this.d_.f_.isEqual(t.f_)},e}(Hy),eb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vu.c)(e,t),e.serverTimestamp=function(){var t=new mv("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new yv("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bv("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _v("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new wv("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(Hy),nb=n("/6Yf"),rb={Firestore:Lm,GeoPoint:av,Timestamp:pc,Blob:Dm,Transaction:Um,WriteBatch:Vm,DocumentReference:Hm,DocumentSnapshot:Wm,Query:$m,QueryDocumentSnapshot:Qm,QuerySnapshot:Ym,CollectionReference:Jm,FieldPath:tb,FieldValue:eb,setLogLevel:function(t){Bu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new nb.a("firestore",function(t){return function(t,e){return new Lm(t,new Yv(t,e),new Mm)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},rb)))})(Zm=Di.a),Zm.registerVersion("@firebase/firestore","2.1.6");var ib=n("VRyK"),ob=n("qgXg"),sb=n("Ylt2");class ab extends xt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new ub(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new jt.a;if(this.isStopped||this.hasError?o=xe.a.EMPTY:(this.observers.push(t),o=new sb.a(this,t)),r&&t.add(t=new Pi.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||ob.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class ub{constructor(t,e){this.time=t,this.value=e}}function cb(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new ab(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function lb(t,e){return e?Yt(()=>t,e):Yt(()=>t)}var hb=n("tf+s");const fb=new r.r("angularfire2.auth.use-emulator"),db=new r.r("angularfire2.auth.settings"),pb=new r.r("angularfire2.auth.tenant-id"),gb=new r.r("angularfire2.auth.langugage-code"),yb=new r.r("angularfire2.auth.use-device-language"),vb=new r.r("angularfire.auth.persistence");let mb=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new ki.d(i),f=Object(ki.h)(h),d=new xt.a,p=Object(St.a)(void 0).pipe(Object(Pi.b)(h.outsideAngular),Yt(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object($t.a)(()=>Object(ki.g)(t,i,e)),Object($t.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(ki.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),cb({bufferSize:1,refCount:!1}));if(Q(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(St.a)(null);else{p.pipe(Ie()).subscribe();const t=p.pipe(Yt(t=>t.getRedirectResult().then(t=>t,()=>null)),f,cb({bufferSize:1,refCount:!1})),e=t=>new Lt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Yt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Yt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(lb(n),Object(hb.a)(h.outsideAngular),Object(Pi.b)(h.insideAngular)),this.user=t.pipe(lb(r),Object(hb.a)(h.outsideAngular),Object(Pi.b)(h.insideAngular)),this.idToken=this.user.pipe(Yt(t=>t?Object(It.a)(t.getIdToken()):Object(St.a)(null))),this.idTokenResult=this.user.pipe(Yt(t=>t?Object(It.a)(t.getIdTokenResult()):Object(St.a)(null))),this.credential=Object(ib.a)(t,d,this.authState.pipe(ae(t=>!t))).pipe(Object($t.a)(t=>(null==t?void 0:t.user)?t:null),Object(hb.a)(h.outsideAngular),Object(Pi.b)(h.insideAngular))}return Object(ki.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ki.c),r.Mb(ki.b,8),r.Mb(r.C),r.Mb(r.A),r.Mb(fb,8),r.Mb(db,8),r.Mb(pb,8),r.Mb(gb,8),r.Mb(yb,8),r.Mb(vb,8))},t.\u0275prov=Object(r.Cb)({factory:function(){return new t(Object(r.Mb)(ki.c),Object(r.Mb)(ki.b,8),Object(r.Mb)(r.C),Object(r.Mb)(r.A),Object(r.Mb)(fb,8),Object(r.Mb)(db,8),Object(r.Mb)(pb,8),Object(r.Mb)(gb,8),Object(r.Mb)(yb,8),Object(r.Mb)(vb,8))},token:t,providedIn:"any"}),t})();function bb(t,e){return function(t,e=Ti.b){return new Lt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function _b(t,e){return bb(t,e).pipe(Object($t.a)(t=>({payload:t,type:"query"})))}function wb(t,e){return _b(t,e).pipe(re(void 0),Ii(),Object($t.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Eb(t,e,n){return wb(t,n).pipe(ie((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ob(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Ob(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ob(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),ji(),Object($t.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Ob(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Cb(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(ki.e)(mb,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class Tb{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=wb(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object($t.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(re(void 0),Ii(),ae(([t,e])=>e.length>0||!t),Object($t.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ie((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Cb(t);return Eb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return _b(this.query,this.afs.schedulers.outsideAngular).pipe(Object($t.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(It.a)(this.query.get(t)).pipe(Object(Pi.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Ib(this.ref.doc(t),this.afs)}}class Ib{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Pb(n,e);return new Tb(r,i,this.afs)}snapshotChanges(){return bb(this.ref,this.afs.schedulers.outsideAngular).pipe(re(void 0),Ii(),Object($t.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object($t.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(It.a)(this.ref.get(t)).pipe(Object(Pi.b)(this.afs.schedulers.insideAngular))}}class Sb{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?wb(this.query,this.afs.schedulers.outsideAngular).pipe(Object($t.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),ae(t=>t.length>0),this.afs.keepUnstableUntilFirst):wb(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ie((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Cb(t);return Eb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return _b(this.query,this.afs.schedulers.outsideAngular).pipe(Object($t.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(It.a)(this.query.get(t)).pipe(Object(Pi.b)(this.afs.schedulers.insideAngular))}}const xb=new r.r("angularfire2.enableFirestorePersistence"),jb=new r.r("angularfire2.firestore.persistenceSettings"),Nb=new r.r("angularfire2.firestore.settings"),Ab=new r.r("angularfire2.firestore.use-emulator");function Pb(t,e=(t=>t)){return{query:e(t),ref:t}}let kb=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new ki.d(o),this.keepUnstableUntilFirst=Object(ki.h)(this.schedulers);const c=Object(ki.g)(t,o,e);!Ri.a.auth&&u&&Object(ki.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(ki.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!Q(i)){const e=()=>{try{return Object(It.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Zm){return"undefined"!=typeof console&&console.warn(Zm),Object(St.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(St.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Pb(n,e),o=this.schedulers.ngZone.run(()=>r);return new Tb(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Sb(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Ib(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ki.c),r.Mb(ki.b,8),r.Mb(xb,8),r.Mb(Nb,8),r.Mb(r.C),r.Mb(r.A),r.Mb(jb,8),r.Mb(Ab,8),r.Mb(fb,8))},t.\u0275prov=Object(r.Cb)({factory:function(){return new t(Object(r.Mb)(ki.c),Object(r.Mb)(ki.b,8),Object(r.Mb)(xb,8),Object(r.Mb)(Nb,8),Object(r.Mb)(r.C),Object(r.Mb)(r.A),Object(r.Mb)(jb,8),Object(r.Mb)(Ab,8),Object(r.Mb)(fb,8))},token:t,providedIn:"any"}),t})(),Rb=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:xb,useValue:!0},{provide:jb,useValue:e}]}}}return t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({factory:function(e){return new(e||t)},providers:[kb]}),t})();class Db{constructor(t,e){this.defaultTranscoder=t,this.subject=e}has(t){return this.subject.has(t)}get(t,e){return this.subject.get(t,e||this.defaultTranscoder)}set(t,e,n){this.subject.set(t,e,n||this.defaultTranscoder)}remove(t){this.subject.remove(t)}clear(){this.subject.clear()}withDefaultTranscoder(t){return new Db(t,this.subject)}}class Mb{constructor(t){this.defaultTranscoder=t}get(t,e){const n=this.getItem(t);return void 0!==n?(e||this.defaultTranscoder).decode(n):void 0}set(t,e,n){this.setItem(t,(n||this.defaultTranscoder).encode(e))}withDefaultTranscoder(t){return new Db(t,this)}}const Lb={JSON:new class{encode(t){return JSON.stringify(t)}decode(t){try{return JSON.parse(t)}catch(e){return}}},STRING:new class{encode(t){return t}decode(t){return t}},BOOLEAN:new class{encode(t){return t.toString()}decode(t){return"true"===t||"false"!==t&&void 0}},NUMBER:new class{encode(t){return t.toString()}decode(t){const e=Number(t);return Number.isFinite(e)?e:void 0}},DATE_ISO_STRING:new class{encode(t){return t.toISOString()}decode(t){const e=Date.parse(t);return isNaN(e)?void 0:new Date(e)}},DATE_EPOCH_TIME:new class{encode(t){return t.valueOf().toString()}decode(t){const e=parseInt(t,10);return isNaN(e)?void 0:new Date(e)}}};class Fb extends Mb{constructor(){super(Lb.JSON),this.storage=new Map}has(t){return this.storage.has(t)}remove(t){this.storage.delete(t)}clear(){this.storage.clear()}getItem(t){if(this.storage.has(t))return this.storage.get(t)}setItem(t,e){this.storage.set(t,e)}}class Ub extends Mb{constructor(t){super(Lb.JSON),this.storage=t}has(t){return null!==this.storage.getItem(t)}remove(t){this.storage.removeItem(t)}clear(){this.storage.clear()}getItem(t){const e=this.storage.getItem(t);return null!==e?e:void 0}setItem(t,e){return this.storage.setItem(t,e)}}function Vb(t){if(!t)return!1;try{const e=Date.now(),n=`storage-test-entry-${e}`,r=`storage-test-value-${e}`;t.setItem(n,r);const i=t.getItem(n);return t.removeItem(n),i===r}catch(e){return!1}}new r.r("SESSION_STORAGE",{providedIn:"root",factory:function(){try{if("undefined"!=typeof sessionStorage&&Vb(sessionStorage))return new Ub(sessionStorage)}catch(t){}return new Fb}});const qb=new r.r("LOCAL_STORAGE",{providedIn:"root",factory:function(){try{if("undefined"!=typeof localStorage&&Vb(localStorage))return new Ub(localStorage)}catch(t){}return new Fb}});let Hb=(()=>{class t{constructor(t){this.storage=t}traerValor(t){return this.storage.get(t)}guardarValor(t,e){this.storage.set(t,e)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(qb))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Bb=(()=>{class t{constructor(t,e){this.firestore=t,this.st=e,this.transacciones=[],this.ingresos=0,this.egresos=0,this.ahorro=0,this.usuarios=[],this.user=void 0,this.cargarUsuarios(),this.cargarTransacciones2()}ngOnInit(){}cargarTransacciones2(){this.user=this.st.traerValor("usr"),null!=this.user&&this.getTransaccion().subscribe(t=>{this.transacciones=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())),this.calcularTotal()})}calcularTotal(){this.ingresos=0,this.egresos=0,this.transacciones.forEach(t=>{""!=t.monto&&("Ingreso"==t.tipo?this.ingresos+=parseFloat(t.monto):this.egresos+=parseFloat(t.monto))}),this.ahorro=this.ingresos-this.egresos}getTransaccion(){return this.firestore.collection("Transaccion",t=>t.where("userId","==",this.user.id)).snapshotChanges()}createTransaccion(t){return this.firestore.collection("Transaccion").add(t)}deleteTransaccion(t){this.firestore.doc("Transaccion/"+t).delete(),this.calcularTotal()}createUsuario(t){return this.firestore.collection("Usuarios").add(t)}login(t,e){return this.usuarios.forEach(n=>{n.usuario===t&&n.contrase\u00f1a===e&&(this.user=n)}),this.user}cargarUsuarios(){this.getUsers().subscribe(t=>{this.usuarios=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()))})}getUsers(){return this.firestore.collection("Usuarios").snapshotChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(kb),r.Mb(Hb))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function zb(t,e){if(1&t&&(r.Jb(0,"a",11),r.bc(1),r.Ib()),2&t){const t=r.Rb();r.xb(1),r.ec("",t.usrNav.nombre," ",t.usrNav.apellido,"")}}function Gb(t,e){if(1&t){const t=r.Kb();r.Jb(0,"a",12),r.Pb("click",function(){return r.Xb(t),r.Rb().salirBtn()}),r.bc(1,"Salir"),r.Ib()}}let Wb=(()=>{class t{constructor(t,e,n){this.router=t,this.st=e,this.transSrv=n,this.usrNav={id:"",nombre:"",apellido:"",usuario:"","contrase\xf1a":""}}ngOnInit(){this.verificar()}verificar(){this.usrNav=this.st.traerValor("usr"),null==this.usrNav&&this.router.navigate([""])}salirBtn(){this.st.guardarValor("usr",void 0),this.transSrv.user=void 0,this.router.navigate([""])}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(ni),r.Gb(Hb),r.Gb(Bb))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-navbar"]],decls:13,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],["type","button","data-toggle","collapse","data-target","#navbarTogglerDemo01","aria-controls","navbarTogglerDemo01","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarTogglerDemo01",1,"collapse","navbar-collapse"],["routerLink","",1,"navbar-brand"],[1,"navbar-nav","mr-auto","mt-2","mt-lg-0"],[1,"navbar-nav","my-2","my-lg-0"],[1,"nav-item","active"],["class","nav-link ",4,"ngIf"],["action",""],["class","nav-link ",3,"click",4,"ngIf"],[1,"nav-link"],[1,"nav-link",3,"click"]],template:function(t,e){1&t&&(r.Jb(0,"nav",0),r.Jb(1,"button",1),r.Hb(2,"span",2),r.Ib(),r.Jb(3,"div",3),r.Jb(4,"a",4),r.bc(5,"Finanzas Personales"),r.Ib(),r.Hb(6,"ul",5),r.Jb(7,"ul",6),r.Jb(8,"li",7),r.ac(9,zb,2,2,"a",8),r.Ib(),r.Jb(10,"form",9),r.Jb(11,"li",7),r.ac(12,Gb,2,0,"a",10),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib()),2&t&&(r.xb(9),r.Ub("ngIf",null!=e.usrNav),r.xb(3),r.Ub("ngIf",null!=e.usrNav))},directives:[ii,q],styles:[""]}),t})(),Qb=(()=>{class t{constructor(t,e,n){this.transaccionService=t,this.router=e,this.st=n,this.transaccion={nombre:"",monto:"",tipo:"",userId:""},this.usr={id:"",nombre:"",apellido:"",usuario:"","contrase\xf1a":""}}ngOnInit(){this.verificar()}verificar(){this.usr=this.st.traerValor("usr"),null==this.usr&&this.router.navigate([""])}create(){let t=document.getElementById("txtNombre").value.toString(),e=document.getElementById("txtMonto").value.toString();var n=document.getElementById("inlineRadio1").checked,r=document.getElementById("inlineRadio2");if(0==n&&0==r.checked)alert("LLene todos los campos");else if(0==t.length||0==e.length)alert("LLene todos los campos");else{if(1==n)var i="Ingreso";else i="Egreso";this.transaccion={nombre:t,monto:e,tipo:i,userId:this.usr.id},this.transaccionService.createTransaccion(this.transaccion),this.router.navigate([""])}}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Bb),r.Gb(ni),r.Gb(Hb))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-nueva-transaccion"]],decls:32,vars:0,consts:[[1,"container"],[1,"card"],["action",""],[1,"mb-3","row"],["for","",1,"col-sm-2","col-form-label"],[1,"col-sm-10","text-center"],[1,"form-check","form-check-inline"],["type","radio","name","inlineRadioOptions","id","inlineRadio1","value","Ingreso",1,"form-check-input"],["for","inlineRadio1",1,"form-check-label"],["type","radio","name","inlineRadioOptions","id","inlineRadio2","value","Egreso",1,"form-check-input"],["for","inlineRadio2",1,"form-check-label"],["for","txtNombre",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","id","txtNombre","required","","autocomplete","off",1,"form-control"],["for","txtMonto",1,"col-sm-2","col-form-label"],["type","number","id","txtMonto","required","","autocomplete","off",1,"form-control"],[1,"text-center"],["type","button",1,"btn","btn-success","me-2","text-center",3,"click"],["routerLink","home"],["type","button",1,"btn","btn-dark"]],template:function(t,e){1&t&&(r.Hb(0,"app-navbar"),r.Jb(1,"div",0),r.Jb(2,"div",1),r.Jb(3,"form",2),r.Jb(4,"div",3),r.Jb(5,"label",4),r.bc(6,"Tipo de Transacci\xf3n"),r.Ib(),r.Jb(7,"div",5),r.Jb(8,"div",6),r.Hb(9,"input",7),r.Jb(10,"label",8),r.bc(11,"Ingreso"),r.Ib(),r.Ib(),r.Jb(12,"div",6),r.Hb(13,"input",9),r.Jb(14,"label",10),r.bc(15,"Egreso"),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Jb(16,"div",3),r.Jb(17,"label",11),r.bc(18,"Nombre"),r.Ib(),r.Jb(19,"div",12),r.Hb(20,"input",13),r.Ib(),r.Ib(),r.Jb(21,"div",3),r.Jb(22,"label",14),r.bc(23,"Monto"),r.Ib(),r.Jb(24,"div",12),r.Hb(25,"input",15),r.Ib(),r.Ib(),r.Jb(26,"div",16),r.Jb(27,"button",17),r.Pb("click",function(){return e.create()}),r.bc(28,"Agregar"),r.Ib(),r.Jb(29,"a",18),r.Jb(30,"button",19),r.bc(31,"Cancelar"),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib())},directives:[Wb,ii],styles:[".container[_ngcontent-%COMP%]{margin-top:20px}"]}),t})(),$b=(()=>{class t{constructor(t,e,n){this.serTrans=t,this.router=e,this.st=n}ngOnInit(){}verificar(){this.usrNav=this.st.traerValor("usr"),null==this.usrNav&&this.serTrans.cargarTransacciones2()}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Bb),r.Gb(ni),r.Gb(Hb))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-resumen"]],decls:20,vars:7,consts:[[1,"container"],[1,"card"],[1,"mb-3","row"],["for","txtIngresos",1,"col-sm-2","col-form-label"],[1,"col-sm-4"],["type","text","id","txtIngresos","disabled","",1,"form-control",3,"value"],["for","txtAhorro",1,"col-sm-2","col-form-label"],["type","text","id","txtAhorro","disabled","",1,"form-control",3,"value","ngClass"],["for","txtEgresos",1,"col-sm-2","col-form-label"],["type","text","id","txtEgresos","disabled","",1,"form-control",3,"value"],["role","group",1,"btn-group"],["type","button","routerLink","new",1,"btn","btn-primary"]],template:function(t,e){1&t&&(r.Jb(0,"div",0),r.Jb(1,"div",1),r.Jb(2,"div",2),r.Jb(3,"label",3),r.bc(4,"Total Ingresos"),r.Ib(),r.Jb(5,"div",4),r.Hb(6,"input",5),r.Ib(),r.Jb(7,"label",6),r.bc(8,"Ahorro"),r.Ib(),r.Jb(9,"div",4),r.Hb(10,"input",7),r.Ib(),r.Ib(),r.Jb(11,"div",2),r.Jb(12,"label",8),r.bc(13,"Total Egresos"),r.Ib(),r.Jb(14,"div",4),r.Hb(15,"input",9),r.Sb(16,"currency"),r.Ib(),r.Ib(),r.Jb(17,"div",10),r.Jb(18,"button",11),r.bc(19,"Nuevo"),r.Ib(),r.Ib(),r.Ib(),r.Ib()),2&t&&(r.xb(6),r.Vb("value","$ ",e.serTrans.ingresos.toFixed(2),""),r.xb(4),r.Vb("value","$ ",e.serTrans.ahorro.toFixed(2),""),r.Ub("ngClass",e.serTrans.ahorro>0?"ahorroPositivo":"ahorroNegativo"),r.xb(5),r.Vb("value"," ",r.Tb(16,4,e.serTrans.egresos.toFixed(2),"USD"),""))},directives:[L,ri],pipes:[z],styles:[".ahorroPositivo[_ngcontent-%COMP%]{background-color:green;color:#f5f5f5}.ahorroNegativo[_ngcontent-%COMP%]{background-color:red;color:#f5f5f5}"]}),t})();function Kb(t,e){if(1&t){const t=r.Kb();r.Jb(0,"tr",4),r.Jb(1,"td"),r.bc(2),r.Ib(),r.Jb(3,"td"),r.bc(4),r.Ib(),r.Jb(5,"td"),r.bc(6),r.Ib(),r.Hb(7,"td"),r.Jb(8,"td"),r.Jb(9,"button",5),r.Pb("click",function(){r.Xb(t);const n=e.$implicit;return r.Rb().delete(n.id)}),r.bc(10,"Eliminar"),r.Ib(),r.Ib(),r.Ib()}if(2&t){const t=e.$implicit;r.Ub("ngClass","Egreso"==t.tipo?"stilo":"stilo2"),r.xb(2),r.cc(t.nombre),r.xb(2),r.cc(t.tipo),r.xb(2),r.dc("$ ",t.monto,"")}}let Yb=(()=>{class t{constructor(t,e,n){this.transServ=t,this.router=e,this.st=n,this.usr={id:"",nombre:"",apellido:"",usuario:"","contrase\xf1a":""}}ngOnInit(){this.verificar()}verificar(){this.usr=this.st.traerValor("usr"),null==this.usr&&this.router.navigate(["login"])}delete(t){this.transServ.deleteTransaccion(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Bb),r.Gb(ni),r.Gb(Hb))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-informacion"]],decls:16,vars:1,consts:[[1,"container"],[1,"table"],["scope","col"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(r.Jb(0,"div",0),r.Jb(1,"table",1),r.Jb(2,"thead"),r.Jb(3,"tr"),r.Jb(4,"th",2),r.bc(5,"Nombre"),r.Ib(),r.Jb(6,"th",2),r.bc(7,"Tipo"),r.Ib(),r.Jb(8,"th",2),r.bc(9,"Monto"),r.Ib(),r.Hb(10,"th",2),r.Jb(11,"th",2),r.bc(12,"Acci\xf3n"),r.Ib(),r.Ib(),r.Ib(),r.Jb(13,"tbody"),r.ac(14,Kb,11,4,"tr",3),r.Ib(),r.Hb(15,"tfoot"),r.Ib(),r.Ib()),2&t&&(r.xb(14),r.Ub("ngForOf",e.transServ.transacciones))},directives:[U,L],styles:[".stilo[_ngcontent-%COMP%]{background-color:#ff8c00}.stilo2[_ngcontent-%COMP%]{background-color:green;color:#f0fff0}.container[_ngcontent-%COMP%]{margin-top:20px}th[_ngcontent-%COMP%]{color:#fff}"]}),t})(),Jb=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ab({type:t,selectors:[["app-principal"]],decls:3,vars:0,template:function(t,e){1&t&&(r.Hb(0,"app-resumen"),r.Hb(1,"app-informacion"),r.Hb(2,"router-outlet"))},directives:[$b,Yb,si],styles:[""]}),t})(),Xb=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ab({type:t,selectors:[["app-home"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Hb(0,"app-navbar"),r.Hb(1,"app-principal"))},directives:[Wb,Jb],styles:[""]}),t})();const Zb=[{path:"login",component:(()=>{class t{constructor(t,e,n){this.router=t,this.st=e,this.servTrans=n}ngOnInit(){this.verificar()}verificar(){null!=this.st.traerValor("usr")&&this.router.navigate(["/home"])}IngresaClk(){return function(t,e,n,r){return new(n||(n=Promise))(function(e,i){function o(t){try{a(r.next(t))}catch(Zm){i(Zm)}}function s(t){try{a(r.throw(t))}catch(Zm){i(Zm)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(t){t(r)})).then(o,s)}a((r=r.apply(t,[])).next())})}(this,0,void 0,function*(){let t=document.getElementById("txtUsuario").value,e=document.getElementById("txtContra").value,n=this.servTrans.login(t,e);null==n?alert("Usuario o Contrase\xf1a incorrectas intente nuevamente"):(this.st.guardarValor("usr",n),this.router.navigate(["home"]),this.servTrans.cargarTransacciones2())})}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(ni),r.Gb(Hb),r.Gb(Bb))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-login"]],decls:30,vars:0,consts:[[1,"login-container","text-c","animated","flipInX"],[1,"logo-badge","text-whitesmoke"],[1,"fa","fa-user-circle"],[1,"text-whitesmoke"],[1,"container-content"],[1,"margin-t"],[1,"form-group"],["type","text","id","txtUsuario","placeholder","Usuario","required","",1,"form-control"],["type","password","id","txtContra","placeholder","Contrase\xf1a","required","",1,"form-control"],["type","button",1,"form-button","button-l","margin-b",3,"click"],["href","#",1,"text-darkyellow"],[1,"text-whitesmoke","text-center"],["routerLink","/register",1,"text-darkyellow"],[1,"margin-t","text-whitesmoke"]],template:function(t,e){1&t&&(r.Jb(0,"div",0),r.Jb(1,"div"),r.Jb(2,"h1",1),r.Hb(3,"span",2),r.Ib(),r.Ib(),r.Jb(4,"h3",3),r.bc(5,"Finanzas Personales"),r.Ib(),r.Jb(6,"p",3),r.bc(7,"Iniciar Sesi\xf3n "),r.Ib(),r.Jb(8,"div",4),r.Jb(9,"form",5),r.Jb(10,"div",6),r.Hb(11,"input",7),r.Ib(),r.Hb(12,"br"),r.Jb(13,"div",6),r.Hb(14,"input",8),r.Ib(),r.Hb(15,"br"),r.Jb(16,"button",9),r.Pb("click",function(){return e.IngresaClk()}),r.bc(17,"Iniciar Sesi\xf3n"),r.Ib(),r.Jb(18,"a",10),r.Jb(19,"small"),r.bc(20,"Olvidaste la contrase\xf1a?"),r.Ib(),r.Ib(),r.Jb(21,"p",11),r.Jb(22,"small"),r.bc(23,"No tienes una cuenta?"),r.Ib(),r.Ib(),r.Jb(24,"a",12),r.Jb(25,"small"),r.bc(26,"Registrarse"),r.Ib(),r.Ib(),r.Ib(),r.Jb(27,"p",13),r.Jb(28,"small"),r.bc(29," Finanzas Personales \xa9 2021"),r.Ib(),r.Ib(),r.Ib(),r.Ib())},directives:[ii],styles:[".text-c[_ngcontent-%COMP%]{text-align:center}.text-l[_ngcontent-%COMP%]{text-align:left}.text-r[_ngcontent-%COMP%]{text-align:right}.text-j[_ngcontent-%COMP%]{text-align:justify}.text-whitesmoke[_ngcontent-%COMP%]{color:#f5f5f5}.text-darkyellow[_ngcontent-%COMP%]{color:rgba(255,235,59,.432)}.line-b[_ngcontent-%COMP%]{border-bottom:1px solid #ffeb3b!important}.button[_ngcontent-%COMP%]{border-radius:3px}.form-button[_ngcontent-%COMP%]{background-color:rgba(255,235,59,.24);border-color:rgba(255,235,59,.24);color:#e6e6e6}.form-button.active[_ngcontent-%COMP%], .form-button.active[_ngcontent-%COMP%]:focus, .form-button.active[_ngcontent-%COMP%]:hover, .form-button[_ngcontent-%COMP%]:active, .form-button[_ngcontent-%COMP%]:active:focus, .form-button[_ngcontent-%COMP%]:active:hover, .form-button[_ngcontent-%COMP%]:focus, .form-button[_ngcontent-%COMP%]:hover{background-color:rgba(255,235,59,.473);border-color:rgba(255,235,59,.473);color:#e6e6e6}.button-l[_ngcontent-%COMP%]{width:100%!important}.margin-g[_ngcontent-%COMP%]{margin:15px}.margin-g-sm[_ngcontent-%COMP%]{margin:10px}.margin-g-md[_ngcontent-%COMP%]{margin:20px}.margin-g-lg[_ngcontent-%COMP%]{margin:30px}.margin-l[_ngcontent-%COMP%]{margin-left:15px}.margin-l-sm[_ngcontent-%COMP%]{margin-left:10px}.margin-l-md[_ngcontent-%COMP%]{margin-left:20px}.margin-l-lg[_ngcontent-%COMP%]{margin-left:30px}.margin-r[_ngcontent-%COMP%]{margin-right:15px}.margin-r-sm[_ngcontent-%COMP%]{margin-right:10px}.margin-r-md[_ngcontent-%COMP%]{margin-right:20px}.margin-r-lg[_ngcontent-%COMP%]{margin-right:30px}.margin-t[_ngcontent-%COMP%]{margin-top:15px}.margin-t-sm[_ngcontent-%COMP%]{margin-top:10px}.margin-t-md[_ngcontent-%COMP%]{margin-top:20px}.margin-t-lg[_ngcontent-%COMP%]{margin-top:30px}.margin-b[_ngcontent-%COMP%]{margin-bottom:15px}.margin-b-sm[_ngcontent-%COMP%]{margin-bottom:10px}.margin-b-md[_ngcontent-%COMP%]{margin-bottom:20px}.margin-b-lg[_ngcontent-%COMP%]{margin-bottom:30px}.border-line[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{background-color:#5f5f5f;background-image:none;border:1px solid #424242;border-radius:1px;color:inherit;display:block;padding:6px 12px;transition:border-color .15s ease-in-out 0s,box-shadow .15s ease-in-out 0s;width:100%}.border-line[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#ffeb3b;background-color:#616161;color:#e6e6e6}.form-control[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:focus{box-shadow:none}.form-control[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#bdbdbd}.container-content[_ngcontent-%COMP%]{background-color:rgba(58,58,58,.6352941176470588);color:inherit;padding:15px 20px 20px;border-image:none;border-color:#ffeb3b;border-style:solid solid none;border-width:1px 0}.login-container[_ngcontent-%COMP%]{max-width:400px;z-index:100;margin:0 auto;padding-top:100px}.login.login-container[_ngcontent-%COMP%]{width:300px}.wrapper.login-container[_ngcontent-%COMP%]{margin-top:140px}.logo-badge[_ngcontent-%COMP%]{color:#e6e6e6;font-size:80px;font-weight:800;letter-spacing:-10px;margin-bottom:0}"]}),t})()},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"register",component:(()=>{class t{constructor(t,e,n){this.usuarioSrv=t,this.router=e,this.st=n,this.newUser={nombre:"",apellido:"",usuario:"","contrase\xf1a":""}}ngOnInit(){this.verificar()}create(){let t=document.getElementById("txtNombre").value.toString(),e=document.getElementById("txtApellido").value.toString(),n=document.getElementById("txtUsuario").value.toString(),r=document.getElementById("txtContra").value.toString();this.newUser={nombre:t,apellido:e,usuario:n,"contrase\xf1a":r},this.usuarioSrv.createUsuario(this.newUser),this.router.navigate([""])}verificar(){null!=this.st.traerValor("usr")&&this.router.navigate(["/home"])}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Bb),r.Gb(ni),r.Gb(Hb))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-register"]],decls:33,vars:0,consts:[[1,"login-container","text-c","animated","flipInX"],[1,"logo-badge","text-whitesmoke"],[1,"fa","fa-user-circle"],[1,"text-whitesmoke"],[1,"container-content"],[1,"margin-t"],[1,"form-group"],["type","text","id","txtNombre","placeholder","Nombre","required","",1,"form-control"],["type","text","id","txtApellido","placeholder","Apellido","required","",1,"form-control"],["type","text","id","txtUsuario","placeholder","Usuario","required","",1,"form-control"],["type","password","id","txtContra","placeholder","Contrase\xf1a","required","",1,"form-control"],["type","submit",1,"form-button","button-l","margin-b",3,"click"],[1,"text-whitesmoke","text-center"],["routerLink","/login",1,"text-darkyellow"],[1,"margin-t","text-whitesmoke"]],template:function(t,e){1&t&&(r.Jb(0,"div",0),r.Jb(1,"div"),r.Jb(2,"h1",1),r.Hb(3,"span",2),r.Ib(),r.Ib(),r.Jb(4,"h3",3),r.bc(5,"Finanzas Personales"),r.Ib(),r.Jb(6,"p",3),r.bc(7,"Crearse una cuenta"),r.Ib(),r.Jb(8,"div",4),r.Jb(9,"form",5),r.Jb(10,"div",6),r.Hb(11,"input",7),r.Ib(),r.Hb(12,"br"),r.Jb(13,"div",6),r.Hb(14,"input",8),r.Ib(),r.Hb(15,"br"),r.Jb(16,"div",6),r.Hb(17,"input",9),r.Ib(),r.Hb(18,"br"),r.Jb(19,"div",6),r.Hb(20,"input",10),r.Ib(),r.Hb(21,"br"),r.Jb(22,"button",11),r.Pb("click",function(){return e.create()}),r.bc(23,"Registrarse"),r.Ib(),r.Jb(24,"p",12),r.Jb(25,"small"),r.bc(26,"Ya tienes una cuenta?"),r.Ib(),r.Ib(),r.Jb(27,"a",13),r.Jb(28,"small"),r.bc(29,"Iniciar Sesi\xf3n"),r.Ib(),r.Ib(),r.Ib(),r.Jb(30,"p",14),r.Jb(31,"small"),r.bc(32," Fianzas Personales \xa9 2021"),r.Ib(),r.Ib(),r.Ib(),r.Ib())},directives:[ii],styles:[".text-c[_ngcontent-%COMP%]{text-align:center}.text-l[_ngcontent-%COMP%]{text-align:left}.text-r[_ngcontent-%COMP%]{text-align:right}.text-j[_ngcontent-%COMP%]{text-align:justify}.text-whitesmoke[_ngcontent-%COMP%]{color:#f5f5f5}.text-darkyellow[_ngcontent-%COMP%]{color:rgba(255,235,59,.432)}.line-b[_ngcontent-%COMP%]{border-bottom:1px solid #ffeb3b!important}.button[_ngcontent-%COMP%]{border-radius:3px}.form-button[_ngcontent-%COMP%]{background-color:rgba(255,235,59,.24);border-color:rgba(255,235,59,.24);color:#e6e6e6}.form-button.active[_ngcontent-%COMP%], .form-button.active[_ngcontent-%COMP%]:focus, .form-button.active[_ngcontent-%COMP%]:hover, .form-button[_ngcontent-%COMP%]:active, .form-button[_ngcontent-%COMP%]:active:focus, .form-button[_ngcontent-%COMP%]:active:hover, .form-button[_ngcontent-%COMP%]:focus, .form-button[_ngcontent-%COMP%]:hover{background-color:rgba(255,235,59,.473);border-color:rgba(255,235,59,.473);color:#e6e6e6}.button-l[_ngcontent-%COMP%]{width:100%!important}.margin-g[_ngcontent-%COMP%]{margin:15px}.margin-g-sm[_ngcontent-%COMP%]{margin:10px}.margin-g-md[_ngcontent-%COMP%]{margin:20px}.margin-g-lg[_ngcontent-%COMP%]{margin:30px}.margin-l[_ngcontent-%COMP%]{margin-left:15px}.margin-l-sm[_ngcontent-%COMP%]{margin-left:10px}.margin-l-md[_ngcontent-%COMP%]{margin-left:20px}.margin-l-lg[_ngcontent-%COMP%]{margin-left:30px}.margin-r[_ngcontent-%COMP%]{margin-right:15px}.margin-r-sm[_ngcontent-%COMP%]{margin-right:10px}.margin-r-md[_ngcontent-%COMP%]{margin-right:20px}.margin-r-lg[_ngcontent-%COMP%]{margin-right:30px}.margin-t[_ngcontent-%COMP%]{margin-top:15px}.margin-t-sm[_ngcontent-%COMP%]{margin-top:10px}.margin-t-md[_ngcontent-%COMP%]{margin-top:20px}.margin-t-lg[_ngcontent-%COMP%]{margin-top:30px}.margin-b[_ngcontent-%COMP%]{margin-bottom:15px}.margin-b-sm[_ngcontent-%COMP%]{margin-bottom:10px}.margin-b-md[_ngcontent-%COMP%]{margin-bottom:20px}.margin-b-lg[_ngcontent-%COMP%]{margin-bottom:30px}.border-line[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{background-color:#5f5f5f;background-image:none;border:1px solid #424242;border-radius:1px;color:inherit;display:block;padding:6px 12px;transition:border-color .15s ease-in-out 0s,box-shadow .15s ease-in-out 0s;width:100%}.border-line[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#ffeb3b;background-color:#616161;color:#e6e6e6}.form-control[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:focus{box-shadow:none}.form-control[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#bdbdbd}.container-content[_ngcontent-%COMP%]{background-color:rgba(58,58,58,.6352941176470588);color:inherit;padding:15px 20px 20px;border-image:none;border-color:#ffeb3b;border-style:solid solid none;border-width:1px 0}.login-container[_ngcontent-%COMP%]{max-width:400px;z-index:100;margin:0 auto;padding-top:100px}.login.login-container[_ngcontent-%COMP%]{width:300px}.wrapper.login-container[_ngcontent-%COMP%]{margin-top:140px}.logo-badge[_ngcontent-%COMP%]{color:#e6e6e6;font-size:80px;font-weight:800;letter-spacing:-10px;margin-bottom:0}"]}),t})()},{path:"home",component:Xb},{path:"home/new",component:Qb},{path:"**",redirectTo:"home"}];let t_=(()=>{class t{}return t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({factory:function(e){return new(e||t)},imports:[[yi.forRoot(Zb)],yi]}),t})(),e_=(()=>{class t{constructor(){this.title="finanzas"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ab({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Hb(0,"router-outlet")},directives:[si],styles:[""]}),t})();class n_{}class r_{}class i_{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof i_?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new i_;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof i_?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class o_{encodeKey(t){return s_(t)}encodeValue(t){return s_(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function s_(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class a_{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new o_,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new a_({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function u_(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function c_(t){return"undefined"!=typeof Blob&&t instanceof Blob}function l_(t){return"undefined"!=typeof FormData&&t instanceof FormData}class h_{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new i_),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new a_,this.urlWithParams=e}serializeBody(){return null===this.body?null:u_(this.body)||c_(this.body)||l_(this.body)||"string"==typeof this.body?this.body:this.body instanceof a_?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||l_(this.body)?null:c_(this.body)?this.body.type||null:u_(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof a_?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new h_(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var f_=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class d_{constructor(t,e=200,n="OK"){this.headers=t.headers||new i_,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class p_ extends d_{constructor(t={}){super(t),this.type=f_.ResponseHeader}clone(t={}){return new p_({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class g_ extends d_{constructor(t={}){super(t),this.type=f_.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new g_({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class y_ extends d_{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function v_(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let m_=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof h_)r=t;else{let i,o;i=n.headers instanceof i_?n.headers:new i_(n.headers),n.params&&(o=n.params instanceof a_?n.params:new a_({fromObject:n.params})),r=new h_(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(St.a)(r).pipe(pe(t=>this.handler.handle(t)));if(t instanceof h_||"events"===n.observe)return i;const o=i.pipe(ae(t=>t instanceof g_));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object($t.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object($t.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object($t.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object($t.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new a_).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,v_(n,e))}post(t,e,n={}){return this.request("POST",t,v_(n,e))}put(t,e,n={}){return this.request("PUT",t,v_(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(n_))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();class b_{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const __=new r.r("HTTP_INTERCEPTORS");let w_=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const E_=/^\)\]\}',?\n/;class O_{}let C_=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),T_=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Lt.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new i_(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new p_({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(E_,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new g_({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new y_({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new y_({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:f_.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:f_.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:f_.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(O_))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const I_=new r.r("XSRF_COOKIE_NAME"),S_=new r.r("XSRF_HEADER_NAME");class x_{}let j_=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=M(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s),r.Mb(r.C),r.Mb(I_))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),N_=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(x_),r.Mb(S_))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),A_=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(__,[]);this.chain=t.reduceRight((t,e)=>new b_(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r_),r.Mb(r.s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),P_=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:N_,useClass:w_}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:I_,useValue:e.cookieName}:[],e.headerName?{provide:S_,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({factory:function(e){return new(e||t)},providers:[N_,{provide:__,useExisting:N_,multi:!0},{provide:x_,useClass:j_},{provide:I_,useValue:"XSRF-TOKEN"},{provide:S_,useValue:"X-XSRF-TOKEN"}]}),t})(),k_=(()=>{class t{}return t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({factory:function(e){return new(e||t)},providers:[m_,{provide:n_,useClass:A_},T_,{provide:r_,useExisting:T_},C_,{provide:O_,useExisting:C_}],imports:[[P_.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var R_=n("w1tV");class D_{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new M_(t,this.observables,this.project))}}class M_ extends Rt{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Ft(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class L_{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new F_(t,this.predicate))}}class F_ extends kt.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function U_(t){return null==t}function V_(t){return"function"==typeof t.set}function q_(t,e){return V_(e)?e:t.ref(e)}function H_(t,e){if("string"==typeof t)return e.stringCase();if(V_(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function B_(t,e,n="on",r=Ti.b){return new Lt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object($t.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(R_.a)())}function z_(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function G_(t,e){const{payload:n,prevKey:r,key:i}=e,o=z_(t,i),s=function(t,e){if(U_(e))return 0;{const n=z_(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function W_(t){return(U_(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Q_(t,e,n){return function(t,e,n){return B_(t,"value","once",n).pipe(Yt(r=>{const i=[Object(St.a)(r)];return e.forEach(e=>i.push(B_(t,e,"on",n))),Object(ib.a)(...i).pipe(ie(G_,[]))}),ji())}(t,e=W_(e),n)}function $_(t,e,n){const r=(e=W_(e)).map(e=>B_(t,e,"on",n));return Object(ib.a)(...r)}function K_(t,e){return function(n,r){return H_(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Y_(t,e){return function(){return B_(t,"value","on",e)}}n("6Uf2");const J_=new r.r("angularfire2.realtimeDatabaseURL"),X_=new r.r("angularfire2.database.use-emulator");let Z_=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new ki.d(i),this.keepUnstableUntilFirst=Object(ki.h)(this.schedulers);const a=o,u=Object(ki.g)(t,i,e);!Ri.a.auth&&s&&Object(ki.j)(),this.database=Object(ki.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>q_(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:K_(r,"update"),set:K_(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?H_(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Q_(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>$_(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return B_(t,"value","on",e).pipe(Object($t.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new D_(t,n))}}(e),Object($t.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new L_(r))),Object($t.a)(t=>t.actions));var r}(t,$_(t,e).pipe(ie((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Q_(t,r,n).pipe(Object($t.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>q_(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Y_(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Y_(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object($t.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ki.c),r.Mb(ki.b,8),r.Mb(J_,8),r.Mb(r.C),r.Mb(r.A),r.Mb(X_,8),r.Mb(fb,8))},t.\u0275prov=Object(r.Cb)({factory:function(){return new t(Object(r.Mb)(ki.c),Object(r.Mb)(ki.b,8),Object(r.Mb)(J_,8),Object(r.Mb)(r.C),Object(r.Mb)(r.A),Object(r.Mb)(X_,8),Object(r.Mb)(fb,8))},token:t,providedIn:"any"}),t})(),tw=(()=>{class t{}return t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({factory:function(e){return new(e||t)},providers:[Z_]}),t})();const ew={apiKey:"AIzaSyDHV_jJ0cFV-cWq-vDI2AvdPImL3ddhgMA",authDomain:"autenticacion-d06dc.firebaseapp.com",databaseURL:"https://autenticacion-d06dc.firebaseio.com",projectId:"autenticacion-d06dc",storageBucket:"autenticacion-d06dc.appspot.com",messagingSenderId:"601859303677",appId:"1:601859303677:web:437ee442d6e5963d44b694",measurementId:"G-NG23JESTBL"};var nw=n("z6cu"),rw=n("n6bG");function iw(t,e,n,r){return Object(rw.a)(n)&&(r=n,n=void 0),r?iw(t,e,n).pipe(Object($t.a)(t=>Object(Pt.a)(t)?r(...t):r(t))):new Lt.a(r=>{ow(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function ow(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)ow(t[o],e,n,r,i)}r.add(o)}var sw=n("KqfI");const aw=new Lt.a(sw.a);var uw=n("oB13"),cw=n("WMd4");class lw{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new hw(t,this.delay,this.scheduler))}}class hw extends kt.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(hw.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new fw(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(cw.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(cw.a.createComplete()),this.unsubscribe()}}class fw{constructor(t,e){this.time=t,this.notification=e}}const dw="Service workers are disabled or not supported by this browser";class pw{constructor(t){if(this.serviceWorker=t,t){const e=iw(t,"controllerchange").pipe(Object($t.a)(()=>t.controller)),n=Gt(Qt(()=>Object(St.a)(t.controller)),e);this.worker=n.pipe(ae(t=>!!t)),this.registration=this.worker.pipe(Yt(()=>t.getRegistration()));const r=iw(t,"message").pipe(Object($t.a)(t=>t.data)).pipe(ae(t=>t&&t.type)).pipe(Object(uw.a)(new xt.a));r.connect(),this.events=r}else this.worker=this.events=this.registration=Qt(()=>Object(nw.a)(new Error("Service workers are disabled or not supported by this browser")))}postMessage(t,e){return this.worker.pipe(te(1),Object(Se.a)(n=>{n.postMessage(Object.assign({action:t},e))})).toPromise().then(()=>{})}postMessageWithStatus(t,e,n){const r=this.waitForStatus(n),i=this.postMessage(t,e);return Promise.all([r,i]).then(()=>{})}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){return this.events.pipe(ae(e=>e.type===t))}nextEventOfType(t){return this.eventsOfType(t).pipe(te(1))}waitForStatus(t){return this.eventsOfType("STATUS").pipe(ae(e=>e.nonce===t),te(1),Object($t.a)(t=>{if(!t.status)throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let gw=(()=>{class t{constructor(t){if(this.sw=t,this.subscriptionChanges=new xt.a,!t.isEnabled)return this.messages=aw,this.notificationClicks=aw,void(this.subscription=aw);this.messages=this.sw.eventsOfType("PUSH").pipe(Object($t.a)(t=>t.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Object($t.a)(t=>t.data)),this.pushManager=this.sw.registration.pipe(Object($t.a)(t=>t.pushManager));const e=this.pushManager.pipe(Yt(t=>t.getSubscription()));this.subscription=Object(ib.a)(e,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(dw));const e={userVisibleOnly:!0};let n=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(n.length));for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return e.applicationServerKey=r,this.pushManager.pipe(Yt(t=>t.subscribe(e)),te(1)).toPromise().then(t=>(this.subscriptionChanges.next(t),t))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(te(1),Yt(t=>{if(null===t)throw new Error("Not subscribed to push notifications.");return t.unsubscribe().then(t=>{if(!t)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(dw))}decodeBase64(t){return atob(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(pw))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),yw=(()=>{class t{constructor(t){if(this.sw=t,!t.isEnabled)return this.available=aw,this.activated=aw,void(this.unrecoverable=aw);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(dw));const t=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(dw));const t=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:t},t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(pw))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();class vw{}const mw=new r.r("NGSW_REGISTER_SCRIPT");function bw(t,e,n,i){return()=>{if(!W(i)||!("serviceWorker"in navigator)||!1===n.enabled)return;let o;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)o=n.registrationStrategy();else{const[e,...r]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(e){case"registerImmediately":o=Object(St.a)(null);break;case"registerWithDelay":o=_w(+r[0]||0);break;case"registerWhenStable":o=r[0]?Object(ib.a)(ww(t),_w(+r[0])):ww(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(r.A).runOutsideAngular(()=>o.pipe(te(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(t=>console.error("Service worker registration failed with:",t))))}}function _w(t){return Object(St.a)(null).pipe(function(t,e=Ti.a){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new lw(r,e))}(t))}function ww(t){return t.get(r.g).isStable.pipe(ae(t=>t))}function Ew(t,e){return new pw(W(e)&&!1!==t.enabled?navigator.serviceWorker:void 0)}let Ow=(()=>{class t{static register(e,n={}){return{ngModule:t,providers:[{provide:mw,useValue:e},{provide:vw,useValue:n},{provide:pw,useFactory:Ew,deps:[vw,r.C]},{provide:r.d,useFactory:bw,deps:[r.s,mw,vw,r.C],multi:!0}]}}}return t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({factory:function(e){return new(e||t)},providers:[gw,yw]}),t})(),Cw=(()=>{class t{}return t.\u0275mod=r.Eb({type:t,bootstrap:[e_]}),t.\u0275inj=r.Db({factory:function(e){return new(e||t)},providers:[],imports:[[Tt,t_,k_,ki.a.initializeApp(ew),tw,Rb,Ow.register("ngsw-worker.js",{enabled:!0})]]}),t})();Object(r.T)(),Ot().bootstrapModule(Cw).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);